(function(v){'use strict';function O(a){return function(){var b=arguments[0],d;d="["+(a?a+":":"")+b+"] http://errors.angularjs.org/1.5.5/"+(a?a+"/":"")+b;for(b=1;b<arguments.length;b++){d=d+(1==b?"?":"&")+"p"+(b-1)+"=";var c=encodeURIComponent,e;e=arguments[b];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;d+=c(e)}return Error(d)}}function ya(a){if(null==a||Va(a))return!1;if(K(a)||F(a)||B&&a instanceof B)return!0;var b="length"in Object(a)&&a.length;return Q(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function q(a,b,d){var c,e;if(a)if(E(a))for(c in a)"prototype"==c||"length"==c||"name"==c||a.hasOwnProperty&&!a.hasOwnProperty(c)||b.call(d,a[c],c,a);else if(K(a)||ya(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==q)a.forEach(b,d,a);else if(oc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ua.call(a,c)&&b.call(d,a[c],c,a);return a}function pc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function qc(a){return function(b,d){a(d,b)}}function Xd(){return++nb}function Nb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(G(g)||E(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var n=h[k],m=g[n];d&&G(m)?fa(m)?a[n]=new Date(m.valueOf()):Wa(m)?a[n]=new RegExp(m):m.nodeName?a[n]=m.cloneNode(!0):Ob(m)?a[n]=m.clone():(G(a[n])||(a[n]=K(m)?[]:{}),Nb(a[n],[m],!0)):a[n]=m}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function R(a){return Nb(a,za.call(arguments,1),!1)}function Yd(a){return Nb(a,za.call(arguments,1),!0)}function X(a){return parseInt(a,10)}function Pb(a,b){return R(Object.create(a),b)}function C(){}function Xa(a){return a}function da(a){return function(){return a}}function rc(a){return E(a.toString)&&a.toString!==ma}function y(a){return"undefined"===typeof a}function x(a){return"undefined"!==typeof a}function G(a){return null!==a&&"object"===typeof a}function oc(a){return null!==a&&"object"===typeof a&&!sc(a)}function F(a){return"string"===typeof a}function Q(a){return"number"===typeof a}function fa(a){return"[object Date]"===ma.call(a)}function E(a){return"function"===typeof a}function Wa(a){return"[object RegExp]"===ma.call(a)}function Va(a){return a&&a.window===a}function Ya(a){return a&&a.$evalAsync&&a.$watch}function Da(a){return"boolean"===typeof a}function Zd(a){return a&&Q(a.length)&&$d.test(ma.call(a))}function Ob(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function ae(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function va(a){return P(a.nodeName||a[0]&&a[0].nodeName)}function Za(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function qa(a,b){function d(a,b){var d=b.$$hashKey,e;if(K(a)){e=0;for(var f=a.length;e<f;e++)b.push(c(a[e]))}else if(oc(a))for(e in a)b[e]=c(a[e]);else if(a&&"function"===typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&(b[e]=c(a[e]));else for(e in a)ua.call(a,e)&&(b[e]=c(a[e]));d?b.$$hashKey=d:delete b.$$hashKey;return b}function c(a){if(!G(a))return a;var b=f.indexOf(a);if(-1!==b)return g[b];if(Va(a)||Ya(a))throw Aa("cpws");var b=!1,c=e(a);void 0===c&&(c=K(a)?[]:Object.create(sc(a)),b=!0);f.push(a);g.push(c);return b?d(a,c):c}function e(a){switch(ma.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(c(a.buffer));case"[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex,b;case"[object Blob]":return new a.constructor([a],{type:a.type})}if(E(a.cloneNode))return a.cloneNode(!0)}var f=[],g=[];if(b){if(Zd(b)||"[object ArrayBuffer]"===ma.call(b))throw Aa("cpta");if(a===b)throw Aa("cpi");K(b)?b.length=0:q(b,function(a,d){"$$hashKey"!==d&&delete b[d]});f.push(a);g.push(b);return d(a,b)}return c(a)}function ha(a,b){if(K(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(G(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function pa(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d==typeof b&&"object"==d)if(K(a)){if(!K(b))return!1;if((d=a.length)==b.length){for(c=0;c<d;c++)if(!pa(a[c],b[c]))return!1;return!0}}else{if(fa(a))return fa(b)?pa(a.getTime(),b.getTime()):!1;if(Wa(a))return Wa(b)?a.toString()==b.toString():!1;if(Ya(a)||Ya(b)||Va(a)||Va(b)||K(b)||fa(b)||Wa(b))return!1;d=T();for(c in a)if("$"!==c.charAt(0)&&!E(a[c])){if(!pa(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&x(b[c])&&!E(b[c]))return!1;return!0}return!1}function $a(a,b,d){return a.concat(za.call(b,d))}function tc(a,b){var d=2<arguments.length?za.call(arguments,2):[];return!E(b)||b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,$a(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function be(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:Va(b)?d="$WINDOW":b&&v.document===b?d="$DOCUMENT":Ya(b)&&(d="$SCOPE");return d}function ab(a,b){if(!y(a))return Q(b)||(b=b?2:null),JSON.stringify(a,be,b)}function uc(a){return F(a)?JSON.parse(a):a}function vc(a,b){a=a.replace(ce,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return isNaN(d)?b:d}function Qb(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=vc(b,c);d*=b-c;a=new Date(a.getTime());a.setMinutes(a.getMinutes()+d);return a}function wa(a){a=B(a).clone();try{a.empty()}catch(b){}var d=B("<div>").append(a).html();try{return a[0].nodeType===Ma?P(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+P(b)})}catch(c){return P(d)}}
function wc(a){try{return decodeURIComponent(a)}catch(b){}}function xc(a){var b={};q((a||"").split("&"),function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=wc(e),x(e)&&(f=x(f)?wc(f):!0,ua.call(b,e)?K(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function Rb(a){var b=[];q(a,function(a,c){K(a)?q(a,function(a){b.push(ja(c,!0)+(!0===a?"":"="+ja(a,!0)))}):b.push(ja(c,!0)+(!0===a?"":"="+ja(a,!0)))});return b.length?b.join("&"):""}
function ob(a){return ja(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ja(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function de(a,b){var d,c,e=Na.length;for(c=0;c<e;++c)if(d=Na[c]+b,F(d=a.getAttribute(d)))return d;return null}function ee(a,b){var d,c,e={};q(Na,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});q(Na,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});d&&(e.strictDi=null!==de(d,"strict-di"),b(d,c?[c]:[],e))}function yc(a,b,d){G(d)||(d={});d=R({strictDi:!1},d);var c=function(){a=B(a);if(a.injector()){var c=a[0]===v.document?"document":wa(a);throw Aa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=bb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;v&&e.test(v.name)&&(d.debugInfoEnabled=!0,v.name=v.name.replace(e,""));if(v&&!f.test(v.name))return c();v.name=v.name.replace(f,"");ea.resumeBootstrap=function(a){q(a,function(a){b.push(a)});return c()};E(ea.resumeDeferredBootstrap)&&ea.resumeDeferredBootstrap()}function fe(){v.name="NG_ENABLE_DEBUG_INFO!"+v.name;v.location.reload()}function ge(a){a=ea.element(a).injector();if(!a)throw Aa("test");return a.get("$$testability")}function zc(a,b){b=b||"_";return a.replace(he,function(a,c){return(c?b:"")+a.toLowerCase()})}function ie(){var a;if(!Ac){var b=pb();(Z=y(b)?v.jQuery:b?v[b]:void 0)&&Z.fn.on?(B=Z,R(Z.fn,{scope:Oa.scope,isolateScope:Oa.isolateScope,controller:Oa.controller,injector:Oa.injector,inheritedData:Oa.inheritedData}),a=Z.cleanData,Z.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=Z._data(f,"events"))&&c.$destroy&&Z(f).triggerHandler("$destroy");a(b)}):B=U;ea.element=B;Ac=!0}}function qb(a,b,d){if(!a)throw Aa("areq",b||"?",d||"required");return a}function Pa(a,b,d){d&&K(a)&&(a=a[a.length-1]);qb(E(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Qa(a,b){if("hasOwnProperty"===a)throw Aa("badname",b);}function Bc(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&E(a)?tc(e,a):a}function rb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==b)c||(c=B(za.call(a,0,e))),c.push(b);return c||a}function T(){return Object.create(null)}function je(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=O("$injector"),c=O("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||O;return b(a,"module",function(){var a={};return function(f,g,h){if("hasOwnProperty"===f)throw c("badname","module");g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,d,e,f){f||(f=c);return function(){f[e||"push"]([b,d,arguments]);return M}}function b(a,d){return function(b,e){e&&E(e)&&(e.$$moduleName=f);c.push([a,d,arguments]);return M}}if(!g)throw d("nomod",f);var c=[],e=[],r=[],N=a("$injector","invoke","push",e),M={_invokeQueue:c,_configBlocks:e,_runBlocks:r,requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:N,run:function(a){r.push(a);return this}};h&&N(h);return M})}})}function ke(a){R(a,{bootstrap:yc,copy:qa,extend:R,merge:Yd,equals:pa,element:B,forEach:q,injector:bb,noop:C,bind:tc,toJson:ab,fromJson:uc,identity:Xa,isUndefined:y,isDefined:x,isString:F,isFunction:E,isObject:G,isNumber:Q,isElement:Ob,isArray:K,version:le,isDate:fa,lowercase:P,uppercase:sb,callbacks:{counter:0},getTestability:ge,$$minErr:O,$$csp:Ea,reloadWithDebugInfo:fe});Sb=je(v);Sb("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:me});a.provider("$compile",Cc).directive({a:ne,input:Dc,textarea:Dc,form:oe,script:pe,select:qe,style:re,option:se,ngBind:te,ngBindHtml:ue,ngBindTemplate:ve,ngClass:we,ngClassEven:xe,ngClassOdd:ye,ngCloak:ze,ngController:Ae,ngForm:Be,ngHide:Ce,ngIf:De,ngInclude:Ee,ngInit:Fe,ngNonBindable:Ge,ngPluralize:He,ngRepeat:Ie,ngShow:Je,ngStyle:Ke,ngSwitch:Le,ngSwitchWhen:Me,ngSwitchDefault:Ne,ngOptions:Oe,ngTransclude:Pe,ngModel:Qe,ngList:Re,ngChange:Se,pattern:Ec,ngPattern:Ec,required:Fc,ngRequired:Fc,minlength:Gc,ngMinlength:Gc,maxlength:Hc,ngMaxlength:Hc,ngValue:Te,ngModelOptions:Ue}).directive({ngInclude:Ve}).directive(tb).directive(Ic);a.provider({$anchorScroll:We,$animate:Xe,$animateCss:Ye,$$animateJs:Ze,$$animateQueue:$e,$$AnimateRunner:af,$$animateAsyncRun:bf,$browser:cf,$cacheFactory:df,$controller:ef,$document:ff,$exceptionHandler:gf,$filter:Jc,$$forceReflow:hf,$interpolate:jf,$interval:kf,$http:lf,$httpParamSerializer:mf,$httpParamSerializerJQLike:nf,$httpBackend:of,$xhrFactory:pf,$location:qf,$log:rf,$parse:sf,$rootScope:tf,$q:uf,$$q:vf,$sce:wf,$sceDelegate:xf,$sniffer:yf,$templateCache:zf,$templateRequest:Af,$$testability:Bf,$timeout:Cf,$window:Df,$$rAF:Ef,$$jqLite:Ff,$$HashMap:Gf,$$cookieReader:Hf})}])}function cb(a){return a.replace(If,function(a,d,c,e){return e?c.toUpperCase():c}).replace(Jf,"Moz$1")}function Kc(a){a=a.nodeType;return 1===a||!a||9===a}function Lc(a,b){var d,c,e=b.createDocumentFragment(),f=[];if(Tb.test(a)){d=d||e.appendChild(b.createElement("div"));c=(Kf.exec(a)||["",""])[1].toLowerCase();c=ia[c]||ia._default;d.innerHTML=c[1]+a.replace(Lf,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=$a(f,d.childNodes);d=e.firstChild;d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";q(f,function(a){e.appendChild(a)});return e}function Mc(a,b){var d=a.parentNode;d&&d.replaceChild(b,a);b.appendChild(a)}function U(a){if(a instanceof U)return a;var b;F(a)&&(a=V(a),b=!0);if(!(this instanceof U)){if(b&&"<"!=a.charAt(0))throw Ub("nosel");return new U(a)}if(b){b=v.document;var d;a=(d=Mf.exec(a))?[b.createElement(d[1])]:(d=Lc(a,b))?d.childNodes:[]}Nc(this,a)}function Vb(a){return a.cloneNode(!0)}function ub(a,b){b||db(a);if(a.querySelectorAll)for(var d=a.querySelectorAll("*"),c=0,e=d.length;c<e;c++)db(d[c])}function Oc(a,b,d,c){if(x(c))throw Ub("offargs");var e=(c=vb(a))&&c.events,f=c&&c.handle;if(f)if(b){var g=function(b){var c=e[b];x(d)&&Za(c||[],d);x(d)&&c&&0<c.length||(a.removeEventListener(b,f,!1),delete e[b])};q(b.split(" "),function(a){g(a);wb[a]&&g(wb[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f,!1),delete e[b]}function db(a,b){var d=a.ng339,c=d&&eb[d];c&&(b?delete c.data[b]:(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),Oc(a)),delete eb[d],a.ng339=void 0))}function vb(a,b){var d=a.ng339,d=d&&eb[d];b&&!d&&(a.ng339=d=++Nf,d=eb[d]={events:{},data:{},handle:void 0});return d}function Wb(a,b,d){if(Kc(a)){var c=x(d),e=!c&&b&&!G(b),f=!b;a=(a=vb(a,!e))&&a.data;if(c)a[b]=d;else{if(f)return a;if(e)return a&&a[b];R(a,b)}}}function xb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function yb(a,b){b&&a.setAttribute&&q(b.split(" "),function(b){a.setAttribute("class",V((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+V(b)+" "," ")))})}function zb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");q(b.split(" "),function(a){a=V(a);-1===d.indexOf(" "+a+" ")&&(d+=a+" ")});a.setAttribute("class",V(d))}}function Nc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function Pc(a,b){return Ab(a,"$"+(b||"ngController")+"Controller")}function Ab(a,b,d){9==a.nodeType&&(a=a.documentElement);for(b=K(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(x(d=B.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function Qc(a){for(ub(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Bb(a,b){b||ub(a);var d=a.parentNode;d&&d.removeChild(a)}function Of(a,b){b=b||v;if("complete"===b.document.readyState)b.setTimeout(a);else B(b).on("load",a)}function Rc(a,b){var d=Cb[b.toLowerCase()];return d&&Sc[va(a)]&&d}function Pf(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(y(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var k=f.specialHandlerWrapper||Qf;1<g&&(f=ha(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||k(a,c,f[l])}};d.elem=a;return d}function Qf(a,b,d){d.call(a,b)}function Rf(a,b,d){var c=b.relatedTarget;c&&(c===a||Sf.call(a,c))||d.call(a,b)}function Ff(){this.$get=function(){return R(U,{hasClass:function(a,b){a.attr&&(a=a[0]);return xb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return zb(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return yb(a,b)}})}}function Fa(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||Xd)():d+":"+a}function Ra(a,b){if(b){var d=0;this.nextUid=function(){return++d}}q(a,this.put,this)}function Tc(a){a=Function.prototype.toString.call(a).replace(Tf,"");return a.match(Uf)||a.match(Vf)}function Wf(a){return(a=Tc(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function bb(a,b){function d(a){return function(b,c){if(G(b))q(b,qc(a));else return a(b,c)}}function c(a,b){Qa(a,"service");if(E(b)||K(b))b=r.instantiate(b);if(!b.$get)throw Ga("pget",a);return m[a+"Provider"]=b}function e(a,b){return function(){var c=w.invoke(b,this);if(y(c))throw Ga("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){qb(y(a)||K(a),"modulesToLoad","not an array");var b=[],c;q(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=r.get(e[0]);f[e[1]].apply(f,e[2])}}if(!n.get(a)){n.put(a,!0);try{F(a)?(c=Sb(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):E(a)?b.push(r.invoke(a)):K(a)?b.push(r.invoke(a)):Pa(a,"module")}catch(e){throw K(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ga("modulerr",a,e.stack||e.message||e);}}});return b}function h(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===k)throw Ga("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=c(b,e)}catch(f){throw a[b]===k&&delete a[b],f;}finally{l.shift()}}function e(a,c,f){var g=[];a=bb.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if("string"!==typeof l)throw Ga("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);K(a)&&(a=a[a.length-1]);d=11>=Ca?!1:"function"===typeof a&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(a));return d?(c.unshift(null),new(Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=K(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new(Function.prototype.bind.apply(d,a))},get:d,annotate:bb.$$annotate,has:function(b){return m.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],n=new Ra([],!0),m={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,da(b),!1)}),constant:d(function(a,b){Qa(a,"constant");m[a]=b;N[a]=b}),decorator:function(a,b){var c=r.get(a+"Provider"),d=c.$get;c.$get=function(){var a=w.invoke(d,c);return w.invoke(b,null,{$delegate:a})}}}},r=m.$injector=h(m,function(a,b){ea.isString(b)&&l.push(b);throw Ga("unpr",l.join(" <- "));}),N={},M=h(N,function(a,b){var c=r.get(a+"Provider",b);return w.invoke(c.$get,c,void 0,a)}),w=M;m.$injectorProvider={$get:da(M)};var p=g(a),w=M.get("$injector");w.strictDi=b;q(p,function(a){a&&w.invoke(a)});return w}function We(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===va(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;E(c)?c=c():Ob(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):Q(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=F(a)?a:d.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var h=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||Of(function(){c.$evalAsync(g)})});return g}]}function fb(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;K(a)&&(a=a.join(" "));K(b)&&(b=b.join(" "));return a+" "+b}function Xf(a){F(a)&&(a=a.split(" "));var b=T();q(a,function(a){a.length&&(b[a]=!0)});return b}function Ha(a){return G(a)?a:{}}function Yf(a,b,d,c){function e(a){try{a.apply(null,za.call(arguments,1))}finally{if(M--,0===M)for(;w.length;)try{w.pop()()}catch(b){d.error(b)}}}function f(){u=null;g();h()}function g(){p=I();p=y(p)?null:p;pa(p,L)&&(p=L);L=p}function h(){if(t!==k.url()||H!==p)t=k.url(),H=p,q(J,function(a){a(k.url(),p)})}var k=this,l=a.location,n=a.history,m=a.setTimeout,r=a.clearTimeout,N={};k.isMock=!1;var M=0,w=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){M++};k.notifyWhenNoOutstandingRequests=function(a){0===M?a():w.push(a)};var p,H,t=l.href,z=b.find("base"),u=null,I=c.history?function(){try{return n.state}catch(a){}}:C;g();H=p;k.url=function(b,d,e){y(e)&&(e=null);l!==a.location&&(l=a.location);n!==a.history&&(n=a.history);if(b){var f=H===e;if(t===b&&(!c.history||f))return k;var h=t&&Ia(t)===Ia(b);t=b;H=e;if(!c.history||h&&f){if(!h||u)u=b;d?l.replace(b):h?(d=l,e=b.indexOf("#"),e=-1===e?"":b.substr(e),d.hash=e):l.href=b;l.href!==b&&(u=b)}else n[d?"replaceState":"pushState"](e,"",b),g(),H=p;return k}return u||l.href.replace(/%27/g,"'")};k.state=function(){return p};var J=[],D=!1,L=null;k.onUrlChange=function(b){if(!D){if(c.history)B(a).on("popstate",f);B(a).on("hashchange",f);D=!0}J.push(b);return b};k.$$applicationDestroyed=function(){B(a).off("hashchange popstate",f)};k.$$checkUrlChange=h;k.baseHref=function(){var a=z.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};k.defer=function(a,b){var c;M++;c=m(function(){delete N[c];e(a)},b||0);N[c]=!0;return c};k.defer.cancel=function(a){return N[a]?(delete N[a],r(a),e(C),!0):!1}}function cf(){this.$get=["$window","$log","$sniffer","$document",function(a,b,d,c){return new Yf(a,c,b,d)}]}function df(){this.$get=function(){function a(a,c){function e(a){a!=m&&(r?r==a&&(r=a.n):r=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw O("$cacheFactory")("iid",a);var g=0,h=R({},c,{id:a}),k=T(),l=c&&c.capacity||Number.MAX_VALUE,n=T(),m=null,r=null;return b[a]={put:function(a,b){if(!y(b)){if(l<Number.MAX_VALUE){var c=n[a]||(n[a]={key:a});e(c)}a in k||g++;k[a]=b;g>l&&this.remove(r.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=n[a];if(!b)return;e(b)}return k[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=n[a];if(!b)return;b==m&&(m=b.p);b==r&&(r=b.n);f(b.n,b.p);delete n[a]}a in k&&(delete k[a],g--)},removeAll:function(){k=T();g=0;n=T();m=r=null},destroy:function(){n=h=k=null;delete b[a]},info:function(){return R({},h,{size:g})}}}var b={};a.info=function(){var a={};q(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function zf(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Cc(a,b){function d(a,b,c){var d=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,e=T();q(a,function(a,f){if(a in n)e[f]=n[a];else{var g=a.match(d);if(!g)throw ga("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f};g[4]&&(n[a]=e[f])}});return e}function c(a){var b=a.charAt(0);if(!b||b!==P(b))throw ga("baddir",a);if(a!==a.trim())throw ga("baddir",a);}var e={},f=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,g=/(([\w\-]+)(?:\:([^;]+))?;?)/,h=ae("ngSrc,ngSrcset,src,srcset"),k=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,l=/^(on[a-z]+|formaction)$/,n=T();this.directive=function M(b,d){Qa(b,"directive");F(b)?(c(b),qb(d,"directiveFactory"),e.hasOwnProperty(b)||(e[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];q(e[b],function(e,f){try{var g=a.invoke(e);E(g)?g={compile:da(g)}:!g.compile&&g.link&&(g.compile=da(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||b;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"EA";g.$$moduleName=e.$$moduleName;d.push(g)}catch(h){c(h)}});return d}])),e[b].push(d)):q(b,qc(M));return this};this.component=function(a,b){function c(a){function e(b){return E(b)||K(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:Uc(b.controller)||b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};q(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)});return g}var d=b.controller||function(){};q(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,E(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return x(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return x(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var m=!0;this.debugInfoEnabled=function(a){return x(a)?(m=a,this):m};var r=10;this.onChangesTtl=function(a){return arguments.length?(r=a,this):r};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,b,c,n,t,z,u,I,J,D){function L(){try{if(!--qa)throw Z=void 0,ga("infchng",r);u.$apply(function(){for(var a=0,b=Z.length;a<b;++a)Z[a]();Z=void 0})}finally{qa++}}function S(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function $(a,b,c){na.innerHTML="<span "+b+">";b=na.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function A(a,b){try{a.addClass(b)}catch(c){}}function ba(a,b,c,d,e){a instanceof B||(a=B(a));for(var f=/\S+/,g=0,h=a.length;g<h;g++){var k=a[g];k.nodeType===Ma&&k.nodeValue.match(f)&&Mc(k,a[g]=v.document.createElement("span"))}var l=s(a,b,a,c,d,e);ba.$$addScopeClass(a);var m=null;return function(b,c,d){qb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var f=d.parentBoundTranscludeFn,g=d.transcludeControllers;d=d.futureParentElement;f&&f.$$boundTransclude&&(f=f.$$boundTransclude);m||(m=(d=d&&d[0])?"foreignobject"!==va(d)&&ma.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==m?B(ca(m,B("<div>").append(a).html())):c?Oa.clone.call(a):a;if(g)for(var h in g)d.data("$"+h+"Controller",g[h].instance);ba.$$addScopeInfo(d,b);c&&c(d,b);l&&l(b,d,d,f);return d}}function s(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,n,t,p;if(r)for(p=Array(c.length),m=0;m<h.length;m+=3)f=h[m],p[f]=c[f];else p=c;m=0;for(n=h.length;m<n;)k=p[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),ba.$$addScopeInfo(B(k),l)):l=a,t=c.transcludeOnThisElement?ka(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ka(a,b):null,c(f,l,k,d,t)):f&&f(a,k.childNodes,void 0,e)}for(var h=[],k,l,m,n,r,t=0;t<a.length;t++){k=new S;l=x(a[t],[],k,0===t?d:void 0,e);(f=l.length?Ba(l,a[t],k,b,c,null,[],[],f):null)&&f.scope&&ba.$$addScopeClass(k.$$element);k=f&&f.terminal||!(m=a[t].childNodes)||!m.length?null:s(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||k)h.push(t,f,k),n=!0,r=r||f;f=null}return n?g:null}function ka(a,b,c){function d(e,f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=T(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?ka(a,b.$$slots[f],c):null;return d}function x(a,b,c,d,e){var h=c.$attr,k;switch(a.nodeType){case 1:la(b,xa(va(a)),"E",d,e);for(var l,m,n,t=a.attributes,r=0,p=t&&t.length;r<p;r++){var I=!1,D=!1;l=t[r];k=l.name;m=V(l.value);l=xa(k);if(n=ya.test(l))k=k.replace(Vc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});(l=l.match(Aa))&&Q(l[1])&&(I=k,D=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6));l=xa(k.toLowerCase());h[l]=k;if(n||!c.hasOwnProperty(l))c[l]=m,Rc(a,l)&&(c[l]=!0);fa(a,b,m,l,n);la(b,l,"A",d,e,I,D)}a=a.className;G(a)&&(a=a.animVal);if(F(a)&&""!==a)for(;k=g.exec(a);)l=xa(k[2]),la(b,l,"C",d,e)&&(c[l]=V(k[3])),a=a.substr(k.index+k[0].length);break;case Ma:if(11===Ca)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Ma;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);X(b,a.nodeValue);break;case 8:try{if(k=f.exec(a.nodeValue))l=xa(k[1]),la(b,l,"M",d,e)&&(c[l]=V(k[2]))}catch(J){}}b.sort(Y);return b}function Wc(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ga("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return B(d)}function Xc(a,b,c){return function(d,e,f,g,h){e=Wc(e[0],b,c);return a(d,e,f,g,h)}}function Yb(a,b,c,d,e,f){var g;return a?ba(b,c,d,e,f):function(){g||(g=ba(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function Ba(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){if(a){c&&(a=Xc(a,c,d));a.require=A.require;a.directiveName=M;if(D===A||A.$$isolateScope)a=ha(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=Xc(b,c,d));b.require=A.require;b.directiveName=M;if(D===A||A.$$isolateScope)b=ha(b,{isolateScope:!0});k.push(b)}}function n(a,c,e,f,g){function l(a,b,c,d){var e;Ya(a)||(d=c,c=b,b=a,a=void 0);H&&(e=u);c||(c=H?z.parent():z);if(d){var f=g.$$slots[d];if(f)return f(a,b,e,c,$);if(y(f))throw ga("noslot",d,wa(z));}else return g(a,b,e,c,$)}var m,t,p,A,w,u,L,z;b===e?(f=d,z=d.$$element):(z=B(e),f=new S(z,d));w=c;D?A=c.$new(!0):r&&(w=c.$parent);g&&(L=l,L.$$boundTransclude=g,L.isSlotFilled=function(a){return!!g.$$slots[a]});I&&(u=O(z,f,L,I,A,c,D));D&&(ba.$$addScopeInfo(z,A,!0,!(J&&(J===D||J===D.$$originalDirective))),ba.$$addScopeClass(z,!0),A.$$isolateBindings=D.$$isolateBindings,t=ia(c,f,A,A.$$isolateBindings,D),t.removeWatches&&A.$on("$destroy",t.removeWatches));for(m in u){t=I[m];p=u[m];var Xb=t.$$bindings.bindToController;p.bindingInfo=p.identifier&&Xb?ia(w,f,p.instance,Xb,t):{};var M=p();M!==p.instance&&(p.instance=M,z.data("$"+t.name+"Controller",M),p.bindingInfo.removeWatches&&p.bindingInfo.removeWatches(),p.bindingInfo=ia(w,f,p.instance,Xb,t))}q(I,function(a,b){var c=a.require;a.bindToController&&!K(c)&&G(c)&&R(u[b].instance,gb(b,c,z,u))});q(u,function(a){var b=a.instance;E(b.$onChanges)&&b.$onChanges(a.bindingInfo.initialChanges);E(b.$onInit)&&b.$onInit();E(b.$onDestroy)&&w.$on("$destroy",function(){b.$onDestroy()})});m=0;for(t=h.length;m<t;m++)p=h[m],ja(p,p.isolateScope?A:c,z,f,p.require&&gb(p.directiveName,p.require,z,u),L);var $=c;D&&(D.template||null===D.templateUrl)&&($=A);a&&a($,e.childNodes,void 0,g);for(m=k.length-1;0<=m;m--)p=k[m],ja(p,p.isolateScope?A:c,z,f,p.require&&gb(p.directiveName,p.require,z,u),L);q(u,function(a){a=a.instance;E(a.$postLink)&&a.$postLink()})}l=l||{};for(var t=-Number.MAX_VALUE,r=l.newScopeDirective,I=l.controllerDirectives,D=l.newIsolateScopeDirective,J=l.templateDirective,w=l.nonTlbTranscludeDirective,u=!1,L=!1,H=l.hasElementTranscludeDirective,z=d.$$element=B(b),A,M,$,s=e,Sa,ka=!1,C=!1,v,F=0,Ba=a.length;F<Ba;F++){A=a[F];var P=A.$$start,Q=A.$$end;P&&(z=Wc(b,P,Q));$=void 0;if(t>A.priority)break;if(v=A.scope)A.templateUrl||(G(v)?(W("new/isolated scope",D||r,A,z),D=A):W("new/isolated scope",D,A,z)),r=r||A;M=A.name;if(!ka&&(A.replace&&(A.templateUrl||A.template)||A.transclude&&!A.$$tlb)){for(v=F+1;ka=a[v++];)if(ka.transclude&&!ka.$$tlb||ka.replace&&(ka.templateUrl||ka.template)){C=!0;break}ka=!0}!A.templateUrl&&A.controller&&(v=A.controller,I=I||T(),W("'"+M+"' controller",I[M],A,z),I[M]=A);if(v=A.transclude)if(u=!0,A.$$tlb||(W("transclusion",w,A,z),w=A),"element"==v)H=!0,t=A.priority,$=z,z=d.$$element=B(ba.$$createComment(M,d[M])),b=z[0],da(f,za.call($,0),b),$[0].$$parentNode=$[0].parentNode,s=Yb(C,$,e,t,g&&g.name,{nonTlbTranscludeDirective:w});else{var la=T();$=B(Vb(b)).contents();if(G(v)){$=[];var Y=T(),X=T();q(v,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Y[a]=b;la[b]=null;X[b]=c});q(z.contents(),function(a){var b=Y[xa(va(a))];b?(X[b]=!0,la[b]=la[b]||[],la[b].push(a)):$.push(a)});q(X,function(a,b){if(!a)throw ga("reqslot",b);});for(var Z in la)la[Z]&&(la[Z]=Yb(C,la[Z],e))}z.empty();s=Yb(C,$,e,void 0,void 0,{needsNewScope:A.$$isolateScope||A.$$newScope});s.$$slots=la}if(A.template)if(L=!0,W("template",J,A,z),J=A,v=E(A.template)?A.template(z,d):A.template,v=ta(v),A.replace){g=A;$=Tb.test(v)?Yc(ca(A.templateNamespace,V(v))):[];b=$[0];if(1!=$.length||1!==b.nodeType)throw ga("tplrt",M,"");da(f,z,b);Ba={$attr:{}};v=x(b,[],Ba);var ea=a.splice(F+1,a.length-(F+1));(D||r)&&Zc(v,D,r);a=a.concat(v).concat(ea);U(d,Ba);Ba=a.length}else z.html(v);if(A.templateUrl)L=!0,W("template",J,A,z),J=A,A.replace&&(g=A),n=aa(a.splice(F,a.length-F),z,d,f,u&&s,h,k,{controllerDirectives:I,newScopeDirective:r!==A&&r,newIsolateScopeDirective:D,templateDirective:J,nonTlbTranscludeDirective:w}),Ba=a.length;else if(A.compile)try{Sa=A.compile(z,d,s),E(Sa)?m(null,Sa,P,Q):Sa&&m(Sa.pre,Sa.post,P,Q)}catch(fa){c(fa,wa(z))}A.terminal&&(n.terminal=!0,t=Math.max(t,A.priority))}n.scope=r&&!0===r.scope;n.transcludeOnThisElement=u;n.templateOnThisElement=L;n.transclude=s;l.hasElementTranscludeDirective=H;return n}function gb(a,b,c,d){var e;if(F(b)){var f=b.match(k);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h="$"+b+"Controller";e=g?c.inheritedData(h):c.data(h)}if(!e&&!f)throw ga("ctreq",b,a);}else if(K(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=gb(a,b[g],c,d);else G(b)&&(e={},q(b,function(b,f){e[f]=gb(a,b,c,d)}));return e||null}function O(a,b,c,d,e,f,g){var h=T(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},n=l.controller;"@"==n&&(n=b[l.name]);m=z(n,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}function Zc(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=Pb(a[d],{$$isolateScope:b,$$newScope:c})}function la(b,f,g,h,k,l,m){if(f===k)return null;k=null;if(e.hasOwnProperty(f)){var n;f=a.get(f+"Directive");for(var t=0,r=f.length;t<r;t++)try{if(n=f[t],(y(h)||h>n.priority)&&-1!=n.restrict.indexOf(g)){l&&(n=Pb(n,{$$start:l,$$end:m}));if(!n.$$bindings){var I=n,D=n,A=n.name,J={isolateScope:null,bindToController:null};G(D.scope)&&(!0===D.bindToController?(J.bindToController=d(D.scope,A,!0),J.isolateScope={}):J.isolateScope=d(D.scope,A,!1));G(D.bindToController)&&(J.bindToController=d(D.bindToController,A,!0));if(G(J.bindToController)){var w=D.controller,z=D.controllerAs;if(!w)throw ga("noctrl",A);if(!Uc(w,z))throw ga("noident",A);}var u=I.$$bindings=J;G(u.isolateScope)&&(n.$$isolateBindings=u.isolateScope)}b.push(n);k=n}}catch(L){c(L)}}return k}function Q(b){if(e.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,f=c.length;d<f;d++)if(b=c[d],b.multiElement)return!0;return!1}function U(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;q(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,f){"class"==f?(A(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function aa(a,b,c,d,e,f,g,h){var k=[],l,m,t=b[0],p=a.shift(),r=Pb(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),I=E(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,D=p.templateNamespace;b.empty();n(I).then(function(n){var J,w;n=ta(n);if(p.replace){n=Tb.test(n)?Yc(ca(D,V(n))):[];J=n[0];if(1!=n.length||1!==J.nodeType)throw ga("tplrt",p.name,I);n={$attr:{}};da(d,b,J);var z=x(J,[],n);G(p.scope)&&Zc(z,!0);a=z.concat(a);U(c,n)}else J=t,b.html(n);a.unshift(r);l=Ba(a,J,c,e,b,p,f,g,h);q(d,function(a,c){a==J&&(d[c]=b[0])});for(m=s(b[0].childNodes,e);k.length;){n=k.shift();w=k.shift();var u=k.shift(),L=k.shift(),z=b[0];if(!n.$$destroyed){if(w!==t){var S=w.className;h.hasElementTranscludeDirective&&p.replace||(z=Vb(J));da(u,B(w),z);A(B(z),S)}w=l.transcludeOnThisElement?ka(n,l.transclude,L):L;l(m,n,z,d,w)}}k=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(k?k.push(b,c,d,a):(l.transcludeOnThisElement&&(a=ka(b,l.transclude,e)),l(m,b,c,d,a)))}}function Y(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function W(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw ga("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,wa(d));}function X(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&ba.$$addBindingClass(a);return function(a,c){var e=c.parent();b||ba.$$addBindingClass(e);ba.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ca(a,b){a=P(a||"html");switch(a){case"svg":case"math":var c=v.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function ea(a,b){if("srcdoc"==b)return I.HTML;var c=va(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return I.RESOURCE_URL}function fa(a,c,d,e,f){var g=ea(a,e);f=h[e]||f;var k=b(d,!0,g,f);if(k){if("multiple"===e&&"select"===va(a))throw ga("selmulti",wa(a));c.push({priority:100,compile:function(){return{pre:function(a,c,h){c=h.$$observers||(h.$$observers=T());if(l.test(e))throw ga("nodomevents");var m=h[e];m!==d&&(k=m&&b(m,!0,g,f),d=m);k&&(h[e]=k(a),(c[e]||(c[e]=[])).$$inter=!0,(h.$$observers&&h.$$observers[e].$$scope||a).$watch(k,function(a,b){"class"===e&&a!=b?h.$updateClass(a,b):h.$set(e,a)}))}}}})}}function da(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=v.document.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);B.hasData(d)&&(B.data(c,B.data(d)),B(d).off("$destroy"));B.cleanData(a.querySelectorAll("*"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function ha(a,b){return R(function(){return a.apply(null,arguments)},a,b)}function ja(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,wa(d))}}function ia(a,c,d,e,f){function g(b,c,e){E(d.$onChanges)&&c!==e&&(Z||(a.$$postDigest(L),Z=[]),m||(m={},Z.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Db(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;q(e,function(e,h){var m=e.attrName,n=e.optional,p,r,I,D;switch(e.mode){case"@":n||ua.call(c,m)||(d[h]=c[m]=void 0);c.$observe(m,function(a){if(F(a)||Da(a))g(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;p=c[m];F(p)?d[h]=b(p)(a):Da(p)&&(d[h]=p);l[h]=new Db(Zb,d[h]);break;case"=":if(!ua.call(c,m)){if(n)break;c[m]=void 0}if(n&&!c[m])break;r=t(c[m]);D=r.literal?pa:function(a,b){return a===b||a!==a&&b!==b};I=r.assign||function(){p=d[h]=r(a);throw ga("nonassign",c[m],m,f.name);};p=d[h]=r(a);n=function(b){D(b,d[h])||(D(b,p)?I(a,b=d[h]):d[h]=b);return p=b};n.$stateful=!0;n=e.collection?a.$watchCollection(c[m],n):a.$watch(t(c[m],n),null,r.literal);k.push(n);break;case"<":if(!ua.call(c,m)){if(n)break;c[m]=void 0}if(n&&!c[m])break;r=t(c[m]);d[h]=r(a);l[h]=new Db(Zb,d[h]);n=a.$watch(r,function(a,b){a===b&&(b=d[h]);g(h,a,b);d[h]=a},r.literal);k.push(n);break;case"&":r=c.hasOwnProperty(m)?t(c[m]):C;if(r===C&&n)break;d[h]=function(b){return r(a,b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var oa=/^\w/,na=v.document.createElement("div"),qa=r,Z;S.prototype={$normalize:xa,$addClass:function(a){a&&0<a.length&&J.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&J.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=$c(a,b);c&&c.length&&J.addClass(this.$$element,c);(c=$c(b,a))&&c.length&&J.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=Rc(this.$$element[0],a),g=ad[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=zc(a,"-"));f=va(this.$$element);if("a"===f&&("href"===a||"xlinkHref"===a)||"img"===f&&"src"===a)this[a]=b=D(b,"src"===a);else if("img"===f&&"srcset"===a){for(var f="",g=V(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),l=0;l<k;l++)var m=2*l,f=f+D(V(g[m]),!0),f=f+(" "+V(g[m+1]));g=V(g[2*l]).split(/\s/);f+=D(V(g[0]),!0);2===g.length&&(f+=" "+V(g[1]));this[a]=b=f}!1!==d&&(null===b||y(b)?this.$$element.removeAttr(e):oa.test(e)?this.$$element.attr(e,b):$(this.$$element[0],e,b));(a=this.$$observers)&&q(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=T()),e=d[a]||(d[a]=[]);e.push(b);u.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||y(c[a])||b(c[a])});return function(){Za(e,b)}}};var ra=b.startSymbol(),sa=b.endSymbol(),ta="{{"==ra&&"}}"==sa?Xa:function(a){return a.replace(/\{\{/g,ra).replace(/}}/g,sa)},ya=/^ngAttr[A-Z]/,Aa=/^(.+)Start$/;ba.$$addBindingInfo=m?function(a,b){var c=a.data("$binding")||[];K(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:C;ba.$$addBindingClass=m?function(a){A(a,"ng-binding")}:C;ba.$$addScopeInfo=m?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:C;ba.$$addScopeClass=m?function(a,b){A(a,b?"ng-isolate-scope":"ng-scope")}:C;ba.$$createComment=function(a,b){var c="";m&&(c=" "+(a||"")+": "+(b||"")+" ");return v.document.createComment(c)};return ba}]}function Db(a,b){this.previousValue=a;this.currentValue=b}function xa(a){return cb(a.replace(Vc,""))}function $c(a,b){var d="",c=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],h=0;h<e.length;h++)if(g==e[h])continue a;d+=(0<d.length?" ":"")+g}return d}function Yc(a){a=B(a);var b=a.length;if(1>=b)return a;for(;b--;)8===a[b].nodeType&&Zf.call(a,b,1);return a}function Uc(a,b){if(b&&F(b))return b;if(F(a)){var d=bd.exec(a);if(d)return d[3]}}function ef(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,c){Qa(b,"controller");G(b)?R(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector","$window",function(d,c){function e(a,b,c,d){if(!a||!G(a.$scope))throw O("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,h,k){var l,n,m;h=!0===h;k&&F(k)&&(m=k);if(F(f)){k=f.match(bd);if(!k)throw $f("ctrlfmt",f);n=k[1];m=m||k[3];f=a.hasOwnProperty(n)?a[n]:Bc(g.$scope,n,!0)||(b?Bc(c,n,!0):void 0);Pa(f,n,!0)}if(h)return h=(K(f)?f[f.length-1]:f).prototype,l=Object.create(h||null),m&&e(g,m,l,n||f.name),R(function(){var a=d.invoke(f,l,g,n);a!==l&&(G(a)||E(a))&&(l=a,m&&e(g,m,l,n||f.name));return l},{instance:l,identifier:m});l=d.instantiate(f,g,n);m&&e(g,m,l,n||f.name);return l}}]}function ff(){this.$get=["$window",function(a){return B(a.document)}]}function gf(){this.$get=["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function $b(a){return G(a)?fa(a)?a.toISOString():ab(a):a}function mf(){this.$get=function(){return function(a){if(!a)return"";var b=[];pc(a,function(a,c){null===a||y(a)||(K(a)?q(a,function(a){b.push(ja(c)+"="+ja($b(a)))}):b.push(ja(c)+"="+ja($b(a))))});return b.join("&")}}}function nf(){this.$get=function(){return function(a){function b(a,e,f){null===a||y(a)||(K(a)?q(a,function(a,c){b(a,e+"["+(G(a)?c:"")+"]")}):G(a)&&!fa(a)?pc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push(ja(e)+"="+ja($b(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function ac(a,b){if(F(a)){var d=a.replace(ag,"").trim();if(d){var c=b("Content-Type");(c=c&&0===c.indexOf(cd))||(c=(c=d.match(bg))&&cg[c[0]].test(d));c&&(a=uc(d))}}return a}function dd(a){var b=T(),d;F(a)?q(a.split("\n"),function(a){d=a.indexOf(":");var e=P(V(a.substr(0,d)));a=V(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):G(a)&&q(a,function(a,d){var f=P(d),g=V(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function ed(a){var b;return function(d){b||(b=dd(a));return d?(d=b[P(d)],void 0===d&&(d=null),d):b}}function fd(a,b,d,c){if(E(c))return c(a,b,d);q(c,function(c){a=c(a,b,d)});return a}function lf(){var a=this.defaults={transformResponse:[ac],transformRequest:[function(a){return G(a)&&"[object File]"!==ma.call(a)&&"[object Blob]"!==ma.call(a)&&"[object FormData]"!==ma.call(a)?ab(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ha(bc),put:ha(bc),patch:ha(bc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},b=!1;this.useApplyAsync=function(a){return x(a)?(b=!!a,this):b};var d=!0;this.useLegacyPromiseExtensions=function(a){return x(a)?(d=!!a,this):d};var c=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(e,f,g,h,k,l){function n(b){function c(a){var b=R({},a);b.data=fd(a.data,a.headers,a.status,f.transformResponse);a=a.status;return 200<=a&&300>a?b:k.reject(b)}function e(a,b){var c,d={};q(a,function(a,e){E(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}if(!G(b))throw O("$http")("badreq",b);if(!F(b.url))throw O("$http")("badreq",b.url);var f=R({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},b);f.headers=function(b){var c=a.headers,d=R({},b.headers),f,g,h,c=R({},c.common,c[P(b.method)]);a:for(f in c){g=P(f);for(h in d)if(P(h)===g)continue a;d[f]=c[f]}return e(d,ha(b))}(b);f.method=sb(f.method);f.paramSerializer=F(f.paramSerializer)?l.get(f.paramSerializer):f.paramSerializer;var g=[function(b){var d=b.headers,e=fd(b.data,ed(d),void 0,b.transformRequest);y(e)&&q(d,function(a,b){"content-type"===P(b)&&delete d[b]});y(b.withCredentials)&&!y(a.withCredentials)&&(b.withCredentials=a.withCredentials);return m(b,e).then(c,c)},void 0],h=k.when(f);for(q(M,function(a){(a.request||a.requestError)&&g.unshift(a.request,a.requestError);(a.response||a.responseError)&&g.push(a.response,a.responseError)});g.length;){b=g.shift();var n=g.shift(),h=h.then(b,n)}d?(h.success=function(a){Pa(a,"fn");h.then(function(b){a(b.data,b.status,b.headers,f)});return h},h.error=function(a){Pa(a,"fn");h.then(null,function(b){a(b.data,b.status,b.headers,f)});return h}):(h.success=gd("success"),h.error=gd("error"));return h}function m(c,d){function g(a){if(a){var c={};q(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function l(a,c,d,e){function f(){m(c,a,d,e)}L&&(200<=a&&300>a?L.put(A,[a,c,dd(d),e]):L.remove(A));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function m(a,b,d,e){b=-1<=b?b:0;(200<=b&&300>b?J.resolve:J.reject)({data:a,status:b,headers:ed(d),config:c,statusText:e})}function u(a){m(a.data,a.status,ha(a.headers()),a.statusText)}function I(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var J=k.defer(),D=J.promise,L,S,M=c.headers,A=r(c.url,c.paramSerializer(c.params));n.pendingRequests.push(c);D.then(I,I);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(L=G(c.cache)?c.cache:G(a.cache)?a.cache:N);L&&(S=L.get(A),x(S)?S&&E(S.then)?S.then(u,u):K(S)?m(S[1],S[0],ha(S[2]),S[3]):m(S,200,{},"OK"):L.put(A,D));y(S)&&((S=hd(c.url)?f()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(M[c.xsrfHeaderName||a.xsrfHeaderName]=S),e(c.method,A,d,l,M,c.timeout,c.withCredentials,c.responseType,g(c.eventHandlers),g(c.uploadEventHandlers)));return D}function r(a,b){0<b.length&&(a+=(-1==a.indexOf("?")?"?":"&")+b);return a}var N=g("$http");a.paramSerializer=F(a.paramSerializer)?l.get(a.paramSerializer):a.paramSerializer;var M=[];q(c,function(a){M.unshift(F(a)?l.get(a):l.invoke(a))});n.pendingRequests=[];(function(a){q(arguments,function(a){n[a]=function(b,c){return n(R({},c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){n[a]=function(b,c,d){return n(R({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");n.defaults=a;return n}]}function pf(){this.$get=function(){return function(){return new v.XMLHttpRequest}}}
function of(){this.$get=["$browser","$window","$document","$xhrFactory",function(a,b,d,c){return dg(a,c,a.defer,b.angular.callbacks,d[0])}]}function dg(a,b,d,c,e){function f(a,b,d){var f=e.createElement("script"),n=null;f.type="text/javascript";f.src=a;f.async=!0;n=function(a){f.removeEventListener("load",n,!1);f.removeEventListener("error",n,!1);e.body.removeChild(f);f=null;var g=-1,N="unknown";a&&("load"!==a.type||c[b].called||(a={type:"error"}),N=a.type,g="error"===a.type?404:200);d&&d(g,N)};f.addEventListener("load",n,!1);f.addEventListener("error",n,!1);e.body.appendChild(f);return n}return function(e,h,k,l,n,m,r,N,M,w){function p(){z&&z();u&&u.abort()}function H(b,c,e,f,g){x(J)&&d.cancel(J);z=u=null;b(c,e,f,g);a.$$completeOutstandingRequest(C)}a.$$incOutstandingRequestCount();h=h||a.url();if("jsonp"==P(e)){var t="_"+(c.counter++).toString(36);c[t]=function(a){c[t].data=a;c[t].called=!0};var z=f(h.replace("JSON_CALLBACK","angular.callbacks."+t),t,function(a,b){H(l,a,c[t].data,"",b);c[t]=C})}else{var u=b(e,h);u.open(e,h,!0);q(n,function(a,b){x(a)&&u.setRequestHeader(b,a)});u.onload=function(){var a=u.statusText||"",b="response"in u?u.response:u.responseText,c=1223===u.status?204:u.status;0===c&&(c=b?200:"file"==ra(h).protocol?404:0);H(l,c,b,u.getAllResponseHeaders(),a)};e=function(){H(l,-1,null,null,"")};u.onerror=e;u.onabort=e;q(M,function(a,b){u.addEventListener(b,a)});q(w,function(a,b){u.upload.addEventListener(b,a)});r&&(u.withCredentials=!0);if(N)try{u.responseType=N}catch(I){if("json"!==N)throw I;}u.send(y(k)?null:k)}if(0<m)var J=d(p,m);else m&&E(m.then)&&m.then(p)}}function jf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse","$exceptionHandler","$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(m,a).replace(r,b)}function h(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function k(f,k,m,r){function H(a){try{var b=a;a=m?e.getTrusted(m,b):e.valueOf(b);var d;if(r&&!x(a))d=a;else if(null==a)d="";else{switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=ab(a)}d=a}return d}catch(g){c(Ja.interr(f,g))}}if(!f.length||-1===f.indexOf(a)){var t;k||(k=g(f),t=da(k),t.exp=f,t.expressions=[],t.$$watchDelegate=h);return t}r=!!r;var z,u,I=0,J=[],D=[];t=f.length;for(var L=[],S=[];I<t;)if(-1!=(z=f.indexOf(a,I))&&-1!=(u=f.indexOf(b,z+l)))I!==z&&L.push(g(f.substring(I,z))),I=f.substring(z+l,u),J.push(I),D.push(d(I,H)),I=u+n,S.push(L.length),L.push("");else{I!==t&&L.push(g(f.substring(I)));break}m&&1<L.length&&Ja.throwNoconcat(f);if(!k||J.length){var q=function(a){for(var b=0,c=J.length;b<c;b++){if(r&&y(a[b]))return;L[S[b]]=a[b]}return L.join("")};return R(function(a){var b=0,d=J.length,e=Array(d);try{for(;b<d;b++)e[b]=D[b](a);return q(e)}catch(g){c(Ja.interr(f,g))}},{exp:f,expressions:J,$$watchDelegate:function(a,b){var c;return a.$watchGroup(D,function(d,e){var f=q(d);E(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,n=b.length,m=new RegExp(a.replace(/./g,f),"g"),r=new RegExp(b.replace(/./g,f),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function kf(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,d,c,e){function f(f,k,l,n){function m(){r?f.apply(null,N):f(p)}var r=4<arguments.length,N=r?za.call(arguments,4):[],q=b.setInterval,w=b.clearInterval,p=0,H=x(n)&&!n,t=(H?c:d).defer(),z=t.promise;l=x(l)?l:0;z.$$intervalId=q(function(){H?e.defer(m):a.$evalAsync(m);t.notify(p++);0<l&&p>=l&&(t.resolve(p),w(z.$$intervalId),delete g[z.$$intervalId]);H||a.$apply()},k);g[z.$$intervalId]=t;return z}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0):!1};return f}]}function cc(a){a=a.split("/");for(var b=a.length;b--;)a[b]=ob(a[b]);return a.join("/")}function id(a,b){var d=ra(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=X(d.port)||eg[d.protocol]||null}function jd(a,b){var d="/"!==a.charAt(0);d&&(a="/"+a);var c=ra(a);b.$$path=decodeURIComponent(d&&"/"===c.pathname.charAt(0)?c.pathname.substring(1):c.pathname);b.$$search=xc(c.search);b.$$hash=decodeURIComponent(c.hash);b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function na(a,b){if(0===b.indexOf(a))return b.substr(a.length)}function Ia(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function hb(a){return a.replace(/(#.+)|#$/,"$1")}function dc(a,b,d){this.$$html5=!0;d=d||"";id(a,this);this.$$parse=function(a){var d=na(b,a);if(!F(d))throw Eb("ipthprfx",a,b);jd(d,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Rb(this.$$search),d=this.$$hash?"#"+ob(this.$$hash):"";this.$$url=cc(this.$$path)+(a?"?"+a:"")+d;this.$$absUrl=b+this.$$url.substr(1)};this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;x(f=na(a,c))?(g=f,g=x(f=na(d,f))?b+(na("/",f)||f):a+g):x(f=na(b,c))?g=b+f:b==c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function ec(a,b,d){id(a,this);this.$$parse=function(c){var e=na(a,c)||na(b,c),f;y(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",y(e)&&(a=c,this.replace())):(f=na(d,e),y(f)&&(f=e));jd(f,this);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;0===f.indexOf(e)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};this.$$compose=function(){var b=Rb(this.$$search),e=this.$$hash?"#"+ob(this.$$hash):"";this.$$url=cc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?d+this.$$url:"")};this.$$parseLinkUrl=function(b,d){return Ia(a)==Ia(b)?(this.$$parse(b),!0):!1}}function kd(a,b,d){this.$$html5=!0;ec.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a==Ia(c)?f=c:(g=na(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=Rb(this.$$search),e=this.$$hash?"#"+ob(this.$$hash):"";this.$$url=cc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+d+this.$$url}}function Fb(a){return function(){return this[a]}}function ld(a,b){return function(d){if(y(d))return this[a];this[a]=b(d);this.$$compose();return this}}function qf(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return x(b)?(a=b,this):a};this.html5Mode=function(a){return Da(a)?(b.enabled=a,this):G(a)?(Da(a.enabled)&&(b.enabled=a.enabled),Da(a.requireBase)&&(b.requireBase=a.requireBase),Da(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function h(a,b,d){var e=l.url(),f=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(g){throw l.url(e),l.$$state=f,g;}}function k(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,b)}var l,n;n=c.baseHref();var m=c.url(),r;if(b.enabled){if(!n&&b.requireBase)throw Eb("nobase");r=m.substring(0,m.indexOf("/",m.indexOf("//")+2))+(n||"/");n=e.history?dc:kd}else r=Ia(m),n=ec;var N=r.substr(0,Ia(r).lastIndexOf("/")+1);l=new n(r,N,"#"+a);l.$$parseLinkUrl(m,m);l.$$state=c.state();var q=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=B(a.target);"a"!==va(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),k=e.attr("href")||e.attr("xlink:href");G(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=ra(h.animVal).href);q.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(h,k)||(a.preventDefault(),l.absUrl()!=c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});hb(l.absUrl())!=hb(m)&&c.url(l.absUrl(),!0);var w=!0;c.onUrlChange(function(a,b){y(na(N,a))?g.location.href=a:(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,f;a=hb(a);l.$$parse(a);l.$$state=b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;l.absUrl()===a&&(f?(l.$$parse(c),l.$$state=e,h(c,!1,e)):(w=!1,k(c,e)))}),d.$$phase||d.$digest())});d.$watch(function(){var a=hb(c.url()),b=hb(l.absUrl()),f=c.state(),g=l.$$replace,m=a!==b||l.$$html5&&e.history&&f!==l.$$state;if(w||m)w=!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,f).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=f):(m&&h(b,g,f===l.$$state?null:l.$$state),k(a,f)))});l.$$replace=!1});return l}]}function rf(){var a=!0,b=this;this.debugEnabled=function(b){return x(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||C;a=!1;try{a=!!e.apply}catch(k){}return a?function(){var a=[];q(arguments,function(b){a.push(c(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Ta(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw ca("isecfld",b);return a}function fg(a){return a+""}function sa(a,b){if(a){if(a.constructor===a)throw ca("isecfn",b);if(a.window===a)throw ca("isecwindow",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw ca("isecdom",b);if(a===Object)throw ca("isecobj",b);}return a}function md(a,b){if(a){if(a.constructor===a)throw ca("isecfn",b);if(a===gg||a===hg||a===ig)throw ca("isecff",b);}}function Gb(a,b){if(a&&(a===(0).constructor||a===(!1).constructor||a==="".constructor||a==={}.constructor||a===[].constructor||a===Function.constructor))throw ca("isecaf",b);}function jg(a,b){return"undefined"!==typeof a?a:b}function nd(a,b){return"undefined"===typeof a?b:"undefined"===typeof b?a:a+b}function aa(a,b){var d,c;switch(a.type){case s.Program:d=!0;q(a.body,function(a){aa(a.expression,b);d=d&&a.expression.constant});a.constant=d;break;case s.Literal:a.constant=!0;a.toWatch=[];break;case s.UnaryExpression:aa(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case s.BinaryExpression:aa(a.left,b);aa(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case s.LogicalExpression:aa(a.left,b);aa(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case s.ConditionalExpression:aa(a.test,b);aa(a.alternate,b);aa(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case s.Identifier:a.constant=!1;a.toWatch=[a];break;case s.MemberExpression:aa(a.object,b);a.computed&&aa(a.property,b);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=[a];break;case s.CallExpression:d=a.filter?!b(a.callee.name).$stateful:!1;c=[];q(a.arguments,function(a){aa(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=a.filter&&!b(a.callee.name).$stateful?c:[a];break;case s.AssignmentExpression:aa(a.left,b);aa(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case s.ArrayExpression:d=!0;c=[];q(a.elements,function(a){aa(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=c;break;case s.ObjectExpression:d=!0;c=[];q(a.properties,function(a){aa(a.value,b);d=d&&a.value.constant;a.value.constant||c.push.apply(c,a.value.toWatch)});a.constant=d;a.toWatch=c;break;case s.ThisExpression:a.constant=!1;a.toWatch=[];break;case s.LocalsExpression:a.constant=!1,a.toWatch=[]}}function od(a){if(1==a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function pd(a){return a.type===s.Identifier||a.type===s.MemberExpression}function qd(a){if(1===a.body.length&&pd(a.body[0].expression))return{type:s.AssignmentExpression,left:a.body[0].expression,right:{type:s.NGValueParameter},operator:"="}}function rd(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===s.Literal||a.body[0].expression.type===s.ArrayExpression||a.body[0].expression.type===s.ObjectExpression)}function sd(a,b){this.astBuilder=a;this.$filter=b}function td(a,b){this.astBuilder=a;this.$filter=b}function Hb(a){return"constructor"==a}function fc(a){return E(a.valueOf)?a.valueOf():kg.call(a)}function sf(){var a=T(),b=T(),d={"true":!0,"false":!1,"null":null,undefined:void 0},c,e;this.addLiteral=function(a,b){d[a]=b};this.setIdentifierFns=function(a,b){c=a;e=b;return this};this.$get=["$filter",function(f){function g(c,d,e){var g,k,D;e=e||H;switch(typeof c){case"string":D=c=c.trim();var q=e?b:a;g=q[D];if(!g){":"===c.charAt(0)&&":"===c.charAt(1)&&(k=!0,c=c.substring(2));g=e?p:w;var S=new gc(g);g=(new hc(S,f,g)).parse(c);g.constant?g.$$watchDelegate=r:k?g.$$watchDelegate=g.literal?m:n:g.inputs&&(g.$$watchDelegate=l);e&&(g=h(g));q[D]=g}return N(g,d);case"function":return N(c,d);default:return N(C,d)}}function h(a){function b(c,d,e,f){var g=H;H=!0;try{return a(c,d,e,f)}finally{H=g}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate;b.assign=h(a.assign);b.constant=a.constant;b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=h(a.inputs[c]);b.inputs=a.inputs;return b}function k(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=fc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function l(a,b,c,d,e){var f=d.inputs,g;if(1===f.length){var h=k,f=f[0];return a.$watch(function(a){var b=f(a);k(b,h)||(g=d(a,void 0,void 0,[b]),h=b&&fc(b));return g},b,c,e)}for(var l=[],m=[],n=0,r=f.length;n<r;n++)l[n]=k,m[n]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var h=f[c](a);if(b||(b=!k(h,l[c])))m[c]=h,l[c]=h&&fc(h)}b&&(g=d(a,void 0,void 0,m));return g},b,c,e)}function n(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;E(b)&&b.apply(this,arguments);x(a)&&d.$$postDigest(function(){x(f)&&e()})},c)}function m(a,b,c,d){function e(a){var b=!0;q(a,function(a){x(a)||(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a;E(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function r(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function N(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,c=c!==m&&c!==n?function(c,e,f,g){f=d&&g?g[0]:a(c,e,f,g);return b(f,c,e)}:function(c,d,e,f){e=a(c,d,e,f);c=b(e,c,d);return x(e)?c:e};a.$$watchDelegate&&a.$$watchDelegate!==l?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=l,d=!a.inputs,c.inputs=a.inputs?a.inputs:[a]);return c}var M=Ea().noUnsafeEval,w={csp:M,expensiveChecks:!1,literals:qa(d),isIdentifierStart:E(c)&&c,isIdentifierContinue:E(e)&&e},p={csp:M,expensiveChecks:!0,literals:qa(d),isIdentifierStart:E(c)&&c,isIdentifierContinue:E(e)&&e},H=!1;g.$$runningExpensiveChecks=function(){return H};return g}]}function uf(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return ud(function(b){a.$evalAsync(b)},b)}]}function vf(){this.$get=["$browser","$exceptionHandler",function(a,b){return ud(function(b){a.defer(b)},b)}]}function ud(a,b){function d(){this.$$state={status:0}}function c(a,b){return function(c){b.call(a,c)}}function e(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,a(function(){var a,d,e;e=c.pending;c.processScheduled=!1;c.pending=void 0;for(var f=0,g=e.length;f<g;++f){d=e[f][0];a=e[f][c.status];try{E(a)?d.resolve(a(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),b(h)}}}))}function f(){this.promise=new d}var g=O("$q",TypeError);R(d.prototype,{then:function(a,b,c){if(y(a)&&y(b)&&y(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&e(this.$$state);return d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return k(b,!0,a)},function(b){return k(b,!1,a)},b)}});R(f.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(g("qcycle",a)):this.$$resolve(a))},$$resolve:function(a){function d(a){k||(k=!0,h.$$resolve(a))}function f(a){k||(k=!0,h.$$reject(a))}var g,h=this,k=!1;try{if(G(a)||E(a))g=a&&a.then;E(g)?(this.promise.$$state.status=-1,g.call(a,d,f,c(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,e(this.promise.$$state))}catch(l){f(l),b(l)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;e(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;f<g;f++){e=d[f][0];a=d[f][3];try{e.notify(E(a)?a(c):c)}catch(h){b(h)}}})}});var h=function(a,b){var c=new f;b?c.resolve(a):c.reject(a);return c.promise},k=function(a,b,c){var d=null;try{E(c)&&(d=c())}catch(e){return h(e,!1)}return d&&E(d.then)?d.then(function(){return h(a,b)},function(a){return h(a,!1)}):h(a,b)},l=function(a,b,c,d){var e=new f;e.resolve(a);return e.promise.then(b,c,d)},n=function(a){if(!E(a))throw g("norslvr",a);var b=new f;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};n.prototype=d.prototype;n.defer=function(){var a=new f;a.resolve=c(a,a.resolve);a.reject=c(a,a.reject);a.notify=c(a,a.notify);return a};n.reject=function(a){var b=new f;b.reject(a);return b.promise};n.when=l;n.resolve=l;n.all=function(a){var b=new f,c=0,d=K(a)?[]:{};q(a,function(a,e){c++;l(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise};return n}function Ef(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function tf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++nb;this.$$ChildScope=null}b.prototype=a;return b}var b=10,d=O("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$exceptionHandler","$parse","$browser",function(f,g,h){function k(a){a.currentScope.$$destroyed=!0}function l(a){9===Ca&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function n(){this.$id=++nb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function m(a){if(H.$$phase)throw d("inprog",H.$$phase);H.$$phase=a}function r(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function N(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function s(){}function w(){for(;u.length;)try{u.shift()()}catch(a){f(a)}e=null}function p(){null===e&&(e=h.defer(function(){H.$apply(w)}))}n.prototype={constructor:n,$new:function(b,c){var d;c=c||this;b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!=this)&&d.$on("$destroy",k);return d},$watch:function(a,b,d,e){var f=g(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:s,get:f,exp:e||a,eq:!!d};c=null;E(b)||(l.fn=C);k||(k=h.$$watchers=[]);k.unshift(l);r(this,1);return function(){0<=Za(k,l)&&r(h,-1);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});q(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!y(e)){if(G(e))if(ya(e))for(f!==m&&(f=m,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==r&&(f=r={},t=0,l++);a=0;for(b in e)ua.call(e,b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)ua.call(e,b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,n=g(a,c),m=[],r={},p=!0,t=0;return this.$watch(n,function(){p?(p=!1,b(e,e,d)):b(e,h,d);if(k)if(G(e))if(ya(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ua.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,k,l,n,r,p,q,N=b,u,x=[],y,v;m("$digest");h.$$checkUrlChange();this===H&&null!==e&&(h.defer.cancel(e),w());c=null;do{q=!1;for(u=this;t.length;){try{v=t.shift(),v.scope.$eval(v.expression,v.locals)}catch(C){f(C)}c=null}a:do{if(r=u.$$watchers)for(p=r.length;p--;)try{if(a=r[p])if(n=a.get,(g=n(u))!==(k=a.last)&&!(a.eq?pa(g,k):"number"===typeof g&&"number"===typeof k&&isNaN(g)&&isNaN(k)))q=!0,c=a,a.last=a.eq?qa(g,null):g,l=a.fn,l(g,k===s?g:k,u),5>N&&(y=4-N,x[y]||(x[y]=[]),x[y].push({msg:E(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:k}));else if(a===c){q=!1;break a}}catch(F){f(F)}if(!(r=u.$$watchersCount&&u.$$childHead||u!==this&&u.$$nextSibling))for(;u!==this&&!(r=u.$$nextSibling);)u=u.$parent}while(u=r);if((q||t.length)&&!N--)throw H.$$phase=null,d("infdig",b,x);}while(q||t.length);for(H.$$phase=null;z.length;)try{z.shift()()}catch(B){f(B)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===H&&h.$$applicationDestroyed();r(this,-this.$$watchersCount);for(var b in this.$$listenerCount)N(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=C;this.$on=this.$watch=this.$watchGroup=function(){return C};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){H.$$phase||t.length||h.defer(function(){t.length&&H.$digest()});t.push({scope:this,expression:g(a),locals:b})},$$postDigest:function(a){z.push(a)},$apply:function(a){try{m("$apply");try{return this.$eval(a)}finally{H.$$phase=null}}catch(b){f(b)}finally{try{H.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&u.push(b);a=g(a);p()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,N(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=$a([h],arguments,1),l,n;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(n=d.length;l<n;l++)if(d[l])try{d[l].apply(null,k)}catch(m){f(m)}else d.splice(l,1),l--,n--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=$a([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var H=new n,t=H.$$asyncQueue=[],z=H.$$postDigestQueue=[],u=H.$$applyAsyncQueue=[];return H}]}function me(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return x(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return x(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f;f=ra(d).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function lg(a){if("self"===a)return a;if(F(a)){if(-1<a.indexOf("***"))throw ta("iwcard",a);a=vd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+a+"$")}if(Wa(a))return new RegExp("^"+a.source+"$");throw ta("imatcher");}function wd(a){var b=[];x(a)&&q(a,function(a){b.push(lg(a))});return b}function xf(){this.SCE_CONTEXTS=oa;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=wd(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=wd(a));return b};this.$get=["$injector",function(d){function c(a,b){return"self"===a?hd(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw ta("unsafe");};d.has("$sanitize")&&(f=d.get("$sanitize"));var g=e(),h={};h[oa.HTML]=e(g);h[oa.CSS]=e(g);h[oa.URL]=e(g);h[oa.JS]=e(g);h[oa.RESOURCE_URL]=e(h[oa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw ta("icontext",a,b);if(null===b||y(b)||""===b)return b;if("string"!==typeof b)throw ta("itype",a);return new c(b)},getTrusted:function(d,e){if(null===e||y(e)||""===e)return e;var g=h.hasOwnProperty(d)?h[d]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(d===oa.RESOURCE_URL){var g=ra(e.toString()),m,r,q=!1;m=0;for(r=a.length;m<r;m++)if(c(a[m],g)){q=!0;break}if(q)for(m=0,r=b.length;m<r;m++)if(c(b[m],g)){q=!1;break}if(q)return e;throw ta("insecurl",e.toString());}if(d===oa.HTML)return f(e);throw ta("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a}}}]}function wf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>Ca)throw ta("iequirks");var c=ha(oa);c.isEnabled=function(){return a};c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=Xa);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;q(oa,function(a,b){var d=P(b);c[cb("parse_as_"+d)]=function(b){return e(a,b)};c[cb("get_trusted_"+d)]=function(b){return f(a,b)};c[cb("trust_as_"+d)]=function(b){return g(a,b)}});return c}]}function yf(){this.$get=["$window","$document",function(a,b){var d={},c=!(a.chrome&&a.chrome.app&&a.chrome.app.runtime)&&a.history&&a.history.pushState,e=X((/android (\d+)/.exec(P((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h,k=/^(Moz|webkit|ms)(?=[A-Z])/,l=g.body&&g.body.style,n=!1,m=!1;if(l){for(var r in l)if(n=k.exec(r)){h=n[0];h=h.substr(0,1).toUpperCase()+h.substr(1);break}h||(h="WebkitOpacity"in l&&"webkit");n=!!("transition"in l||h+"Transition"in l);m=!!("animation"in l||h+"Animation"in l);!e||n&&m||(n=F(l.webkitTransition),m=F(l.webkitAnimation))}return{history:!(!c||4>e||f),hasEvent:function(a){if("input"===a&&11>=Ca)return!1;if(y(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:Ea(),vendorPrefix:h,transitions:n,animations:m,android:e}}]}function Af(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$templateCache","$http","$q","$sce",function(b,d,c,e){function f(g,h){f.totalPendingRequests++;F(g)&&b.get(g)||(g=e.getTrustedResourceUrl(g));var k=d.defaults&&d.defaults.transformResponse;K(k)?k=k.filter(function(a){return a!==ac}):k===ac&&(k=null);return d.get(g,R({cache:b,transformResponse:k},a))["finally"](function(){f.totalPendingRequests--}).then(function(a){b.put(g,a.data);return a.data},function(a){if(!h)throw mg("tpload",g,a.status,a.statusText);return c.reject(a)})}f.totalPendingRequests=0;return f}]}function Bf(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];q(a,function(a){var c=ea.element(a).data("$binding");c&&q(c,function(c){d?(new RegExp("(^|\\s)"+
vd(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!=c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var k=a.querySelectorAll("["+g[h]+"model"+(d?"=":"*=")+'"'+b+'"]');if(k.length)return k}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Cf(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,k,l){E(f)||(l=k,k=f,f=C);var n=za.call(arguments,3),m=x(l)&&!l,r=(m?c:d).defer(),q=r.promise,s;s=b.defer(function(){try{r.resolve(f.apply(null,n))}catch(b){r.reject(b),e(b)}finally{delete g[q.$$timeoutId]}m||a.$apply()},k);q.$$timeoutId=s;g[s]=r;return q}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function ra(a){Ca&&(Y.setAttribute("href",a),a=Y.href);Y.setAttribute("href",a);return{href:Y.href,protocol:Y.protocol?Y.protocol.replace(/:$/,""):"",host:Y.host,search:Y.search?Y.search.replace(/^\?/,""):"",hash:Y.hash?Y.hash.replace(/^#/,""):"",hostname:Y.hostname,port:Y.port,pathname:"/"===Y.pathname.charAt(0)?Y.pathname:"/"+Y.pathname}}function hd(a){a=F(a)?ra(a):a;return a.protocol===xd.protocol&&a.host===xd.host}function Df(){this.$get=da(v)}function yd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e="";return function(){var a,g,h,k,l;a=d.cookie||"";if(a!==e)for(e=a,a=e.split("; "),c={},h=0;h<a.length;h++)g=a[h],k=g.indexOf("="),0<k&&(l=b(g.substring(0,k)),y(c[l])&&(c[l]=b(g.substring(k+1))));return c}}function Hf(){this.$get=yd}function Jc(a){function b(d,c){if(G(d)){var e={};q(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",zd);b("date",Ad);b("filter",ng);b("json",og);b("limitTo",pg);b("lowercase",qg);b("number",Bd);b("orderBy",Cd);b("uppercase",rg)}function ng(){return function(a,b,d){if(!ya(a)){if(null==a)return a;throw O("filter")("notarray",a);}var c;switch(ic(b)){case"function":break;case"boolean":case"null":case"number":case"string":c=!0;case"object":b=sg(b,d,c);break;default:return a}return Array.prototype.filter.call(a,b)}}function sg(a,b,d){var c=G(a)&&"$"in a;!0===b?b=pa:E(b)||(b=function(a,b){if(y(a))return!1;if(null===a||null===b)return a===b;if(G(b)||G(a)&&!rc(a))return!1;a=P(""+a);b=P(""+b);return-1!==a.indexOf(b)});return function(e){return c&&!G(e)?Ka(e,a.$,b,!1):Ka(e,a,b,d)}}function Ka(a,b,d,c,e){var f=ic(a),g=ic(b);if("string"===g&&"!"===b.charAt(0))return!Ka(a,b.substring(1),d,c);if(K(a))return a.some(function(a){return Ka(a,b,d,c)});switch(f){case"object":var h;if(c){for(h in a)if("$"!==h.charAt(0)&&Ka(a[h],b,d,!0))return!0;return e?!1:Ka(a,b,d,!1)}if("object"===g){for(h in b)if(e=b[h],!E(e)&&!y(e)&&(f="$"===h,!Ka(f?a:a[h],e,d,f,f)))return!1;return!0}return d(a,b);case"function":return!1;default:return d(a,b)}}function ic(a){return null===a?"null":typeof a}function zd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){y(c)&&(c=b.CURRENCY_SYM);y(e)&&(e=b.PATTERNS[1].maxFrac);return null==a?a:Dd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(/\u00A4/g,c)}}function Bd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Dd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function tg(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Ed))&&(a=a.replace(Ed,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)==jc;e++);if(e==(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)==jc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Fd&&(d=d.splice(0,Fd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function ug(a,b,d,c){var e=a.d,f=e.length-a.i;b=y(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Dd(a,b,d,c,e){if(!F(a)&&!Q(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k="\u221e";else{g=tg(h);ug(g,e,b.minFrac,b.maxFrac);k=g.d;h=g.i;e=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h):(f=k,k=[0]);h=[];for(k.length>=b.lgSize&&h.unshift(k.splice(-b.lgSize).join(""));k.length>b.gSize;)h.unshift(k.splice(-b.gSize).join(""));k.length&&h.unshift(k.join(""));k=h.join(d);f.length&&(k+=c+f.join(""));e&&(k+="e+"+e)}return 0>a&&!g?b.negPre+k+b.negSuf:b.posPre+k+b.posSuf}function Ib(a,b,d,c){var e="";if(0>a||c&&0>=a)c?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=jc+a;d&&(a=a.substr(a.length-b));return e+a}function W(a,b,d,c,e){d=d||0;return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12==d&&(f=12);return Ib(f,b,c,e)}}function ib(a,b,d){return function(c,e){var f=c["get"+a](),g=sb((d?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Gd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Hd(a){return function(b){var d=Gd(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Ib(b,a)}}function kc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Ad(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,k=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=X(b[9]+b[10]),g=X(b[9]+b[11]));h.call(a,X(b[1]),X(b[2])-1,X(b[3]));f=X(b[4]||0)-f;g=X(b[5]||0)-g;h=X(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));k.call(a,f,g,h,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;F(c)&&(c=vg.test(c)?X(c):b(c));Q(c)&&(c=new Date(c));if(!fa(c)||!isFinite(c.getTime()))return c;for(;d;)(l=wg.exec(d))?(h=$a(h,l,1),d=h.pop()):(h.push(d),d=null);var n=c.getTimezoneOffset();f&&(n=vc(f,n),c=Qb(c,f,!0));q(h,function(b){k=xg[b];g+=k?k(c,a.DATETIME_FORMATS,n):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function og(){return function(a,b){y(b)&&(b=2);return ab(a,b)}}function pg(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):X(b);if(isNaN(b))return a;Q(a)&&(a=a.toString());if(!K(a)&&!F(a))return a;d=!d||isNaN(d)?0:X(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?a.slice(d,d+b):0===d?a.slice(b,a.length):a.slice(Math.max(0,d+b),d)}}function Cd(a){function b(b,d){d=d?-1:1;return b.map(function(b){var c=1,h=Xa;if(E(b))h=b;else if(F(b)){if("+"==b.charAt(0)||"-"==b.charAt(0))c="-"==b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(h=a(b),h.constant))var k=h(),h=function(a){return a[k]}}return{get:h,descending:c*d}})}function d(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}return function(a,e,f){if(null==a)return a;if(!ya(a))throw O("orderBy")("notarray",a);K(e)||(e=[e]);0===e.length&&(e=["+"]);var g=b(e,f);g.push({get:function(){return{}},descending:f?-1:1});a=Array.prototype.map.call(a,function(a,b){return{value:a,predicateValues:g.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("string"===c)e=e.toLowerCase();else if("object"===c)a:{if("function"===typeof e.valueOf&&(e=e.valueOf(),d(e)))break a;if(rc(e)&&(e=e.toString(),d(e)))break a;e=b}return{value:e,type:c}})}});a.sort(function(a,b){for(var c=0,d=0,e=g.length;d<e;++d){var c=a.predicateValues[d],f=b.predicateValues[d],q=0;c.type===f.type?c.value!==f.value&&(q=c.value<f.value?-1:1):q=c.type<f.type?-1:1;if(c=q*g[d].descending)break}return c});return a=a.map(function(a){return a.value})}}function La(a){E(a)&&(a={link:a});a.restrict=a.restrict||"AC";return da(a)}function Id(a,b,d,c,e){var f=this,g=[];f.$error={};f.$$success={};f.$pending=void 0;f.$name=e(b.name||b.ngForm||"")(d);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;f.$$parentForm=Jb;f.$rollbackViewValue=function(){q(g,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){q(g,function(a){a.$commitViewValue()})};f.$addControl=function(a){Qa(a.$name,"input");g.push(a);a.$name&&(f[a.$name]=a);a.$$parentForm=f};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=a;a.$name=b};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];q(f.$pending,function(b,c){f.$setValidity(c,null,a)});q(f.$error,function(b,c){f.$setValidity(c,null,a)});q(f.$$success,function(b,c){f.$setValidity(c,null,a)});Za(g,a);a.$$parentForm=Jb};Jd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(Za(d,c),0===d.length&&delete a[b])},$animate:c});f.$setDirty=function(){c.removeClass(a,Ua);c.addClass(a,Kb);f.$dirty=!0;f.$pristine=!1;f.$$parentForm.$setDirty()};f.$setPristine=function(){c.setClass(a,Ua,Kb+" ng-submitted");f.$dirty=!1;f.$pristine=!0;f.$submitted=!1;q(g,function(a){a.$setPristine()})};f.$setUntouched=function(){q(g,function(a){a.$setUntouched()})};f.$setSubmitted=function(){c.addClass(a,"ng-submitted");f.$submitted=!0;f.$$parentForm.$setSubmitted()}}function lc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function jb(a,b,d,c,e,f){var g=P(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0});b.on("compositionend",function(){h=!1;l()})}var k,l=function(a){k&&(f.defer.cancel(k),k=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&"false"===d.ngTrim||(e=V(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var n=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||n(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",n)}b.on("change",l);if(Kd[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!k){var b=this.validity,c=b.badInput,d=b.typeMismatch;k=f.defer(function(){k=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Lb(a,b){return function(d,c){var e,f;if(fa(d))return d;if(F(d)){'"'==d.charAt(0)&&'"'==d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(yg.test(d))return new Date(d);a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},q(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function kb(a,b,d,c){return function(e,f,g,h,k,l,n){function m(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function r(a){return x(a)&&!fa(a)?d(a)||void 0:a}Ld(e,f,g,h);jb(e,f,g,h,k,l);var q=h&&h.$options&&h.$options.timezone,s;h.$$parserName=a;h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a))return a=d(a,s),q&&(a=Qb(a,q)),a});h.$formatters.push(function(a){if(a&&!fa(a))throw lb("datefmt",a);if(m(a))return(s=a)&&q&&(s=Qb(s,q,!0)),n("date")(a,c,q);s=null;return""});if(x(g.min)||g.ngMin){var w;h.$validators.min=function(a){return!m(a)||y(w)||d(a)>=w};g.$observe("min",function(a){w=r(a);h.$validate()})}if(x(g.max)||g.ngMax){var p;h.$validators.max=function(a){return!m(a)||y(p)||d(a)<=p};g.$observe("max",function(a){p=r(a);h.$validate()})}}}function Ld(a,b,d,c){(c.$$hasNativeValidators=G(b[0].validity))&&c.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function Md(a,b,d,c,e){if(x(c)){a=a(c);if(!a.constant)throw lb("constexpr",d,c);return a(b)}return e}function mc(a,b){a="ngClass"+a;return["$animate",function(d){function c(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],n=0;n<b.length;n++)if(e==b[n])continue a;c.push(e)}return c}function e(a){var b=[];return K(a)?(q(a,function(a){b=b.concat(e(a))}),b):F(a)?a.split(" "):G(a)?(q(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(f,g,h){function k(a){a=l(a,1);h.$addClass(a)}function l(a,b){var c=g.data("$classCounts")||T(),d=[];q(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}function n(a,b){var e=c(b,a),f=c(a,b),e=l(e,1),f=l(f,-1);e&&e.length&&d.addClass(g,e);f&&f.length&&d.removeClass(g,f)}function m(a){if(!0===b||f.$index%2===b){var c=e(a||[]);if(!r)k(c);else if(!pa(a,r)){var d=e(r);n(d,c)}}r=K(a)?a.map(function(a){return ha(a)}):ha(a)}var r;f.$watch(h[a],m,!0);h.$observe("class",function(b){m(f.$eval(h[a]))});"ngClass"!==a&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var m=e(f.$eval(h[a]));g===b?k(m):(g=l(m,-1),h.$removeClass(g))}})}}}]}
function Jd(a){function b(a,b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function d(a,c){a=a?"-"+zc(a,"-"):"";b(mb+a,!0===c);b(Nd+a,!1===c)}var c=a.ctrl,e=a.$element,f={},g=a.set,h=a.unset,k=a.$animate;f[Nd]=!(f[mb]=e.hasClass(mb));c.$setValidity=function(a,e,f){y(e)?(c.$pending||(c.$pending={}),g(c.$pending,a,f)):(c.$pending&&h(c.$pending,a,f),Od(c.$pending)&&(c.$pending=void 0));Da(e)?e?(h(c.$error,a,f),g(c.$$success,a,f)):(g(c.$error,a,f),h(c.$$success,a,f)):(h(c.$error,a,f),h(c.$$success,a,f));c.$pending?(b(Pd,!0),c.$valid=c.$invalid=void 0,d("",null)):(b(Pd,!1),c.$valid=Od(c.$error),c.$invalid=!c.$valid,d("",c.$valid));e=c.$pending&&c.$pending[a]?void 0:c.$error[a]?!1:c.$$success[a]?!0:null;d(a,e);c.$$parentForm.$setValidity(a,e,c)}}function Od(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var zg=/^\/(.+)\/([a-z]*)$/,ua=Object.prototype.hasOwnProperty,P=function(a){return F(a)?a.toLowerCase():a},sb=function(a){return F(a)?a.toUpperCase():a},Ca,B,Z,za=[].slice,Zf=[].splice,Ag=[].push,ma=Object.prototype.toString,sc=Object.getPrototypeOf,Aa=O("ng"),ea=v.angular||(v.angular={}),Sb,nb=0;Ca=v.document.documentMode;C.$inject=[];Xa.$inject=[];var K=Array.isArray,$d=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,V=function(a){return F(a)?a.trim():a},vd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ea=function(){if(!x(Ea.rules)){var a=v.document.querySelector("[ng-csp]")||v.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ea.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ea;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ea.rules},pb=function(){if(x(pb.name_))return pb.name_;var a,b,d=Na.length,c,e;for(b=0;b<d;++b)if(c=Na[b],a=v.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return pb.name_=e},ce=/:/g,Na=["ng-","data-ng-","ng:","x-ng-"],he=/[A-Z]/g,Ac=!1,Ma=3,le={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};U.expando="ng339";var eb=U.cache={},Nf=1;U._data=function(a){return this.cache[a[this.expando]]||{}};var If=/([\:\-\_]+(.))/g,Jf=/^moz([A-Z])/,wb={mouseleave:"mouseout",mouseenter:"mouseover"},Ub=O("jqLite"),Mf=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Tb=/<|&#?\w+;/,Kf=/<([\w:-]+)/,Lf=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ia={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option;ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead;ia.th=ia.td;var Sf=v.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Oa=U.prototype={ready:function(a){function b(){d||(d=!0,a())}var d=!1;"complete"===v.document.readyState?v.setTimeout(b):(this.on("DOMContentLoaded",b),U(v).on("load",b))},toString:function(){var a=[];q(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?B(this[a]):B(this[this.length+a])},length:0,push:Ag,sort:[].sort,splice:[].splice},Cb={};q("multiple selected checked disabled readOnly required open".split(" "),function(a){Cb[P(a)]=a});var Sc={};q("input select option textarea button form details".split(" "),function(a){Sc[a]=!0});var ad={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};q({data:Wb,removeData:db,hasData:function(a){for(var b in eb[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)db(a[b])}},function(a,b){U[b]=a});q({data:Wb,inheritedData:Ab,scope:function(a){return B.data(a,"$scope")||Ab(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return B.data(a,"$isolateScope")||B.data(a,"$isolateScopeNoTemplate")},controller:Pc,injector:function(a){return Ab(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:xb,css:function(a,b,d){b=cb(b);if(x(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Ma&&2!==c&&8!==c)if(c=P(b),Cb[c])if(x(d))d?(a[b]=!0,a.setAttribute(b,c)):(a[b]=!1,a.removeAttribute(c));else return a[b]||(a.attributes.getNamedItem(b)||C).specified?c:void 0;else if(x(d))a.setAttribute(b,d);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?void 0:a},prop:function(a,b,d){if(x(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(y(d)){var c=a.nodeType;return 1===c||c===Ma?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(y(b)){if(a.multiple&&"select"===va(a)){var d=[];q(a.options,function(a){a.selected&&d.push(a.value||a.text)});return 0===d.length?null:d}return a.value}a.value=b},html:function(a,b){if(y(b))return a.innerHTML;ub(a,!0);a.innerHTML=b},empty:Qc},function(a,b){U.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==Qc&&y(2==a.length&&a!==xb&&a!==Pc?b:c)){if(G(b)){for(e=0;e<g;e++)if(a===Wb)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=a.$dv;g=y(e)?Math.min(g,1):g;for(f=0;f<g;f++){var h=a(this[f],b,c);e=e?e+h:h}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});q({removeData:db,on:function(a,b,d,c){if(x(c))throw Ub("onargs");if(Kc(a)){c=vb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=Pf(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,h=function(b,c,g){var h=e[b];h||(h=e[b]=[],h.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f,!1));h.push(d)};g--;)b=c[g],wb[b]?(h(wb[b],Rf),h(b,void 0,!0)):h(b)}},off:Oc,one:function(a,b,d){a=B(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;ub(a);q(new U(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];q(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new U(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;q(new U(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){Mc(a,B(b).eq(0).clone()[0])},remove:Bb,detach:function(a){Bb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;b=new U(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}},addClass:zb,removeClass:yb,toggleClass:function(a,b,d){b&&q(b.split(" "),function(b){var e=d;y(e)&&(e=!xb(a,b));(e?zb:yb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Vb,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=vb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:C,type:f,target:a},b.type&&(c=R(c,b)),b=ha(g),e=d?[c].concat(d):[c],q(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){U.prototype[b]=function(b,c,e){for(var f,g=0,h=this.length;g<h;g++)y(f)?(f=a(this[g],b,c,e),x(f)&&(f=B(f))):Nc(f,a(this[g],b,c,e));return x(f)?f:this};U.prototype.bind=U.prototype.on;U.prototype.unbind=U.prototype.off});Ra.prototype={put:function(a,b){this[Fa(a,this.nextUid)]=b},get:function(a){return this[Fa(a,this.nextUid)]},remove:function(a){var b=this[a=Fa(a,this.nextUid)];delete this[a];return b}};var Gf=[function(){this.$get=[function(){return Ra}]}],Uf=/^([^\(]+?)=>/,Vf=/^[^\(]*\(\s*([^\)]*)\)/m,Bg=/,/,Cg=/^\s*(_?)(\S+?)\1\s*$/,Tf=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ga=O("$injector");bb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw F(d)&&d||(d=a.name||Wf(a)),Ga("strictdi",d);b=Tc(a);q(b[1].split(Bg),function(a){a.replace(Cg,function(a,b,d){c.push(d)})})}a.$inject=c}}else K(a)?(b=a.length-1,Pa(a[b],"fn"),c=a.slice(0,b)):Pa(a,"fn",!0);return c};var Qd=O("$animate"),Ze=function(){this.$get=C},$e=function(){var a=new Ra,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=F(b)?b.split(" "):K(b)?b:[],q(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){q(b,function(b){var c=a.get(b);if(c){var d=Xf(b.attr("class")),e="",f="";q(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});q(b,function(a){e&&zb(a,e);f&&yb(a,f)});a.remove(b)}});b.length=0}return{enabled:C,on:C,off:C,pin:C,push:function(g,h,k,l){l&&l();k=k||{};k.from&&g.css(k.from);k.to&&g.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(g)||{},h=e(k,h,!0),l=e(k,l,!1),h||l)a.put(g,k),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},Xe=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null);this.register=function(d,c){if(d&&"."!==d.charAt(0))throw Qd("notcsel",d);var e=d+"-animation";b.$$registeredAnimations[d.substr(1)]=e;a.factory(e,c)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Qd("nongcls","ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var h;a:{for(h=0;h<d.length;h++){var k=d[h];if(1===k.nodeType){h=k;break a}}h=void 0}!h||h.parentNode||h.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(e,f,g,h){f=f&&B(f);g=g&&B(g);f=f||g.parent();b(e,f,g);return a.push(e,"enter",Ha(h))},move:function(e,f,g,h){f=f&&B(f);g=g&&B(g);f=f||g.parent();b(e,f,g);return a.push(e,"move",Ha(h))},leave:function(b,c){return a.push(b,"leave",Ha(c),function(){b.remove()})},addClass:function(b,c,g){g=Ha(g);g.addClass=fb(g.addclass,c);return a.push(b,"addClass",g)},removeClass:function(b,c,g){g=Ha(g);g.removeClass=fb(g.removeClass,c);return a.push(b,"removeClass",g)},setClass:function(b,c,g,h){h=Ha(h);h.addClass=fb(h.addClass,c);h.removeClass=fb(h.removeClass,g);return a.push(b,"setClass",h)},animate:function(b,c,g,h,k){k=Ha(k);k.from=k.from?R(k.from,c):c;k.to=k.to?R(k.to,g):g;k.tempClasses=fb(k.tempClasses,h||"ng-inline-animate");return a.push(b,"animate",k)}}}]}],bf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},af=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){var d=c[0];d&&d.hidden?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;q(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:C,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(q(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},Ye=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);h||k.complete();h=!0});return k}var g=e||{};g.$$prepared||(g=qa(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var h,k=new d;return{start:f,end:f}}}]},ga=O("$compile"),Zb=new function(){};Cc.$inject=["$provide","$$sanitizeUriProvider"];Db.prototype.isFirstChange=function(){return this.previousValue===Zb};var Vc=/^((?:x|data)[\:\-_])/i,$f=O("$controller"),bd=/^(\S+)(\s+as\s+([\w$]+))?$/,hf=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof B&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},cd="application/json",bc={"Content-Type":cd+";charset=utf-8"},bg=/^\[|^\{(?!\{)/,cg={"[":/]$/,"{":/}$/},ag=/^\)\]\}',?\n/,Dg=O("$http"),gd=function(a){return function(){throw Dg("legacy",a);}},Ja=ea.$interpolateMinErr=O("$interpolate");Ja.throwNoconcat=function(a){throw Ja("noconcat",a);};Ja.interr=function(a,b){return Ja("interr",a,b.toString())};var Eg=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,eg={http:80,https:443,ftp:21},Eb=O("$location"),Fg={$$html5:!1,$$replace:!1,absUrl:Fb("$$absUrl"),url:function(a){if(y(a))return this.$$url;var b=Eg.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Fb("$$protocol"),host:Fb("$$host"),port:Fb("$$port"),path:ld("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(F(a)||Q(a))a=a.toString(),this.$$search=xc(a);else if(G(a))a=qa(a,{}),q(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw Eb("isrcharg");break;default:y(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:ld("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};q([kd,ec,dc],function(a){a.prototype=Object.create(Fg);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==dc||!this.$$html5)throw Eb("nostate");this.$$state=y(b)?null:b;return this}});var ca=O("$parse"),gg=Function.prototype.call,hg=Function.prototype.apply,ig=Function.prototype.bind,Mb=T();q("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Mb[a]=!0});var Gg={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},gc=function(a){this.options=a};gc.prototype={constructor:gc,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Mb[b],e=Mb[d];Mb[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=x(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw ca("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=P(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"==d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||c&&this.isNumber(c)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=Gg[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var s=function(a,b){this.lexer=a;this.options=b};s.Program="Program";s.ExpressionStatement="ExpressionStatement";s.AssignmentExpression="AssignmentExpression";s.ConditionalExpression="ConditionalExpression";s.LogicalExpression="LogicalExpression";s.BinaryExpression="BinaryExpression";s.UnaryExpression="UnaryExpression";s.CallExpression="CallExpression";s.MemberExpression="MemberExpression";s.Identifier="Identifier";s.Literal="Literal";s.ArrayExpression="ArrayExpression";s.Property="Property";s.ObjectExpression="ObjectExpression";s.ThisExpression="ThisExpression";s.LocalsExpression="LocalsExpression";s.NGValueParameter="NGValueParameter";s.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:s.Program,body:a}},expressionStatement:function(){return{type:s.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();this.expect("=")&&(a={type:s.AssignmentExpression,left:a,right:this.assignment(),operator:"="});return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:s.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:s.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:s.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:s.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=qa(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:s.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:s.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:s.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:s.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:s.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.expression());while(this.expect(","))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:s.Identifier,name:a.text}},constant:function(){return{type:s.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:s.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;b={type:s.Property,kind:"init"};this.peek().constant?b.key=this.constant():this.peek().identifier?b.key=this.identifier():this.throwError("invalid key",this.peek());this.consume(":");b.value=this.expression();a.push(b)}while(this.expect(","))}this.consume("}");return{type:s.ObjectExpression,properties:a}},throwError:function(a,b){throw ca("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw ca("ueoe",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw ca("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:s.ThisExpression},$locals:{type:s.LocalsExpression}}};sd.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};aa(c,d.$filter);var e="",f;this.stage="assign";if(f=qd(c))this.state.computing="assign",e=this.nextId(),this.recurse(f,e),this.return_(e),e="fn.assign="+this.generateFunction("assign","s,v,l");f=od(c.body);d.stage="inputs";q(f,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}};d.state.computing=c;var e=d.nextId();d.recurse(a,e);d.return_(e);d.state.inputs.push(c);a.watchId=b});this.state.computing="fn";this.stage="main";this.recurse(c);e='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+e+this.watchFns()+"return fn;";e=(new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",e))(this.$filter,Ta,sa,md,fg,Gb,jg,nd,a);this.state=this.stage=void 0;e.literal=rd(c);e.constant=c.constant;return e},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;q(b,function(b){a.push("var "+b+"="+d.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;q(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,h,k=this,l,n;c=c||C;if(!f&&x(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case s.Program:q(a.body,function(b,c){k.recurse(b.expression,void 0,void 0,function(a){h=a});c!==a.body.length-1?k.current().body.push(h,";"):k.return_(h)});break;case s.Literal:n=this.escape(a.value);this.assign(b,n);c(n);break;case s.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){h=a});n=a.operator+"("+this.ifDefined(h,0)+")";this.assign(b,n);c(n);break;case s.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){h=a});n="+"===a.operator?this.plus(g,h):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(h,0):"("+g+")"+a.operator+"("+h+")";this.assign(b,n);c(n);break;case s.LogicalExpression:b=b||this.nextId();k.recurse(a.left,b);k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,b));c(b);break;case s.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));c(b);break;case s.Identifier:b=b||this.nextId();d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);Ta(a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){e&&1!==e&&k.if_(k.not(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));(k.state.expensiveChecks||Hb(a.name))&&k.addEnsureSafeObject(b);c(b);break;case s.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();k.recurse(a.object,g,void 0,function(){k.if_(k.notNull(g),function(){e&&1!==e&&k.addEnsureSafeAssignContext(g);if(a.computed)h=k.nextId(),k.recurse(a.property,h),k.getStringValue(h),k.addEnsureSafeMemberName(h),e&&1!==e&&k.if_(k.not(k.computedMember(g,h)),k.lazyAssign(k.computedMember(g,h),"{}")),n=k.ensureSafeObject(k.computedMember(g,h)),k.assign(b,n),d&&(d.computed=!0,d.name=h);else{Ta(a.property.name);e&&1!==e&&k.if_(k.not(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}"));n=k.nonComputedMember(g,a.property.name);if(k.state.expensiveChecks||Hb(a.property.name))n=k.ensureSafeObject(n);k.assign(b,n);d&&(d.computed=!1,d.name=a.property.name)}},function(){k.assign(b,"undefined")});c(b)},!!e);break;case s.CallExpression:b=b||this.nextId();a.filter?(h=k.filter(a.callee.name),l=[],q(a.arguments,function(a){var b=k.nextId();k.recurse(a,b);l.push(b)}),n=h+"("+l.join(",")+")",k.assign(b,n),c(b)):(h=k.nextId(),g={},l=[],k.recurse(a.callee,h,g,function(){k.if_(k.notNull(h),function(){k.addEnsureSafeFunction(h);q(a.arguments,function(a){k.recurse(a,k.nextId(),void 0,function(a){l.push(k.ensureSafeObject(a))})});g.name?(k.state.expensiveChecks||k.addEnsureSafeObject(g.context),n=k.member(g.context,g.name,g.computed)+"("+l.join(",")+")"):n=h+"("+l.join(",")+")";n=k.ensureSafeObject(n);k.assign(b,n)},function(){k.assign(b,"undefined")});c(b)}));break;case s.AssignmentExpression:h=this.nextId();g={};if(!pd(a.left))throw ca("lval");this.recurse(a.left,void 0,g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,h);k.addEnsureSafeObject(k.member(g.context,g.name,g.computed));k.addEnsureSafeAssignContext(g.context);n=k.member(g.context,g.name,g.computed)+a.operator+h;k.assign(b,n);c(b||n)})},1);break;case s.ArrayExpression:l=[];q(a.elements,function(a){k.recurse(a,k.nextId(),void 0,function(a){l.push(a)})});n="["+l.join(",")+"]";this.assign(b,n);c(n);break;case s.ObjectExpression:l=[];q(a.properties,function(a){k.recurse(a.value,k.nextId(),void 0,function(b){l.push(k.escape(a.key.type===s.Identifier?a.key.name:""+a.key.value)+":"+b)})});n="{"+l.join(",")+"}";this.assign(b,n);c(n);break;case s.ThisExpression:this.assign(b,"s");c("s");break;case s.LocalsExpression:this.assign(b,"l");c("l");break;case s.NGValueParameter:this.assign(b,"v"),c("v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/[$_a-zA-Z][$_a-zA-Z0-9]*/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(F(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(Q(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===typeof a)return"undefined";throw ca("esc");},nextId:function(a,b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};td.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.expression=a;this.expensiveChecks=b;aa(c,d.$filter);var e,f;if(e=qd(c))f=this.recurse(e);e=od(c.body);var g;e&&(g=[],q(e,function(a,b){var c=d.recurse(a);a.input=c;g.push(c);a.watchId=b}));var h=[];q(c.body,function(a){h.push(d.recurse(a.expression))});e=0===c.body.length?C:1===c.body.length?h[0]:function(a,b){var c;q(h,function(d){c=d(a,b)});return c};f&&(e.assign=function(a,b,c){return f(a,c,b)});g&&(e.inputs=g);e.literal=rd(c);e.constant=c.constant;return e},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case s.Literal:return this.value(a.value,b);case s.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case s.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case s.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case s.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case s.Identifier:return Ta(a.name,f.expression),f.identifier(a.name,f.expensiveChecks||Hb(a.name),b,d,f.expression);case s.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(Ta(a.property.name,f.expression),e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d,f.expression):this.nonComputedMember(c,e,f.expensiveChecks,b,d,f.expression);case s.CallExpression:return g=[],q(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var m=[],r=0;r<g.length;++r)m.push(g[r](a,c,d,f));a=e.apply(void 0,m,f);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,n){var m=e(a,c,d,n),r;if(null!=m.value){sa(m.context,f.expression);md(m.value,f.expression);r=[];for(var q=0;q<g.length;++q)r.push(sa(g[q](a,c,d,n),f.expression));r=sa(m.value.apply(m.context,r),f.expression)}return b?{value:r}:r};case s.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,g,n){var m=c(a,d,g,n);a=e(a,d,g,n);sa(m.value,f.expression);Gb(m.context);m.context[m.name]=a;return b?{value:a}:a};case s.ArrayExpression:return g=[],q(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],r=0;r<g.length;++r)f.push(g[r](a,c,d,e));return b?{value:f}:f};case s.ObjectExpression:return g=[],q(a.properties,function(a){g.push({key:a.key.type===s.Identifier?a.key.name:""+a.key.value,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},r=0;r<g.length;++r)f[g[r].key]=g[r].value(a,c,d,e);return b?{value:f}:f};case s.ThisExpression:return function(a){return b?{value:a}:a};case s.LocalsExpression:return function(a,c){return b?{value:c}:c};case s.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=x(d)?+d:0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=x(d)?-d:0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=nd(h,c);return d?{value:h}:h}},"binary-":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=(x(h)?h:0)-(x(c)?c:0);return d?{value:h}:h}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h)?b(e,f,g,h):d(e,f,g,h);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d,c,e){return function(f,g,h,k){f=g&&a in g?g:f;c&&1!==c&&f&&!f[a]&&(f[a]={});g=f?f[a]:void 0;b&&sa(g,e);return d?{context:f,name:a,value:g}:g}},computedMember:function(a,b,d,c,e){return function(f,g,h,k){var l=a(f,g,h,k),n,m;null!=l&&(n=b(f,g,h,k),n+="",Ta(n,e),c&&1!==c&&(Gb(l),l&&!l[n]&&(l[n]={})),m=l[n],sa(m,e));return d?{context:l,name:n,value:m}:m}},nonComputedMember:function(a,b,d,c,e,f){return function(g,h,k,l){g=a(g,h,k,l);e&&1!==e&&(Gb(g),g&&!g[b]&&(g[b]={}));h=null!=g?g[b]:void 0;(d||Hb(b))&&sa(h,f);return c?{context:g,name:b,value:h}:h}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};var hc=function(a,b,d){this.lexer=a;this.$filter=b;this.options=d;this.ast=new s(a,d);this.astCompiler=d.csp?new td(this.ast,b):new sd(this.ast,b)};hc.prototype={constructor:hc,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var kg=Object.prototype.valueOf,ta=O("$sce"),oa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},mg=O("$compile"),Y=v.document.createElement("a"),xd=ra(v.location.href);yd.$inject=["$document"];Jc.$inject=["$provide"];var Fd=22,Ed=".",jc="0";zd.$inject=["$locale"];Bd.$inject=["$locale"];var xg={yyyy:W("FullYear",4,0,!1,!0),yy:W("FullYear",2,0,!0,!0),y:W("FullYear",1,0,!1,!0),MMMM:ib("Month"),MMM:ib("Month",!0),MM:W("Month",2,1),M:W("Month",1,1),LLLL:ib("Month",!1,!0),dd:W("Date",2),d:W("Date",1),HH:W("Hours",2),H:W("Hours",1),hh:W("Hours",2,-12),h:W("Hours",1,-12),mm:W("Minutes",2),m:W("Minutes",1),ss:W("Seconds",2),s:W("Seconds",1),sss:W("Milliseconds",3),EEEE:ib("Day"),EEE:ib("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Ib(Math[0<a?"floor":"ceil"](a/60),2)+Ib(Math.abs(a%60),2))},ww:Hd(2),w:Hd(1),G:kc,GG:kc,GGG:kc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},wg=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,vg=/^\-?\d+$/;Ad.$inject=["$locale"];var qg=da(P),rg=da(sb);Cd.$inject=["$parse"];var ne=da({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===ma.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),tb={};q(Cb,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!=a){var c=xa("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});tb[c]=function(){return{restrict:"A",priority:100,link:e}}}});q(ad,function(a,b){tb[b]=function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"==e.ngPattern.charAt(0)&&(c=e.ngPattern.match(zg))){e.$set("ngPattern",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});q(["src","srcset","href"],function(a){var b=xa("ng-"+a);tb[b]=function(){return{priority:99,link:function(d,c,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ma.call(c.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),Ca&&f&&c.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Jb={$addControl:C,$$renameControl:function(a,b){a.$name=b},$removeControl:C,$setValidity:C,$setDirty:C,$setPristine:C,$setSubmitted:C};Id.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Rd=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||C}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Id,compile:function(d,f){d.addClass(Ua).addClass(mb);var g=f.name?"name":a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var m=f[0];if(!("action"in e)){var r=function(b){a.$apply(function(){m.$commitViewValue();m.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",r,!1);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",r,!1)},0,!1)})}(f[1]||m.$$parentForm).$addControl(m);var q=g?c(m.$name):C;g&&(q(a,m),e.$observe(g,function(b){m.$name!==b&&(q(a,void 0),m.$$parentForm.$$renameControl(m,b),q=c(m.$name),q(a,m))}));d.on("$destroy",function(){m.$$parentForm.$removeControl(m);q(a,void 0);R(m,Jb)})}}}}}]},oe=Rd(),Be=Rd(!0),yg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Hg=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Ig=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Jg=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Sd=/^(\d{4,})-(\d{2})-(\d{2})$/,Td=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,nc=/^(\d{4,})-W(\d\d)$/,Ud=/^(\d{4,})-(\d\d)$/,Vd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Kd=T();q(["date","datetime-local","month","time","week"],function(a){Kd[a]=!0});var Wd={text:function(a,b,d,c,e,f){jb(a,b,d,c,e,f);lc(c)},date:kb("date",Sd,Lb(Sd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":kb("datetimelocal",Td,Lb(Td,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:kb("time",Vd,Lb(Vd,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:kb("week",nc,function(a,b){if(fa(a))return a;if(F(a)){nc.lastIndex=0;var d=nc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=0,h=0,k=Gd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(c,0,k.getDate()+e,d,f,g,h)}}return NaN},"yyyy-Www"),month:kb("month",Ud,Lb(Ud,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f){Ld(a,b,d,c);jb(a,b,d,c,e,f);c.$$parserName="number";c.$parsers.push(function(a){if(c.$isEmpty(a))return null;if(Jg.test(a))return parseFloat(a)});c.$formatters.push(function(a){if(!c.$isEmpty(a)){if(!Q(a))throw lb("numfmt",a);a=a.toString()}return a});if(x(d.min)||d.ngMin){var g;c.$validators.min=function(a){return c.$isEmpty(a)||y(g)||a>=g};d.$observe("min",function(a){x(a)&&!Q(a)&&(a=parseFloat(a,10));g=Q(a)&&!isNaN(a)?a:void 0;c.$validate()})}if(x(d.max)||d.ngMax){var h;c.$validators.max=function(a){return c.$isEmpty(a)||y(h)||a<=h};d.$observe("max",function(a){x(a)&&!Q(a)&&(a=parseFloat(a,10));h=Q(a)&&!isNaN(a)?a:void 0;c.$validate()})}},url:function(a,b,d,c,e,f){jb(a,b,d,c,e,f);lc(c);c.$$parserName="url";c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||Hg.test(d)}},email:function(a,b,d,c,e,f){jb(a,b,d,c,e,f);lc(c);c.$$parserName="email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||Ig.test(d)}},radio:function(a,b,d,c){y(d.name)&&b.attr("name",++nb);b.on("click",function(a){b[0].checked&&c.$setViewValue(d.value,a&&a.type)});c.$render=function(){b[0].checked=d.value==c.$viewValue};d.$observe("value",c.$render)},checkbox:function(a,b,d,c,e,f,g,h){var k=Md(h,a,"ngTrueValue",d.ngTrueValue,!0),l=Md(h,a,"ngFalseValue",d.ngFalseValue,!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return pa(a,k)});c.$parsers.push(function(a){return a?k:l})},hidden:C,button:C,submit:C,reset:C,file:C},Dc=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Wd[P(g.type)]||Wd.text)(e,f,g,h[0],b,a,d,c)}}}}],Kg=/^(true|false|\d+)$/,Te=function(){return{restrict:"A",priority:100,compile:function(a,b){return Kg.test(b.ngValue)?function(a,b,e){e.$set("value",a.$eval(e.ngValue))}:function(a,b,e){a.$watch(e.ngValue,function(a){e.$set("value",a)})}}}},te=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=y(a)?"":a})}}}}],ve=["$interpolate","$compile",function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=y(a)?"":a})}}}}],ue=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){c.html(a.getTrustedHtml(f(b))||"")})}}}}],Se=da({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),we=mc("",!0),ye=mc("Odd",0),xe=mc("Even",1),ze=La({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Ae=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ic={},Lg={blur:!0,focus:!0};q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=xa("ng-"+a);Ic[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(e,f){var g=d(f[b],null,!0);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};Lg[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var De=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var h,k,l;d.$watch(e.ngIf,function(d){d?k||g(function(d,f){k=f;d[d.length++]=b.$$createComment("end ngIf",e.ngIf);h={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),k&&(k.$destroy(),k=null),h&&(l=rb(h.clone),a.leave(l).then(function(){l=null}),h=null))})}}}],Ee=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ea.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(c,e,n,m,r){var q=0,s,w,p,y=function(){w&&(w.remove(),w=null);s&&(s.$destroy(),s=null);p&&(d.leave(p).then(function(){w=null}),w=p,p=null)};c.$watch(f,function(f){var n=function(){!x(h)||h&&!c.$eval(h)||b()},u=++q;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&u===q){var b=c.$new();m.template=a;a=r(b,function(a){y();d.enter(a,null,e).then(n)});s=b;p=a;s.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||u!==q||(y(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(y(),m.template=null)})}}}}],Ve=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,d,c,e){ma.call(d[0]).match(/SVG/)?(d.empty(),a(Lc(e.template,v.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],Fe=La({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),Re=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=b.attr(d.$attr.ngList)||", ",f="false"!==d.ngTrim,g=f?V(e):e;c.$parsers.push(function(a){if(!y(a)){var b=[];a&&q(a.split(g),function(a){a&&b.push(f?V(a):a)});return b}});c.$formatters.push(function(a){if(K(a))return a.join(e)});c.$isEmpty=function(a){return!a||!a.length}}}},mb="ng-valid",Nd="ng-invalid",Ua="ng-pristine",Kb="ng-dirty",Pd="ng-pending",lb=O("ngModel"),Mg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,c,e,f,g,h,k,l){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=l(d.name||"",!1)(a);this.$$parentForm=Jb;var n=e(d.ngModel),m=n.assign,r=n,s=m,v=null,w,p=this;this.$$setOptions=function(a){if((p.$options=a)&&a.getterSetter){var b=e(d.ngModel+"()"),f=e(d.ngModel+"($$$p)");r=function(a){var c=n(a);E(c)&&(c=b(a));return c};s=function(a,b){E(n(a))?f(a,{$$$p:b}):m(a,b)}}else if(!n.assign)throw lb("nonassign",d.ngModel,wa(c));};this.$render=C;this.$isEmpty=function(a){return y(a)||""===a||null===a||a!==a};this.$$updateEmptyClasses=function(a){p.$isEmpty(a)?(f.removeClass(c,"ng-not-empty"),f.addClass(c,"ng-empty")):(f.removeClass(c,"ng-empty"),f.addClass(c,"ng-not-empty"))};var H=0;Jd({ctrl:this,$element:c,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:f});this.$setPristine=function(){p.$dirty=!1;p.$pristine=!0;f.removeClass(c,Kb);f.addClass(c,Ua)};this.$setDirty=function(){p.$dirty=!0;p.$pristine=!1;f.removeClass(c,Ua);f.addClass(c,Kb);p.$$parentForm.$setDirty()};this.$setUntouched=function(){p.$touched=!1;p.$untouched=!0;f.setClass(c,"ng-untouched","ng-touched")};this.$setTouched=function(){p.$touched=!0;p.$untouched=!1;f.setClass(c,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){g.cancel(v);p.$viewValue=p.$$lastCommittedViewValue;p.$render()};this.$validate=function(){if(!Q(p.$modelValue)||!isNaN(p.$modelValue)){var a=p.$$rawModelValue,b=p.$valid,c=p.$modelValue,d=p.$options&&p.$options.allowInvalid;p.$$runValidators(a,p.$$lastCommittedViewValue,function(e){d||b===e||(p.$modelValue=e?a:void 0,p.$modelValue!==c&&p.$$writeModelToScope())})}};this.$$runValidators=function(a,b,c){function d(){var c=!0;q(p.$validators,function(d,e){var g=d(a,b);c=c&&g;f(e,g)});return c?!0:(q(p.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;q(p.$asyncValidators,function(e,g){var h=e(a,b);if(!h||!E(h.then))throw lb("nopromise",h);f(g,void 0);c.push(h.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});c.length?k.all(c).then(function(){g(d)},C):g(!0)}function f(a,b){h===H&&p.$setValidity(a,b)}function g(a){h===H&&c(a)}H++;var h=H;(function(){var a=p.$$parserName||"parse";if(y(w))f(a,null);else return w||(q(p.$validators,function(a,b){f(b,null)}),q(p.$asyncValidators,function(a,b){f(b,null)})),f(a,w),w;return!0})()?d()?e():g(!1):g(!1)};this.$commitViewValue=function(){var a=p.$viewValue;g.cancel(v);if(p.$$lastCommittedViewValue!==a||""===a&&p.$$hasNativeValidators)p.$$updateEmptyClasses(a),p.$$lastCommittedViewValue=a,p.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=p.$$lastCommittedViewValue;if(w=y(b)?void 0:!0)for(var c=0;c<p.$parsers.length;c++)if(b=p.$parsers[c](b),y(b)){w=!1;break}Q(p.$modelValue)&&isNaN(p.$modelValue)&&(p.$modelValue=r(a));var d=p.$modelValue,e=p.$options&&p.$options.allowInvalid;p.$$rawModelValue=b;e&&(p.$modelValue=b,p.$modelValue!==d&&p.$$writeModelToScope());p.$$runValidators(b,p.$$lastCommittedViewValue,function(a){e||(p.$modelValue=a?b:void 0,p.$modelValue!==d&&p.$$writeModelToScope())})};this.$$writeModelToScope=function(){s(a,p.$modelValue);q(p.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})};this.$setViewValue=function(a,b){p.$viewValue=a;p.$options&&!p.$options.updateOnDefault||p.$$debounceViewValueCommit(b)};this.$$debounceViewValueCommit=function(b){var c=0,d=p.$options;d&&x(d.debounce)&&(d=d.debounce,Q(d)?c=d:Q(d[b])?c=d[b]:Q(d["default"])&&(c=d["default"]));g.cancel(v);c?v=g(function(){p.$commitViewValue()},c):h.$$phase?p.$commitViewValue():a.$apply(function(){p.$commitViewValue()})};a.$watch(function(){var b=r(a);if(b!==p.$modelValue&&(p.$modelValue===p.$modelValue||b===b)){p.$modelValue=p.$$rawModelValue=b;w=void 0;for(var c=p.$formatters,d=c.length,e=b;d--;)e=c[d](e);p.$viewValue!==e&&(p.$$updateEmptyClasses(e),p.$viewValue=p.$$lastCommittedViewValue=e,p.$render(),p.$$runValidators(b,e,C))}return b})}],Qe=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Mg,priority:1,compile:function(b){b.addClass(Ua).addClass("ng-untouched").addClass(mb);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;g.$$setOptions(f[2]&&f[2].$options);b.$addControl(g);e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){var g=f[0];if(g.$options&&g.$options.updateOn)c.on(g.$options.updateOn,function(a){g.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(){g.$touched||(a.$$phase?b.$evalAsync(g.$setTouched):b.$apply(g.$setTouched))})}}}}}],Ng=/(\s+|^)default(\s+|$)/,Ue=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=qa(a.$eval(b.ngModelOptions));x(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=V(this.$options.updateOn.replace(Ng,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},Ge=La({terminal:!0,priority:1E3}),Og=O("ngOptions"),Pg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Oe=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!q&&ya(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var m=a.match(Pg);if(!m)throw Og("iexp",a,wa(b));var r=m[5]||m[7],q=m[6];a=/ as /.test(m[0])&&m[1];var s=m[9];b=d(m[2]?m[1]:r);var w=a&&d(a)||b,p=s&&d(s),v=s?function(a,b){return p(c,b)}:function(a){return Fa(a)},t=function(a,b){return v(a,L(a,b))},z=d(m[2]||m[1]),u=d(m[3]||""),y=d(m[4]||""),x=d(m[8]),D={},L=q?function(a,b){D[q]=b;D[r]=a;return D}:function(a){D[r]=a;return D};return{trackBy:s,getTrackByValue:t,getWatchables:d(x,function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var h=a===d?g:d[g],l=a[h],h=L(l,h),l=v(l,h);b.push(l);if(m[2]||m[1])l=z(c,h),b.push(l);m[4]&&(h=y(c,h),b.push(h))}return b}),getOptions:function(){for(var a=[],b={},d=x(c)||[],g=f(d),h=g.length,m=0;m<h;m++){var p=d===g?m:g[m],q=L(d[p],p),r=w(c,q),p=v(r,q),D=z(c,q),N=u(c,q),q=y(c,q),r=new e(p,r,D,N,q);a.push(r);b[p]=r}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[t(a)]},getViewValueFromOption:function(a){return s?ea.copy(a.viewValue):a.viewValue}}}}}var e=v.document.createElement("option"),f=v.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=C},post:function(d,h,k,l){function n(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);a.value!==b.value&&(b.value=a.selectValue)}function m(){var a=u&&r.readValue();if(u)for(var b=u.items.length-1;0<=b;b--){var c=u.items[b];c.group?Bb(c.element.parentNode):Bb(c.element)}u=I.getOptions();var d={};t&&h.prepend(w);u.items.forEach(function(a){var b;if(x(a.group)){b=d[a.group];b||(b=f.cloneNode(!1),E.appendChild(b),b.label=a.group,d[a.group]=b);var c=e.cloneNode(!1)}else b=E,c=e.cloneNode(!1);b.appendChild(c);n(a,c)});h[0].appendChild(E);s.$render();s.$isEmpty(a)||(b=r.readValue(),(I.trackBy||v?pa(a,b):a===b)||(s.$setViewValue(b),s.$render()))}var r=l[0],s=l[1],v=k.multiple,w;l=0;for(var p=h.children(),y=p.length;l<y;l++)if(""===p[l].value){w=p.eq(l);break}var t=!!w,z=B(e.cloneNode(!1));z.val("?");var u,I=c(k.ngOptions,h,d),E=b[0].createDocumentFragment();v?(s.$isEmpty=function(a){return!a||0===a.length},r.writeValue=function(a){u.items.forEach(function(a){a.element.selected=!1});a&&a.forEach(function(a){if(a=u.getOptionFromViewValue(a))a.element.selected=!0})},r.readValue=function(){var a=h.val()||[],b=[];q(a,function(a){(a=u.selectValueMap[a])&&!a.disabled&&b.push(u.getViewValueFromOption(a))});return b},I.trackBy&&d.$watchCollection(function(){if(K(s.$viewValue))return s.$viewValue.map(function(a){return I.getTrackByValue(a)})},function(){s.$render()})):(r.writeValue=function(a){var b=u.getOptionFromViewValue(a);b?(h[0].value!==b.selectValue&&(z.remove(),t||w.remove(),h[0].value=b.selectValue,b.element.selected=!0),b.element.setAttribute("selected","selected")):null===a||t?(z.remove(),t||h.prepend(w),h.val(""),w.prop("selected",!0),w.attr("selected",!0)):(t||w.remove(),h.prepend(z),h.val("?"),z.prop("selected",!0),z.attr("selected",!0))},r.readValue=function(){var a=u.selectValueMap[h.val()];return a&&!a.disabled?(t||w.remove(),z.remove(),u.getViewValueFromOption(a)):null},I.trackBy&&d.$watch(function(){return I.getTrackByValue(s.$viewValue)},function(){s.$render()}));t?(w.remove(),a(w)(d),w.removeClass("ng-scope")):w=B(e.cloneNode(!1));h.empty();m();d.$watchCollection(I.getWatchables,m)}}}}],He=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,h){function k(a){g.text(a||"")}var l=h.count,n=h.$attr.when&&g.attr(h.$attr.when),m=h.offset||0,r=f.$eval(n)||{},s={},v=b.startSymbol(),w=b.endSymbol(),p=v+l+"-"+m+w,x=ea.noop,t;q(h,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+P(c[2]),r[c]=g.attr(h.$attr[b]))});q(r,function(a,d){s[d]=b(a.replace(c,p))});f.$watch(l,function(b){var c=parseFloat(b),e=isNaN(c);e||c in r||(c=a.pluralCat(c-m));c===t||e&&Q(t)&&isNaN(t)||(x(),e=s[c],y(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+n),x=C,k()):x=f.$watch(e,k),t=c)})}}}],Ie=["$parse","$animate","$compile",function(a,b,d){var c=O("ngRepeat"),e=function(a,b,c,d,e,n,m){a[c]=d;e&&(a[e]=n);a.$index=b;a.$first=0===b;a.$last=b===m-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,k=d.$$createComment("end ngRepeat",h),l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw c("iexp",h);var n=l[1],m=l[2],r=l[3],s=l[4],l=n.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!l)throw c("iidexp",n);var v=l[3]||l[1],w=l[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw c("badident",r);var p,y,t,z,u={$id:Fa};s?p=a(s):(t=function(a,b){return Fa(b)},z=function(a){return a});return function(a,d,f,g,l){p&&(y=function(b,c,d){w&&(u[w]=b);u[v]=c;u.$index=d;return p(a,u)});var n=T();a.$watchCollection(m,function(f){var g,m,p=d[0],s,u=T(),x,D,E,C,F,B,G;r&&(a[r]=f);if(ya(f))F=f,m=y||t;else for(G in m=y||z,F=[],f)ua.call(f,G)&&"$"!==G.charAt(0)&&F.push(G);x=F.length;G=Array(x);for(g=0;g<x;g++)if(D=f===F?g:F[g],E=f[D],C=m(D,E,g),n[C])B=n[C],delete n[C],u[C]=B,G[g]=B;else{if(u[C])throw q(G,function(a){a&&a.scope&&(n[a.id]=a)}),c("dupes",h,C,E);G[g]={id:C,scope:void 0,clone:void 0};u[C]=!0}for(s in n){B=n[s];C=rb(B.clone);b.leave(C);if(C[0].parentNode)for(g=0,m=C.length;g<m;g++)C[g].$$NG_REMOVED=!0;B.scope.$destroy()}for(g=0;g<x;g++)if(D=f===F?g:F[g],E=f[D],B=G[g],B.scope){s=p;do s=s.nextSibling;while(s&&s.$$NG_REMOVED);B.clone[0]!=s&&b.move(rb(B.clone),null,p);p=B.clone[B.clone.length-1];e(B.scope,g,v,E,w,D,x)}else l(function(a,c){B.scope=c;var d=k.cloneNode(!1);a[a.length++]=d;b.enter(a,null,p);p=d;B.clone=a;u[B.id]=B;e(B.scope,g,v,E,w,D,x)});n=u})}}}}],Je=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ce=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ke=La(function(a,b,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&q(d,function(a,c){b.css(c,"")});a&&b.css(a)},!0)}),Le=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,e,f){var g=[],h=[],k=[],l=[],n=function(a,b){return function(){a.splice(b,1)}};d.$watch(e.ngSwitch||e.on,function(c){var d,e;d=0;for(e=k.length;d<e;++d)a.cancel(k[d]);d=k.length=0;for(e=l.length;d<e;++d){var s=rb(h[d].clone);l[d].$destroy();(k[d]=a.leave(s)).then(n(k,d))}h.length=0;l.length=0;(g=f.cases["!"+
c]||f.cases["?"])&&q(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],Me=La({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["!"+d.ngSwitchWhen]=c.cases["!"+d.ngSwitchWhen]||[];c.cases["!"+d.ngSwitchWhen].push({transclude:e,element:b})}}),Ne=La({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,element:b})}}),Qg=O("ngTransclude"),Pe=La({restrict:"EAC",link:function(a,b,d,c,e){d.ngTransclude===d.$attr.ngTransclude&&(d.ngTransclude="");if(!e)throw Qg("orphan",wa(b));e(function(a){a.length&&(b.empty(),b.append(a))},null,d.ngTransclude||d.ngTranscludeSlot)}}),pe=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"==d.type&&a.put(d.id,b[0].text)}}}],Rg={$setViewValue:C,$render:C},Sg=["$element","$scope",function(a,b){var d=this,c=new Ra;d.ngModelCtrl=Rg;d.unknownOption=B(v.document.createElement("option"));d.renderUnknownOption=function(b){b="? "+Fa(b)+" ?";d.unknownOption.val(b);a.prepend(d.unknownOption);a.val(b)};b.$on("$destroy",function(){d.renderUnknownOption=C});d.removeUnknownOption=function(){d.unknownOption.parent()&&d.unknownOption.remove()};d.readValue=function(){d.removeUnknownOption();return a.val()};d.writeValue=function(b){d.hasOption(b)?(d.removeUnknownOption(),a.val(b),""===b&&d.emptyOption.prop("selected",!0)):null==b&&d.emptyOption?(d.removeUnknownOption(),a.val("")):d.renderUnknownOption(b)};d.addOption=function(a,b){if(8!==b[0].nodeType){Qa(a,'"option value"');""===a&&(d.emptyOption=b);var g=c.get(a)||0;c.put(a,g+1);d.ngModelCtrl.$render();b[0].hasAttribute("selected")&&(b[0].selected=!0)}};d.removeOption=function(a){var b=c.get(a);b&&(1===b?(c.remove(a),""===a&&(d.emptyOption=void 0)):c.put(a,b-1))};d.hasOption=function(a){return!!c.get(a)};d.registerOption=function(a,b,c,h,k){if(h){var l;c.$observe("value",function(a){x(l)&&d.removeOption(l);l=a;d.addOption(a,b)})}else k?a.$watch(k,function(a,e){c.$set("value",a);e!==a&&d.removeOption(e);d.addOption(a,b)}):d.addOption(c.value,b);b.on("$destroy",function(){d.removeOption(c.value);d.ngModelCtrl.$render()})}}],qe=function(){return{restrict:"E",require:["select","?ngModel"],controller:Sg,priority:1,link:{pre:function(a,b,d,c){var e=c[1];if(e){var f=c[0];f.ngModelCtrl=e;b.on("change",function(){a.$apply(function(){e.$setViewValue(f.readValue())})});if(d.multiple){f.readValue=function(){var a=[];q(b.find("option"),function(b){b.selected&&a.push(b.value)});return a};f.writeValue=function(a){var c=new Ra(a);q(b.find("option"),function(a){a.selected=x(c.get(a.value))})};var g,h=NaN;a.$watch(function(){h!==e.$viewValue||pa(g,e.$viewValue)||(g=ha(e.$viewValue),e.$render());h=e.$viewValue});e.$isEmpty=function(a){return!a||0===a.length}}}},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},se=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){if(x(d.value))var c=a(d.value,!0);else{var e=a(b.text(),!0);e||d.$set("value",b.text())}return function(a,b,d){var k=b.parent();(k=k.data("$selectController")||k.parent().data("$selectController"))&&k.registerOption(a,b,d,c,e)}}}}],re=da({restrict:"E",terminal:!1}),Fc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},Ec=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe("pattern",function(a){F(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw O("ngPattern")("noregexp",f,a,wa(b));e=a||void 0;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||y(e)||e.test(b)}}}}},Hc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=-1;d.$observe("maxlength",function(a){a=X(a);e=isNaN(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||b.length<=e}}}}},Gc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=0;d.$observe("minlength",function(a){e=X(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};v.angular.bootstrap?v.console&&console.log("WARNING: Tried to load angular more than once."):(ie(),ke(ea),ea.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),B(v.document).ready(function(){ee(v.document,yc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');;;;angular.module('ccc-app',[]);;;;!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{};var n,r=i(t),s=r.source,u=r.id,h=r.path,f=p[u]&&h in p[u].nsps,l=e.forceNew||e["force new connection"]||!1===e.multiplex||f;return l?(c("ignoring socket cache for %s",s),n=a(s,e)):(p[u]||(c("new io instance for %s",s),p[u]=a(s,e)),n=p[u]),r.query&&!e.query&&(e.query=r.query),n.socket(r.path,e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),s=n(7),a=n(13),c=n(3)("socket.io-client");t.exports=e=r;var p=e.managers={};e.protocol=s.protocol,e.connect=r,e.Manager=n(13),e.Socket=n(39)},function(t,e,n){(function(e){"use strict";function r(t,n){var r=t;n=n||e.location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t="undefined"!=typeof n?n.protocol+"//"+t:"https://"+t),i("parse %s",t),r=o(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var s=r.host.indexOf(":")!==-1,a=s?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}var o=n(2),i=n(3)("socket.io-client:url");t.exports=r}).call(e,function(){return this}())},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),i=t.indexOf("]");o!=-1&&i!=-1&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,";")+t.substring(i,t.length));for(var s=n.exec(t||""),a={},c=14;c--;)a[r[c]]=s[c]||"";return o!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(t,e,n){(function(r){function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))}),t.splice(i,0,r)}}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(n){}}function c(){var t;try{t=e.storage.debug}catch(n){}return!t&&"undefined"!=typeof r&&"env"in r&&(t=r.env.DEBUG),t}function p(){try{return window.localStorage}catch(t){}}e=t.exports=n(5),e.log=s,e.formatArgs=i,e.save=a,e.load=c,e.useColors=o,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:p(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(c())}).call(e,n(4))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){y&&l&&(y=!1,l.length?d=l.concat(d):m=-1,d.length&&a())}function a(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(l=d,d=[];++m<e;)l&&l[m].run();m=-1,e=d.length}l=null,y=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function p(){}var u,h,f=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var l,d=[],y=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=p,f.addListener=p,f.once=p,f.off=p,f.removeListener=p,f.removeAllListeners=p,f.emit=p,f.prependListener=p,f.prependOnceListener=p,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){function r(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}function o(t){function n(){if(n.enabled){var t=n,r=+new Date,o=r-(p||r);t.diff=o,t.prev=p,t.curr=r,p=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=e.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;a++;var o=e.formatters[r];if("function"==typeof o){var s=i[a];n=o.call(t,s),i.splice(a,1),a--}return n}),e.formatArgs.call(t,i);var c=n.log||e.log||console.log.bind(console);c.apply(t,i)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=r(t),"function"==typeof e.init&&e.init(n),n}function i(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(t=n[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o.debug=o["default"]=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=n(6),e.names=[],e.skips=[],e.formatters={};var p},function(t,e){function n(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*u;case"days":case"day":case"d":return n*p;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(t){return t>=p?Math.round(t/p)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return i(t,p,"day")||i(t,c,"hour")||i(t,a,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,p=24*c,u=365.25*p;t.exports=function(t,e){e=e||{};var i=typeof t;if("string"===i&&t.length>0)return n(t);if("number"===i&&isNaN(t)===!1)return e["long"]?o(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){function r(){}function o(t){var n=""+t.type;return e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data&&(n+=JSON.stringify(t.data)),h("encoded %j as %s",t,n),n}function i(t,e){function n(t){var n=d.deconstructPacket(t),r=o(n.packet),i=n.buffers;i.unshift(r),e(i)}d.removeBlobs(t,n)}function s(){this.reconstructor=null}function a(t){var n=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return u();if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var o="";"-"!==t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(n+1))for(r.nsp="";++n;){var i=t.charAt(n);if(","===i)break;if(r.nsp+=i,n===t.length)break}else r.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(r.id="";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=t.charAt(n),n===t.length)break}r.id=Number(r.id)}return t.charAt(++n)&&(r=c(r,t.substr(n))),h("decoded %s as %j",t,r),r}function c(t,e){try{t.data=JSON.parse(e)}catch(n){return u()}return t}function p(t){this.reconPack=t,this.buffers=[]}function u(){return{type:e.ERROR,data:"parser error"}}var h=n(3)("socket.io-parser"),f=n(8),l=n(9),d=n(11),y=n(12);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=s,r.prototype.encode=function(t,n){if(t.type!==e.EVENT&&t.type!==e.ACK||!l(t.data)||(t.type=t.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK),h("encoding packet %j",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)i(t,n);else{var r=o(t);n([r])}},f(s.prototype),s.prototype.add=function(t){var n;if("string"==typeof t)n=a(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!y(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,this.emit("decoded",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){function r(t){if(t)return o(t)}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(e){function r(t){if(!t||"object"!=typeof t)return!1;if(o(t)){for(var n=0,i=t.length;n<i;n++)if(r(t[n]))return!0;return!1}if("function"==typeof e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||"function"==typeof e.ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return r(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&r(t[c]))return!0;return!1}var o=n(10),i=Object.prototype.toString,s="function"==typeof e.Blob||"[object BlobConstructor]"===i.call(e.Blob),a="function"==typeof e.File||"[object FileConstructor]"===i.call(e.File);t.exports=r}).call(e,function(){return this}())},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){function r(t,e){if(!t)return t;if(s(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(i(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=r(t[a],e);return o}if("object"==typeof t&&!(t instanceof Date)){var o={};for(var c in t)o[c]=r(t[c],e);return o}return t}function o(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(i(t))for(var n=0;n<t.length;n++)t[n]=o(t[n],e);else if("object"==typeof t)for(var r in t)t[r]=o(t[r],e);return t}var i=n(10),s=n(12),a=Object.prototype.toString,c="function"==typeof t.Blob||"[object BlobConstructor]"===a.call(t.Blob),p="function"==typeof t.File||"[object FileConstructor]"===a.call(t.File);e.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=r(n,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=o(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){function n(t,a,u){if(!t)return t;if(c&&t instanceof Blob||p&&t instanceof File){r++;var h=new FileReader;h.onload=function(){u?u[a]=this.result:o=this.result,--r||e(o)},h.readAsArrayBuffer(t)}else if(i(t))for(var f=0;f<t.length;f++)n(t[f],f,t);else if("object"==typeof t&&!s(t))for(var l in t)n(t[l],l,t)}var r=0,o=t;n(o),r||e(o)}}).call(e,function(){return this}())},function(t,e){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);t&&"object"===("undefined"==typeof t?"undefined":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(14),s=n(39),a=n(8),c=n(7),p=n(41),u=n(42),h=n(3)("socket.io-client:manager"),f=n(37),l=n(43),d=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},r.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},a(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t,e){if(h("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;h("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=p(n,"open",function(){r.onopen(),t&&t()}),s=p(n,"error",function(e){if(h("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h("connect attempt will timeout after %d",a);var c=setTimeout(function(){h("connect attempt timed out after %d",a),o.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},r.prototype.onopen=function(){h("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(p(t,"data",u(this,"ondata"))),this.subs.push(p(t,"ping",u(this,"onping"))),this.subs.push(p(t,"pong",u(this,"onpong"))),this.subs.push(p(t,"error",u(this,"onerror"))),this.subs.push(p(t,"close",u(this,"onclose"))),this.subs.push(p(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit("packet",t)},r.prototype.onerror=function(t){h("error",t),this.emitAll("error",t)},r.prototype.socket=function(t,e){function n(){~f(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[t];if(!r){r=new s(this,t,e),this.nsps[t]=r;var o=this;r.on("connecting",n),r.on("connect",function(){r.id=o.generateId(t)}),this.autoConnect&&n()}return r},r.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){h("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){h("cleanup");for(var t=this.subs.length,e=0;e<t;e++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){h("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(t){h("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();h("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(h("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(h("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(h("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e,n){t.exports=n(15)},function(t,e,n){t.exports=n(16),t.exports.parser=n(23)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure="https"===t.protocol||"wss"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:"localhost"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||"t",this.timestampRequests=n.timestampRequests,this.transports=n.transports||["polling","websocket"],this.transportOptions=n.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o="object"==typeof e&&e;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var i=n(17),s=n(8),a=n(3)("engine.io-client:socket"),c=n(37),p=n(23),u=n(2),h=n(38),f=n(31);t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=p.protocol,r.Socket=r,r.Transport=n(22),r.transports=n(17),r.parser=n(23),r.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=o(this.query);e.EIO=p.protocol,e.transport=t;var n=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var r=new i[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0});return r},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;h=h||e}h||(a('probe transport "%s" opened',t),u.send([{type:"ping",data:"probe"}]),u.once("packet",function(e){if(!h)if("pong"===e.type&&"probe"===e.data){if(a('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",u),!u)return;r.priorWebsocketSuccess="websocket"===u.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){h||"closed"!==f.readyState&&(a("changing transport and sending upgrade packet"),p(),f.setTransport(u),u.send([{type:"upgrade"}]),f.emit("upgrade",u),u=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=u.name,f.emit("upgradeError",n)}}))}function n(){h||(h=!0,p(),u.close(),u=null)}function o(e){var r=new Error("probe error: "+e);r.transport=u.name,n(),a('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",r)}function i(){o("transport closed")}function s(){o("socket closed")}function c(t){u&&t.name!==u.name&&(a('"%s" works - aborting "%s"',t.name,u.name),n())}function p(){u.removeListener("open",e),u.removeListener("error",o),u.removeListener("close",i),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',t);var u=this.createTransport(t,{probe:1}),h=!1,f=this;r.priorWebsocketSuccess=!1,u.once("open",e),u.once("error",o),u.once("close",i),this.once("close",s),this.once("upgrading",c),u.open()},r.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(h(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},r.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),a("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){a("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){a('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t){function r(e){var n,r=!1,a=!1,c=!1!==e.jsonp;if(t.location){var p="https:"===location.protocol,u=location.port;u||(u=p?443:80),r=e.hostname!==location.hostname||u!==e.port,a=e.secure!==p}if(e.xdomain=r,e.xscheme=a,n=new o(e),"open"in n&&!e.forceJSONP)return new i(e);if(!c)throw new Error("JSONP disabled");return new s(e)}var o=n(18),i=n(20),s=n(34),a=n(35);e.polling=r,e.websocket=a}).call(e,function(){return this}())},function(t,e,n){(function(e){var r=n(19);t.exports=function(t){var n=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(s){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(s){}if(!n)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(s){}}}).call(e,function(){return this}())},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},function(t,e,n){(function(e){function r(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var n="https:"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}}function i(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=n(18),c=n(21),p=n(8),u=n(32),h=n(3)("engine.io-client:polling-xhr");t.exports=o,t.exports.Request=i,u(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),o=this;r.on("success",e),r.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=r},o.prototype.doPoll=function(){h("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},p(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),r=this;try{h("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}}catch(s){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{n.setRequestHeader("Accept","*/*")}catch(s){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState){var t;try{t=n.getResponseHeader("Content-Type")}catch(e){}"application/octet-stream"===t&&(n.responseType="arraybuffer")}4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},h("xhr data %s",this.data),n.send(this.data)}catch(s){return void setTimeout(function(){r.onError(s)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},i.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(n){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(n){}t="application/octet-stream"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return"undefined"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",s):e.addEventListener&&e.addEventListener("beforeunload",s,!1))}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=n(22),i=n(31),s=n(23),a=n(32),c=n(33),p=n(3)("engine.io-client:polling");t.exports=r;var u=function(){var t=n(18),e=new t({xdomain:!1});return null!=e.responseType}();a(r,o),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){p("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(p("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){p("pre-pause polling complete"),--r||e()})),this.writable||(p("we are currently writing - waiting to pause"),r++,this.once("drain",function(){p("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){p("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;p("polling got data %s",t);var n=function(t,n,r){return"opening"===e.readyState&&e.onOpen(),"close"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,n),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():p('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){p("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(p("transport open - closing"),t()):(p("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(n=":"+this.port),t.length&&(t="?"+t);var r=this.hostname.indexOf(":")!==-1;return e+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+t}},function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=n(23),i=n(8);t.exports=r,i(r.prototype),r.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,n){(function(t){function r(t,n){var r="b"+e.packets[t.type]+t.data.data;return n(r)}function o(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}function i(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,n,!0,r)},o.readAsArrayBuffer(t.data)}function s(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(g)return i(t,n,r);var o=new Uint8Array(1);o[0]=v[t.type];var s=new k([o.buffer,t.data]);return r(s)}function a(t){try{t=d.decode(t,{strict:!1})}catch(e){return!1}return t}function c(t,e,n){for(var r=new Array(t.length),o=l(t.length,n),i=function(t,n,o){e(n,function(e,n){r[t]=n,o(e,r)})},s=0;s<t.length;s++)i(s,t[s],o)}var p,u=n(24),h=n(9),f=n(25),l=n(26),d=n(27);t&&t.ArrayBuffer&&(p=n(29));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),m="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=y||m;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=u(v),w={type:"error",data:"parser error"},k=n(30);e.encodePacket=function(e,n,i,a){"function"==typeof n&&(a=n,n=!1),"function"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,n,a);if(k&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return r(e,a);var p=v[e.type];return void 0!==e.data&&(p+=i?d.encode(String(e.data),{strict:!1}):String(e.data)),a(""+p)},e.encodeBase64Packet=function(n,r){var o="b"+e.packets[n.type];if(k&&n.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];r(o+t)},i.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(a){for(var c=new Uint8Array(n.data),p=new Array(c.length),u=0;u<c.length;u++)p[u]=c[u];s=String.fromCharCode.apply(null,p)}return o+=t.btoa(s),r(o)},e.decodePacket=function(t,n,r){if(void 0===t)return w;if("string"==typeof t){if("b"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&(t=a(t),t===!1))return w;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:w}var i=new Uint8Array(t),o=i[0],s=f(t,1);return k&&"blob"===n&&(s=new k([s])),{type:b[o],data:s}},e.decodeBase64Packet=function(t,e){var n=b[t.charAt(0)];if(!p)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=p.decode(t.substr(1));return"blob"===e&&k&&(r=new k([r])),{type:n,data:r}},e.encodePayload=function(t,n,r){function o(t){return t.length+":"+t}function i(t,r){e.encodePacket(t,!!s&&n,!1,function(t){r(null,o(t))})}"function"==typeof n&&(r=n,n=null);var s=h(t);return n&&s?k&&!g?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void c(t,i,function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,n,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,n,r);"function"==typeof n&&(r=n,n=null);var o;if(""===t)return r(w,0,1);for(var i,s,a="",c=0,p=t.length;c<p;c++){var u=t.charAt(c);if(":"===u){if(""===a||a!=(i=Number(a)))return r(w,0,1);if(s=t.substr(c+1,i),a!=s.length)return r(w,0,1);if(s.length){if(o=e.decodePacket(s,n,!1),w.type===o.type&&w.data===o.data)return r(w,0,1);var h=r(o,c+i,p);if(!1===h)return}c+=i,a=""}else a+=u}return""!==a?r(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})}return t.length?void c(t,r,function(t,e){var r=e.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return e.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}e?o[i++]=0:o[i++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);t=r.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var c=new k([e.buffer,a.buffer,t]);n(null,c)}})}c(t,r,function(t,e){return n(new k(e))})},e.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var o=t,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],c="",p=1;255!==s[p];p++){if(c.length>310)return r(w,0,1);c+=s[p]}o=f(o,2+c.length),c=parseInt(c);var u=f(o,0,c);if(a)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(h){var l=new Uint8Array(u);u="";for(var p=0;p<l.length;p++)u+=String.fromCharCode(l[p])}i.push(u),o=f(o,c)}var d=i.length;i.forEach(function(t,o){r(e.decodePacket(t,n,!0),o,d)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){function n(t,e,n){function o(t,r){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(i=!0,e(t),e=n):0!==o.count||i||e(null,r)}var i=!1;return n=n||r,o.count=t,0===t?e():o}function r(){}t.exports=n},function(t,e,n){var r;(function(t,o){!function(i){function s(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function a(t){for(var e,n=t.length,r=-1,o="";++r<n;)e=t[r],e>65535&&(e-=65536,o+=w(e>>>10&1023|55296),e=56320|1023&e),o+=w(e);return o}function c(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function p(t,e){return w(t>>e&63|128)}function u(t,e){if(0==(4294967168&t))return w(t);var n="";return 0==(4294965248&t)?n=w(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),n=w(t>>12&15|224),n+=p(t,6)):0==(4292870144&t)&&(n=w(t>>18&7|240),n+=p(t,12),n+=p(t,6)),n+=w(63&t|128)}function h(t,e){e=e||{};for(var n,r=!1!==e.strict,o=s(t),i=o.length,a=-1,c="";++a<i;)n=o[a],c+=u(n,r);return c}function f(){if(b>=v)throw Error("Invalid byte index");var t=255&g[b];if(b++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(t){var e,n,r,o,i;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(e=255&g[b],b++,0==(128&e))return e;if(192==(224&e)){if(n=f(),i=(31&e)<<6|n,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if(n=f(),r=f(),i=(15&e)<<12|n<<6|r,i>=2048)return c(i,t)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(n=f(),r=f(),o=f(),i=(7&e)<<18|n<<12|r<<6|o,i>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}function d(t,e){e=e||{};var n=!1!==e.strict;g=s(t),v=g.length,b=0;for(var r,o=[];(r=l(n))!==!1;)o.push(r);return a(o)}var y="object"==typeof e&&e,m=("object"==typeof t&&t&&t.exports==y&&t,"object"==typeof o&&o);m.global!==m&&m.window!==m||(i=m);var g,v,b,w=String.fromCharCode,k={version:"2.1.2",encode:h,decode:d};r=function(){return k}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(28)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),o=r.length,i="";for(n=0;n<o;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+"=":o%3===1&&(i=i.substring(0,i.length-2)+"=="),i},e.decode=function(t){var e,r,o,i,s,a=.75*t.length,c=t.length,p=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(e=0;e<c;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],h[p++]=r<<2|o>>4,h[p++]=(15&o)<<4|i>>2,h[p++]=(3&i)<<6|63&s;return u}}()},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}t[e]=r}}}function r(t,e){e=e||{};var r=new i;n(t);for(var o=0;o<t.length;o++)r.append(t[o]);return e.type?r.getBlob(e.type):r.getBlob()}function o(t,e){return n(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(e){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?r:void 0}()}).call(e,function(){return this}())},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){"use strict";function n(t){var e="";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function r(t){var e=0;for(u=0;u<t.length;u++)e=e*a+c[t.charAt(u)];return e}function o(){var t=n(+new Date);return t!==i?(p=0,i=t):t+"."+n(p++)}for(var i,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},p=0,u=0;u<a;u++)c[s[u]]=u;o.encode=n,o.decode=r,t.exports=o},function(t,e,n){(function(e){function r(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){n.script&&(n.script.onerror=r)},!1)}var i=n(21),s=n(32);t.exports=o;var a,c=/\n/g,p=/\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(e)}catch(t){i=document.createElement("iframe"),i.name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=u,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(p,"\\\n"),this.area.value=t.replace(c,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=h&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(l=o),i.call(this,t)}var o,i=n(22),s=n(23),a=n(31),c=n(32),p=n(33),u=n(3)("engine.io-client:websocket"),h=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{o=n(36)}catch(f){}var l=h;l||"undefined"!=typeof window||(l=o),t.exports=r,c(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new l(t,e):new l(t):new l(t,e,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},r.prototype.write=function(t){function n(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var o=t.length,i=0,a=o;i<a;i++)!function(t){s.encodePacket(t,r.supportsBinary,function(i){if(!r.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),r.perMessageDeflate){var a="string"==typeof i?e.Buffer.byteLength(i):i.length;a<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,s)}catch(c){u("websocket closed before onclose event")}--o||n()})}(t[i])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=p()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t="?"+t);var r=this.hostname.indexOf(":")!==-1;return e+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+t},r.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===r.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(s,"").replace(a,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(o,"]").replace(i,""))?new Function("return "+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(7),s=n(8),a=n(40),c=n(41),p=n(42),u=n(3)("socket.io-client:socket"),h=n(31);t.exports=e=r;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},l=s.prototype.emit;s(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[c(t,"open",p(this,"onopen")),c(t,"packet",p(this,"onpacket")),c(t,"close",p(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(f.hasOwnProperty(t))return l.apply(this,arguments),this;var e=a(arguments),n={type:i.EVENT,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var t="object"===o(this.query)?h.encode(this.query):this.query;u("sending connect packet with query %s",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},r.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?l.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);u("sending ack %j",r),e.packet({type:i.ACK,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)l.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function n(t,e){var n=[];e=e||0;for(var r=e||0;r<t.length;r++)n[r-e]=t[r];return n}t.exports=n},function(t,e){"use strict";function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}t.exports=n},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}}])});;;;var CCC=CCC||{};CCC.STATIC=CCC.STATIC||{};CCC.STATIC.BASEIMAGEPATH="https://images.cryptocompare.com/"
CCC.STATIC.TYPE={'TRADE':'0','FEEDNEWS':'1','CURRENT':'2','LOADCOMPLATE':'3','COINPAIRS':'4','CURRENTAGG':'5','TOPLIST':'6','TOPLISTCHANGE':'7','ORDERBOOK':'8','FULLORDERBOOK':'9','ACTIVATION':'10','FULLVOLUME':'11','TRADECATCHUP':'100','NEWSCATCHUP':'101','TRADECATCHUPCOMPLETE':'300','NEWSCATCHUPCOMPLETE':'301','UNAUTHORIZED':'401'};CCC.STATIC.CURRENCY=CCC.STATIC.CURRENCY||{};CCC.STATIC.CURRENCY.SYMBOL={'BTC':'Ƀ','LTC':'Ł','DAO':'Ð','USD':'$','CNY':'¥','EUR':'€','GBP':'£','JPY':'¥','PLN':'zł','RUB':'₽','ETH':'Ξ','GOLD':'Gold g','INR':'₹','BRL':'R$','KRW':'₩','RUR':'₽'};CCC.STATIC.CURRENCY.getSymbol=function(symbol){if(CCC.STATIC.CURRENCY.SYMBOL[symbol]!==undefined){return CCC.STATIC.CURRENCY.SYMBOL[symbol];}
return symbol;};CCC.STATIC.UTIL={chartColors:{Green:{Title:"Green",Hex:"#5cb85c"},Red:{Title:"Red",Hex:"#A11B0A"},Blue:{Title:"Blue",Hex:"#006098"},Black:{Title:"Black",Hex:"#000000"},Orange:{Title:"Orange",Hex:"#F89017"},DarkGreen:{Title:"Dark Green",Hex:"#398439"},LighRed:{Title:"Light Red",Hex:"#D44E3D"},DarkBlue:{Title:"Dark Blue",Hex:"#002387"},Yellow:{Title:"Yellow",Hex:"#FFF700"},White:{Title:"White",Hex:"#FFFFFF"}},exchangeNameMapping:{'CCCAGG':'CryptoCompare Index','BTCChina':'BTCC','GDAX':'Coinbase'},isMobile:function(userAgent){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(userAgent.substr(0,4)))
return true;return false;},convertToMB:function(bytes){return(parseInt(bytes,10)/1024/1024).toFixed(2)+' MB';},getNameForExchange:function(exchangeName){if(this.exchangeNameMapping.hasOwnProperty(exchangeName)){return this.exchangeNameMapping[exchangeName];}
return exchangeName;},noExponents:function(value){var data=String(value).split(/[eE]/);if(data.length==1)return data[0];var z='',sign=value<0?'-':'',str=data[0].replace('.',''),mag=Number(data[1])+1;if(mag<0){z=sign+'0.';while(mag++)z+='0';return z+str.replace(/^\-/,'');}
mag-=str.length;while(mag--)z+='0';return str+z;},reduceFloatVal:function(value){value=parseFloat(value);var absValue=Math.abs(value);if(absValue>1){value=Math.round(value*100)/100;return value;}
if(absValue>=0.00001000){return parseFloat(value.toPrecision(4));}
if(absValue>=0.00000100){return parseFloat(value.toPrecision(3));}
if(absValue>=0.00000010){return parseFloat(value.toPrecision(2));}
return parseFloat(value.toPrecision(1));},reduceReal:function(value){value=parseFloat(value);return parseFloat(value.toFixed(8));},convertCurrentKeyToAll:function(key){var valuesArray=key.split("~");valuesArray[0]=CCC.STATIC.TYPE.CURRENTAGG;valuesArray[1]='CCCAGG';return valuesArray.join('~');},convertCurrentKeyToTrade:function(key){var valuesArray=key.split("~");valuesArray[0]=CCC.STATIC.TYPE.TRADE;return valuesArray.join('~');},convertValueToDisplay:function(symbol,value,filterNumberFunctionAngularJS,type,fullNumbers){var prefix='';var valueSign=1;value=parseFloat(value);var valueAbs=Math.abs(value);var decimalsOnBigNumbers=2;var decimalsOnNormalNumbers=2;var decimalsOnSmallNumbers=4;if(fullNumbers===true){decimalsOnBigNumbers=2;decimalsOnNormalNumbers=0;decimalsOnSmallNumbers=4;}
if(type=="8decimals"){decimalsOnBigNumbers=4;decimalsOnNormalNumbers=8;decimalsOnSmallNumbers=8;if(value<0.0001&&value>=0.00001){decimalsOnSmallNumbers=4;}
if(value<0.001&&value>=0.0001){decimalsOnSmallNumbers=5;}
if(value<0.01&&value>=0.001){decimalsOnSmallNumbers=6;}
if(value<0.1&&value>=0.01){decimalsOnSmallNumbers=7;}}
if(symbol!=''){prefix=symbol+' ';}
if(value<0){valueSign=-1;}
if(value==0){return prefix+'0';}
if(value<0.00001000&&value>=0.00000100&&decimalsOnSmallNumbers>3){decimalsOnSmallNumbers=3;}
if(value<0.00000100&&value>=0.00000010&&decimalsOnSmallNumbers>2){decimalsOnSmallNumbers=2;}
if(value<0.00000010&&decimalsOnSmallNumbers>1){decimalsOnSmallNumbers=1;}
if(type=="short"||type=="8decimals"){if(valueAbs>1000000000){valueAbs=valueAbs/1000000000;return prefix+filterNumberFunctionAngularJS(valueSign*valueAbs,decimalsOnBigNumbers)+' B';}
if(valueAbs>1000000){valueAbs=valueAbs/1000000;return prefix+filterNumberFunctionAngularJS(valueSign*valueAbs,decimalsOnBigNumbers)+' M';}
if(valueAbs>10000){valueAbs=valueAbs/1000;return prefix+filterNumberFunctionAngularJS(valueSign*valueAbs,decimalsOnBigNumbers)+' k';}
if(type=="8decimals"&&valueAbs>=100){return prefix+filterNumberFunctionAngularJS(valueSign*valueAbs,decimalsOnBigNumbers);}
if(valueAbs>=1){return prefix+filterNumberFunctionAngularJS(valueSign*valueAbs,decimalsOnNormalNumbers);}
return prefix+(valueSign*valueAbs).toPrecision(decimalsOnSmallNumbers);}else{if(valueAbs>=1){return prefix+filterNumberFunctionAngularJS(valueSign*valueAbs,decimalsOnNormalNumbers);}
return prefix+this.noExponents((valueSign*valueAbs).toPrecision(decimalsOnSmallNumbers));}}};CCC.TRADE=CCC.TRADE||{};CCC.TRADE.FLAGS={'SELL':0x1,'BUY':0x2,'UNKNOWN':0x4}
CCC.TRADE.FIELDS={'T':0x0,'M':0x0,'FSYM':0x0,'TSYM':0x0,'F':0x0,'ID':0x1,'TS':0x2,'Q':0x4,'P':0x8,'TOTAL':0x10};CCC.TRADE.DISPLAY=CCC.TRADE.DISPLAY||{};CCC.TRADE.DISPLAY.FIELDS={'T':{"Show":false},'M':{"Show":true,'Filter':'Market'},'FSYM':{"Show":true,'Filter':'CurrencySymbol'},'TSYM':{"Show":true,'Filter':'CurrencySymbol'},'F':{"Show":true,'Filter':'TradeFlag'},'ID':{"Show":true,'Filter':'Text'},'TS':{'Show':true,'Filter':'Date','Format':'yyyy MMMM dd HH:mm:ss'},'Q':{'Show':true,'Filter':'Number','Symbol':'FSYM'},'P':{'Show':true,'Filter':'Number','Symbol':'TSYM'},'TOTAL':{'Show':true,'Filter':'Number','Symbol':'TSYM'}};CCC.TRADE.pack=function(tradeObject){var mask=0;var packedTrade='';for(var field in tradeObject){packedTrade+='~'+tradeObject[field];mask|=this.FIELDS[field];}
return packedTrade.substr(1)+'~'+mask.toString(16);};CCC.TRADE.unpack=function(tradeString){var valuesArray=tradeString.split("~");var valuesArrayLenght=valuesArray.length;var mask=valuesArray[valuesArrayLenght-1];var maskInt=parseInt(mask,16);var unpackedTrade={};var currentField=0;for(var property in this.FIELDS){if(this.FIELDS[property]===0)
{unpackedTrade[property]=valuesArray[currentField];currentField++;}
else if(maskInt&this.FIELDS[property])
{unpackedTrade[property]=valuesArray[currentField];currentField++;}}
return unpackedTrade;}
CCC.TRADE.getKey=function(tradeObject){return tradeObject['T']+'~'+tradeObject['M']+'~'+tradeObject['FSYM']+'~'+tradeObject['TSYM'];};CCC.CURRENT=CCC.CURRENT||{};CCC.CURRENT.FLAGS={'PRICEUP':0x1,'PRICEDOWN':0x2,'PRICEUNCHANGED':0x4,'BIDUP':0x8,'BIDDOWN':0x10,'BIDUNCHANGED':0x20,'OFFERUP':0x40,'OFFERDOWN':0x80,'OFFERUNCHANGED':0x100,'AVGUP':0x200,'AVGDOWN':0x400,'AVGUNCHANGED':0x800};CCC.CURRENT.FIELDS={'TYPE':0x0,'MARKET':0x0,'FROMSYMBOL':0x0,'TOSYMBOL':0x0,'FLAGS':0x0,'PRICE':0x1,'BID':0x2,'OFFER':0x4,'LASTUPDATE':0x8,'AVG':0x10,'LASTVOLUME':0x20,'LASTVOLUMETO':0x40,'LASTTRADEID':0x80,'VOLUMEDAY':0x100,'VOLUMEDAYTO':0x200,'VOLUME24HOUR':0x400,'VOLUME24HOURTO':0x800,'OPENDAY':0x1000,'HIGHDAY':0x2000,'LOWDAY':0x4000,'OPEN24HOUR':0x8000,'HIGH24HOUR':0x10000,'LOW24HOUR':0x20000,'LASTMARKET':0x40000};CCC.CURRENT.FIELDSOPERATION={'TYPE':{'Multiply':{'Op':'obj1','Field':'TYPE'},'Divide':{'Op':'obj1','Field':'TYPE'},'Invert':{'Op':'obj1','Field':'TYPE'}},'MARKET':{'Multiply':{'Op':'obj1','Field':'MARKET'},'Divide':{'Op':'obj1','Field':'MARKET'},'Invert':{'Op':'obj1','Field':'MARKET'}},'FROMSYMBOL':{'Multiply':{'Op':'obj1','Field':'FROMSYMBOL'},'Divide':{'Op':'obj1','Field':'FROMSYMBOL'},'Invert':{'Op':'obj1','Field':'TOSYMBOL'}},'TOSYMBOL':{'Multiply':{'Op':'obj2','Field':'TOSYMBOL'},'Divide':{'Op':'obj2','Field':'FROMSYMBOL'},'Invert':{'Op':'obj1','Field':'FROMSYMBOL'}},'FLAGS':{'Multiply':{'Op':'obj1','Field':'FLAGS'},'Divide':{'Op':'obj1','Field':'FLAGS'},'Invert':{'Op':'obj1','Field':'FLAGS'}},'PRICE':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'PRICE'}},'BID':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'BID'}},'OFFER':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'OFFER'}},'LASTUPDATE':{'Multiply':{'Op':'obj2','Field':'LASTUPDATE'},'Divide':{'Op':'obj1','Field':'LASTUPDATE'},'Invert':{'Op':'obj1','Field':'LASTUPDATE'}},'AVG':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'AVG'}},'LASTVOLUME':{'Multiply':{'Op':'NotAplicable'},'Divide':{'Op':'NotAplicable'},'Invert':{'Op':'NotAplicable'}},'LASTVOLUMETO':{'Multiply':{'Op':'NotAplicable'},'Divide':{'Op':'NotAplicable'},'Invert':{'Op':'NotAplicable'}},'LASTTRADEID':{'Multiply':{'Op':'NotAplicable'},'Divide':{'Op':'NotAplicable'},'Invert':{'Op':'NotAplicable'}},'VOLUMEDAY':{'Multiply':{'Op':'NotAplicable'},'Divide':{'Op':'NotAplicable'},'Invert':{'Op':'NotAplicable'}},'VOLUMEDAYTO':{'Multiply':{'Op':'NotAplicable'},'Divide':{'Op':'NotAplicable'},'Invert':{'Op':'NotAplicable'}},'VOLUME24HOUR':{'Multiply':{'Op':'Volume24H'},'Divide':{'Op':'NotAplicable'},'Invert':{'Op':'obj1','Field':'VOLUME24HOURTO'}},'VOLUME24HOURTO':{'Multiply':{'Op':'Volume24HTo'},'Divide':{'Op':'NotAplicable'},'Invert':{'Op':'obj1','Field':'VOLUME24HOUR'}},'OPENDAY':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'OPENDAY'}},'HIGHDAY':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'LOWDAY'}},'LOWDAY':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'HIGHDAY'}},'OPEN24HOUR':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'OPEN24HOUR'}},'HIGH24HOUR':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'LOW24HOUR'}},'LOW24HOUR':{'Multiply':{'Op':'multiply'},'Divide':{'Op':'divide'},'Invert':{'Op':'invert','Field':'HIGH24HOUR'}},'LASTMARKET':{'Multiply':{'Op':'obj1','Field':'LASTMARKET'},'Divide':{'Op':'obj1','Field':'LASTMARKET'},'Invert':{'Op':'obj1','Field':'LASTMARKET'}}};CCC.CURRENT.DISPLAY=CCC.CURRENT.DISPLAY||{};CCC.CURRENT.DISPLAY.FLAGSLINK={'PRICEUP':['PRICEDOWN','PRICEUNCHANGED'],'PRICEDOWN':['PRICEUP','PRICEUNCHANGED'],'PRICEUNCHANGED':['PRICEUP','PRICEDOWN'],'BIDUP':['BIDDOWN','BIDUNCHANGED'],'BIDDOWN':['BIDUP','BIDUNCHANGED'],'BIDUNCHANGED':['BIDUP','BIDDOWN'],'OFFERUP':['OFFERDOWN','OFFERUNCHANGED'],'OFFERDOWN':['OFFERUP','OFFERUNCHANGED'],'OFFERUNCHANGED':['OFFERUP','OFFERDOWN'],'AVGUP':['AVGDOWN','AVGUNCHANGED'],'AVGDOWN':['AVGUP','AVGUNCHANGED'],'AVGUNCHANGED':['AVGUP','AVGDOWN']};CCC.CURRENT.DISPLAY.FIELDS={'TYPE':{'Show':false,'Default':'5'},'MARKET':{'Show':true,'Filter':'Market','Default':'N/A'},'FROMSYMBOL':{'Show':false,'Default':'BTC'},'TOSYMBOL':{'Show':false,'Default':'BTC'},'FLAGS':{'Show':false,'Default':0},'PRICE':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'BID':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'OFFER':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'LASTUPDATE':{'Show':true,'Filter':'Date','Format':'yyyy MMMM dd HH:mm:ss','Default':Math.floor((new Date()).getTime()/1000)},'AVG':{'Show':true,' Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'LASTVOLUME':{'Show':true,'Filter':'Number','Symbol':'FROMSYMBOL','Default':0,'SortNumberAsWell':false},'LASTVOLUMETO':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':0,'SortNumberAsWell':false},'LASTTRADEID':{'Show':true,'Filter':'String','Default':0},'VOLUMEDAY':{'Show':true,'Filter':'Number','Symbol':'FROMSYMBOL','Default':0,'SortNumberAsWell':false},'VOLUMEDAYTO':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':0,'SortNumberAsWell':false},'VOLUME24HOUR':{'Show':true,'Filter':'Number','Symbol':'FROMSYMBOL','Default':0,'SortNumberAsWell':true},'VOLUME24HOURTO':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':0,'SortNumberAsWell':true},'OPENDAY':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'HIGHDAY':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'LOWDAY':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'OPEN24HOUR':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'HIGH24HOUR':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'LOW24HOUR':{'Show':true,'Filter':'Number','Symbol':'TOSYMBOL','Default':1,'SortNumberAsWell':false},'LASTMARKET':{'Show':true,'Filter':'String','Default':'N/A'}};CCC.CURRENT.pack=function(currentObject)
{var mask=0;var packedCurrent='';for(var property in this.FIELDS)
{if(currentObject.hasOwnProperty(property)){packedCurrent+='~'+currentObject[property];mask|=this.FIELDS[property];}}
return packedCurrent.substr(1)+'~'+mask.toString(16);};CCC.CURRENT.unpack=function(value)
{var valuesArray=value.split("~");var valuesArrayLenght=valuesArray.length;var mask=valuesArray[valuesArrayLenght-1];var maskInt=parseInt(mask,16);var unpackedCurrent={};var currentField=0;for(var property in this.FIELDS)
{if(this.FIELDS[property]===0)
{unpackedCurrent[property]=valuesArray[currentField];currentField++;}
else if(maskInt&this.FIELDS[property])
{if(property==='LASTMARKET'){unpackedCurrent[property]=valuesArray[currentField];}else{unpackedCurrent[property]=parseFloat(valuesArray[currentField]);}
currentField++;}}
return unpackedCurrent;};CCC.CURRENT.getKey=function(currentObject){return currentObject['TYPE']+'~'+currentObject['MARKET']+'~'+currentObject['FROMSYMBOL']+'~'+currentObject['TOSYMBOL'];};CCC.CURRENT.getKeyFromStreamerData=function(streamerData){var valuesArray=streamerData.split("~");return valuesArray[0]+'~'+valuesArray[1]+'~'+valuesArray[2]+'~'+valuesArray[3];};CCC.CURRENT.conversionInfoToObj=function(conversionInfo){var toSymbol=CCC.STATIC.CURRENCY.getSymbol(conversionInfo['CurrencyTo']);var fromSymbol=CCC.STATIC.CURRENCY.getSymbol(conversionInfo['CurrencyFrom']);var totalCoinsMined=conversionInfo['Supply'];var fullVolume=conversionInfo['FULLVOLUME'];var conversionType=conversionInfo['Conversion'];var objToReturn={};switch(conversionType){case"direct":objToReturn=CCC.CURRENT.unpack(conversionInfo.RAW[0]);break;case"multiply":var obj1=CCC.CURRENT.unpack(conversionInfo.RAW[0])
var obj2=CCC.CURRENT.unpack(conversionInfo.RAW[1]);objToReturn=CCC.CURRENT.multiply(obj1,obj2,obj1.VOLUME24HOUR);break;case"divide":var obj1=CCC.CURRENT.unpack(conversionInfo.RAW[0])
var obj2=CCC.CURRENT.unpack(conversionInfo.RAW[1]);objToReturn=CCC.CURRENT.divide(obj1,obj2);break;case"invert":objToReturn=CCC.CURRENT.invert(CCC.CURRENT.unpack(conversionInfo.RAW[0]));break;case"invert_divide":var obj1=CCC.CURRENT.unpack(conversionInfo.RAW[0])
var obj2=CCC.CURRENT.unpack(conversionInfo.RAW[1]);objToReturn=CCC.CURRENT.divide(CCC.CURRENT.invert(obj1),CCC.CURRENT.invert(obj2));}
objToReturn.FULLVOLUME=fullVolume;objToReturn.FULLVOLUMETO=fullVolume*objToReturn.PRICE;objToReturn.CHANGE24HOUR=objToReturn.PRICE-objToReturn.OPEN24HOUR;objToReturn.CHANGEPCT24HOUR=objToReturn.CHANGE24HOUR/objToReturn.OPEN24HOUR*100;if(totalCoinsMined>0){objToReturn.MKTCAP=objToReturn.PRICE*totalCoinsMined;}else{objToReturn.MKTCAP=0;}
return objToReturn;}
CCC.CURRENT.multiply=function(obj1,obj2,volume24H,volume24HTo){var newObject={};for(var property in this.FIELDSOPERATION){switch(this.FIELDSOPERATION[property].Multiply.Op){case'obj1':if(obj1.hasOwnProperty(this.FIELDSOPERATION[property].Multiply.Field)){newObject[property]=obj1[this.FIELDSOPERATION[property].Multiply.Field];}
break;case'obj2':if(obj2.hasOwnProperty(this.FIELDSOPERATION[property].Multiply.Field)){newObject[property]=obj2[this.FIELDSOPERATION[property].Multiply.Field];}
break;case'multiply':if(obj1.hasOwnProperty(property)&&obj2.hasOwnProperty(property)){var fullNumber=obj1[property]*obj2["PRICE"];var integerPart=Math.floor(fullNumber);var decimalPartWith4Significant=(fullNumber-integerPart).toPrecision(4).substr(1);newObject[property]=parseFloat(integerPart+decimalPartWith4Significant);}
break;case'NotAplicable':if(obj1.hasOwnProperty(property)){newObject[property]=0;}
break;case'Volume24H':newObject[property]=volume24H||0;break;case'Volume24HTo':newObject[property]=volume24HTo||0;break;case'highest':if(obj1.hasOwnProperty(property)&&obj2.hasOwnProperty(property)){if(obj1[property]>obj2[property]){newObject[property]=obj1[property];}else{newObject[property]=obj2[property];}}
break;}}
return newObject;};CCC.CURRENT.divide=function(obj1,obj2){var newObject={};for(var property in this.FIELDSOPERATION){switch(this.FIELDSOPERATION[property].Divide.Op){case'obj1':if(obj1.hasOwnProperty(this.FIELDSOPERATION[property].Divide.Field)){newObject[property]=obj1[this.FIELDSOPERATION[property].Divide.Field];}
break;case'obj2':if(obj2.hasOwnProperty(this.FIELDSOPERATION[property].Divide.Field)){newObject[property]=obj2[this.FIELDSOPERATION[property].Divide.Field];}
break;case'divide':if(obj1.hasOwnProperty(property)&&obj2.hasOwnProperty(property)){var fullNumber=obj1[property]/obj2["PRICE"];var integerPart=Math.floor(fullNumber);var decimalPartWith4Significant=(fullNumber-integerPart).toPrecision(4).substr(1);newObject[property]=integerPart+decimalPartWith4Significant;}
break;case'NotAplicable':if(obj1.hasOwnProperty(property)){newObject[property]=0;}
break;case'highest':if(obj1.hasOwnProperty(property)&&obj2.hasOwnProperty(property)){if(obj1[property]>obj2[property]){newObject[property]=obj1[property];}else{newObject[property]=obj2[property];}}
break;}}
return newObject;};CCC.CURRENT.invert=function(obj1){var newObject={};for(var property in this.FIELDSOPERATION){switch(this.FIELDSOPERATION[property].Invert.Op){case'obj1':if(obj1.hasOwnProperty(this.FIELDSOPERATION[property].Invert.Field)){newObject[property]=obj1[this.FIELDSOPERATION[property].Invert.Field];}
break;case'invert':if(obj1.hasOwnProperty(this.FIELDSOPERATION[property].Invert.Field)&&obj1[this.FIELDSOPERATION[property].Invert.Field]>0){var fullNumber=1/obj1[this.FIELDSOPERATION[property].Invert.Field];var integerPart=Math.floor(fullNumber);var decimalPartWith4Significant=(fullNumber-integerPart).toPrecision(4).substr(1);newObject[property]=parseFloat(integerPart+decimalPartWith4Significant);}else{newObject[property]=0;}
break;case'NotAplicable':if(obj1.hasOwnProperty(property)){newObject[property]=0;}
break;}}
return newObject;};CCC.ORDER=CCC.ORDER||{};CCC.ORDER.FLAGS={'ADD':0x1,'REMOVE':0x2,'CHANGE':0x4,'NOACTION':0x8};CCC.ORDER.SIDE={'BID':0x1,'ASK':0x2};CCC.ORDER.FIELDS={'T':0x0,'M':0x0,'FSYM':0x0,'TSYM':0x0,'S':0x0,'F':0x0,'SEQ':0x0,'P':0x0,'Q':0x0};CCC.ORDER.FIELDSNOKEY={'P':0x0,'Q':0x0};CCC.ORDER.DISPLAY=CCC.ORDER.DISPLAY||{};CCC.ORDER.DISPLAY.FIELDS={'T':{"Show":false,'Filter':'None'},'M':{"Show":true,'Filter':'Market'},'FSYM':{"Show":true,'Filter':'CurrencySymbol'},'TSYM':{"Show":true,'Filter':'CurrencySymbol'},'S':{"Show":true,'Filter':'Integer'},'F':{"Show":true,'Filter':'Integer'},'SEQ':{'Show':false,'Filter':'Integer'},'P':{'Show':true,'Filter':'Number','Symbol':'TSYM'},'Q':{'Show':true,'Filter':'Number','Symbol':'NONE'}};CCC.ORDER.pack=function(orderObject){var packedOrder='';for(var property in this.FIELDS){if(orderObject.hasOwnProperty(property)){packedOrder+='~'+orderObject[property];}}
return packedOrder.substr(1);};CCC.ORDER.packNoType=function(orderObject){var packedOrder='';for(var property in this.FIELDS){if(property=='T'){continue;}
if(orderObject.hasOwnProperty(property)){packedOrder+='~'+orderObject[property];}}
return packedOrder.substr(1);};CCC.ORDER.packNoKey=function(orderObject){var packedOrder='';for(var property in this.FIELDSNOKEY){if(orderObject.hasOwnProperty(property)){packedOrder+='~'+orderObject[property];}}
return packedOrder.substr(1);};CCC.ORDER.unpack=function(orderString){var valuesArray=orderString.split("~");var totalValues=valuesArray.length;var unpackedOrder={};var currentField=0;for(var property in this.FIELDS){if(this.FIELDS[property]===0&&currentField<totalValues){if(this.DISPLAY.FIELDS[property].Filter=='Number'){unpackedOrder[property]=parseFloat(valuesArray[currentField]);}else if(this.DISPLAY.FIELDS[property].Filter=='Integer'){unpackedOrder[property]=parseInt(valuesArray[currentField],10);}else{unpackedOrder[property]=valuesArray[currentField];}
currentField++;}}
return unpackedOrder;};CCC.ORDER.getKey=function(orderObject){return orderObject['T']+'~'+orderObject['M']+'~'+orderObject['FSYM']+'~'+orderObject['TSYM'];};CCC.ORDER.getOrderBookKey=function(orderObject){return orderObject['M']+'~'+orderObject['FSYM']+'~'+orderObject['TSYM'];};CCC.ORDER.unpackOrderBookKey=function(orderBookKey){var parts=orderBookKey.split('~');return{M:parts[0],FSYM:parts[1],TSYM:parts[2]};};CCC.ORDER.getObjectKey=function(orderObject){return orderObject['P']+'~'+orderObject['S'];};CCC.ORDER.getExchangeKey=function(orderObject){return orderObject['T']+'~'+orderObject['M'];};CCC.ORDER.getTypeText=function(orderObject){for(var property in this.FLAGS){if(this.FLAGS[property]===orderObject.F){return property;}}
return"N/A";};CCC.FULLVOLUME=CCC.FULLVOLUME||{};CCC.FULLVOLUME.FIELDS={'TYPE':0x0,'SYMBOL':0x0,'FULLVOLUME':0x0};CCC.FULLVOLUME.unpack=function(volStr){var valuesArray=volStr.split("~");var unpackedCurrent={};var currentField=0;var fields=this.FIELDS;for(var property in fields){if(fields[property]==0){if(property=='FULLVOLUME'){unpackedCurrent[property]=parseFloat(valuesArray[currentField]);}else{unpackedCurrent[property]=valuesArray[currentField];}
currentField++;}}
return unpackedCurrent;};CCC.FULLVOLUME.pack=function(volObj){var packedVol='';for(var property in volObj){packedVol+='~'+volObj[property];}
var strToReturn=packedVol.substr(1);return strToReturn;};CCC.FULLVOLUME.getKey=function(currentObject){return CCC.STATIC.TYPE.FULLVOLUME+'~'+currentObject['SYMBOL'];};CCC.NEWS=CCC.NEWS||{};CCC.NEWS.DATA={newsFeed:{'cryptocompare':{Name:'CryptoCompare',URL:'https://www.cryptocompare.com/api/external/newsletter/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/cryptocompare.png',list:[],tryToGetImage:false,isEnabled:true},'cryptoglobe':{Name:'CryptoGlobe',URL:'https://www.cryptoglobe.com/latest/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/cryptoglobe.png',list:[],tryToGetImage:true,isEnabled:true},'cryptonewsreview':{Name:'CryptoNewsReview',URL:'https://cryptonewsreview.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/cryptonewsreview.png',list:[],tryToGetImage:true,isEnabled:true},'coindesk':{Name:'CoinDesk',URL:'https://www.coindesk.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/coindesk.png',list:[],tryToGetImage:true,isEnabled:true},'bitcoinmagazine':{Name:'Bitcoin Magazine',URL:'https://bitcoinmagazine.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/bitcoinmagazine.png',list:[],tryToGetImage:true,isEnabled:true},'yahoofinance':{Name:'Yahoo Finance Bitcoin',URL:'https://feeds.finance.yahoo.com/rss/2.0/headline?s=btc&region=US&lang=en-US',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/yahoofinance.png',list:[],tryToGetImage:true,isEnabled:true},'ccn':{Name:'CCN',URL:'https://www.ccn.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/ccn.png',list:[],tryToGetImage:true,isEnabled:true},'financemagnates':{Name:'Finance Magnates',URL:'https://www.financemagnates.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/financemagnates.png',list:[],filterTags:['bitcoin','cryptocurrencies','cryptos','crypto','dash','Monero','Zcash','IOTA','binance','cryptocurrency','crypto exchange','blockchain'],tryToGetImage:true,isEnabled:true},'espaciobit':{Name:'EspacioBit',URL:'http://feeds.feedburner.com/Espaciobit?format=xml',Timeout:5*1000,LANG:'PT',defaultImage:'https://images.cryptocompare.com/news/default/espaciobit.png',list:[],tryToGetImage:true,isEnabled:true},'99bitcoins':{Name:'99bitcoins',URL:'https://99bitcoins.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/99bitcoins.png',list:[],tryToGetImage:true,isEnabled:true},'bitcoinist':{Name:'Bitcoinist',URL:'https://bitcoinist.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/bitcoinist.png',list:[],tryToGetImage:true,isEnabled:true},'bitcoin.com':{Name:'Bitcoin.com',URL:'https://news.bitcoin.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/bitcoincom.png',list:[],tryToGetImage:true,isEnabled:true},'ethnews.com':{Name:'ETHNews.com',URL:'https://www.ethnews.com/rss.xml',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/ethnews.png',list:[],tryToGetImage:true,isEnabled:true},'cointelegraph':{Name:'CoinTelegraph',URL:'https://cointelegraph.com/rss',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/cointelegraph.png',list:[],tryToGetImage:true,isEnabled:true},'cryptovest':{Name:'CryptoVest',URL:'https://cryptovest.org/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/cryptovest.png',list:[],tryToGetImage:true,isEnabled:true},'cryptoinsider':{Name:'CryptoInsider',URL:'https://cryptoinsider.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/cryptoinsider.png',list:[],tryToGetImage:true,isEnabled:false},'livebitcoinnews':{Name:'Live Bitcoin News',URL:'http://www.livebitcoinnews.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/livebitcoinnews.png',list:[],tryToGetImage:true,isEnabled:true},'newsbtc':{Name:'NewsBTC',URL:'http://www.newsbtc.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/newsbtc.png',list:[],tryToGetImage:true,isEnabled:true},'coinspeaker':{Name:'CoinSpeaker',URL:'https://www.coinspeaker.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/coinspeaker.png',list:[],tryToGetImage:true,isEnabled:true},'coinjoker':{Name:'CoinJoker',URL:'https://coinjoker.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/coinjoker.png',list:[],tryToGetImage:true,isEnabled:false},'trustnodes':{Name:'TrustNodes',URL:'http://www.trustnodes.com/feed',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/trustnodes.png',list:[],tryToGetImage:true,isEnabled:true},'themerkle':{Name:'NullTx',URL:'https://nulltx.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/nulltx.png',list:[],tryToGetImage:true,isEnabled:true},'cryptocoremedia':{Name:'Crypto CoreMedia',URL:'https://cryptocoremedia.com/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/coremedia.png',list:[],tryToGetImage:true,isEnabled:true},'cryptopotato':{Name:'Crypto Potato',URL:'https://cryptopotato.com/category/crypto-news/feed/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/cryptopotato.png',list:[],tryToGetImage:true,isEnabled:true},'coinnounce':{Name:'Coinnounce',URL:'https://coinnounce.com/feed/atom/',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/coinnounce.png',list:[],tryToGetImage:true,isEnabled:true},'blokt':{Name:'Blokt',URL:'https://blokt.com/feed',Timeout:5*1000,LANG:'EN',defaultImage:'https://images.cryptocompare.com/news/default/blokt.png',list:[],tryToGetImage:true,isEnabled:true}},acceptedNewsCategories:[{'categoryName':'BTC','wordsAssociatedWithCategory':['BTC','BITCOIN','SATOSHI']},{'categoryName':'ETH','wordsAssociatedWithCategory':['ETH','ETHEREUM','VITALIK','FOUNDATION']},{'categoryName':'LTC','wordsAssociatedWithCategory':['LTC','LITECOIN']},{'categoryName':'XMR','wordsAssociatedWithCategory':['XMR','MONERO']},{'categoryName':'ZEC','wordsAssociatedWithCategory':['ZEC','ZCASH']},{'categoryName':'ETC','wordsAssociatedWithCategory':['ETC','ETHEREUMCLASSIC']},{'categoryName':'XRP','wordsAssociatedWithCategory':['XRP','RIPPLE']},{'categoryName':'TRX','wordsAssociatedWithCategory':['TRX','TRONIX']},{'categoryName':'ADA','wordsAssociatedWithCategory':['ADA','CARDANO']},{'categoryName':'DASH','wordsAssociatedWithCategory':['DASH','DIGITALCASH']},{'categoryName':'XTZ','wordsAssociatedWithCategory':['XTZ','TEZOZ']},{'categoryName':'USDT','wordsAssociatedWithCategory':['USDT','TETHER']},{'categoryName':'Mining','wordsAssociatedWithCategory':['MINING','HASHRATE','HASHING','POOLS','REWARD']},{'categoryName':'Exchange','wordsAssociatedWithCategory':['EXCHANGE','BITFINEX','POLONIEX','BINANCE']},{'categoryName':'Market','wordsAssociatedWithCategory':['MARKET','MARKETS','ANALYSIS','INDEX','PRICES']},{'categoryName':'Asia','wordsAssociatedWithCategory':['ASIA','CHINA','KOREA','JAPAN','HONG','SINGAPORE','TAIWAN']},{'categoryName':'ICO','wordsAssociatedWithCategory':['ICOS','ICO','OFFERING','TOKEN','TOKENS','RAISE','RAISED']},{'categoryName':'Regulation','wordsAssociatedWithCategory':['REGULATION','LEGAL','LAW','TAX','TAXES','SENATE','LEGISLATION','PRESIDENT','TREASURY','SEC','BOE']},{'categoryName':'Blockchain','wordsAssociatedWithCategory':['BLOCKCHAIN','PROTOCOL','SCALING']},{'categoryName':'Trading','wordsAssociatedWithCategory':['TECHNICAL','TRADING','FUNDAMENTALS','PRICE','BULL','BEAR','BULLISH','BEARISH','RALLY']},{'categoryName':'Technology','wordsAssociatedWithCategory':['SOFTWARE','TECHNOLOGY','TECH']},{'categoryName':'Wallet','wordsAssociatedWithCategory':['LEDGER','TREZOR','KEEPKEY','COINOMI','JAXX','MYETHERWALLET']},{'categoryName':'Altcoin','wordsAssociatedWithCategory':['ALTCOIN','ALTCOINS']},{'categoryName':'Fiat','wordsAssociatedWithCategory':['FIAT','RESERVE','GOLD','GOLD-BACKED','BANK','DOLLAR','POUND','EURO','YEN']},{'categoryName':'Business','wordsAssociatedWithCategory':['BUSINESS','INVESTOR','INVESTORS','REVENUE','PROFIT','ENTERPRISE','COMMERCE','STOCK']},{'categoryName':'Commodity','wordsAssociatedWithCategory':['COMMODITIES','OIL','OIL-BACKED']},{'categoryName':'Sponsored','wordsAssociatedWithCategory':['SPONSORED','FEATURED','PRESS RELEASE']}],defaultNewsApiParams:{'feeds':'ALL_NEWS_FEEDS','categories':'ALL_NEWS_CATEGORIES','excludeCategories':'NO_EXCLUDED_NEWS_CATEGORIES'},newsFilters:{'feeds':{'name':'Feeds','headerText':'News Feeds','urlParam':'feeds','filterType':'feeds','buttonText':'Reset News Feeds'},'categories':{'name':'Include','headerText':'Categories','urlParam':'categories','filterType':'categories','buttonText':'Reset'},'excludeCategories':{'name':'Exclude','headerText':'Exclude','urlParam':'excludeCategories','filterType':'categories','buttonText':'Reset'}},newsUserActions:{2:{'name':'Downvote','key':'downvotes','userActionNumber':2,'className':'news-downvote','actionSelectedSymbol':'fa-thumbs-down','actionNotSelectedSymbol':'fa-thumbs-o-down','oppositeAction':'upvotes'},1:{'name':'Upvote','key':'upvotes','userActionNumber':1,'className':'news-upvote','actionSelectedSymbol':'fa-thumbs-up','actionNotSelectedSymbol':'fa-thumbs-o-up','oppositeAction':'downvotes'}},newsSortOrders:{'latest':{sortOrderName:'Latest News Articles',urlParam:'latest'},'popular':{sortOrderName:'Most Popular Articles',urlParam:'popular'}}};CCC.COUNTRYINFO=CCC.COUNTRYINFO||{};CCC.COUNTRYINFO.data={"AF":{"Timezone":"(UTC+04:30) Kabul","DisplayName":"Afghanistan","Currency":["AFN"],"TimeDifferenceFromUTCInMinutes":240},"AX":{"Timezone":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","DisplayName":"Aland Islands","TimeDifferenceFromUTCInMinutes":120},"AL":{"Timezone":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","DisplayName":"Albania","TimeDifferenceFromUTCInMinutes":60},"DZ":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Algeria","TimeDifferenceFromUTCInMinutes":60},"AS":{"Timezone":"(UTC-11:00) Coordinated Universal Time -11","DisplayName":"American Samoa","TimeDifferenceFromUTCInMinutes":-660},"AD":{"Timezone":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","DisplayName":"Andorra","TimeDifferenceFromUTCInMinutes":60},"AO":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Angola","TimeDifferenceFromUTCInMinutes":60},"AI":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Anguilla","TimeDifferenceFromUTCInMinutes":-240},"AQ":{"Timezone":"(UTC+07:00) Novosibirsk","DisplayName":"Antarctica","TimeDifferenceFromUTCInMinutes":420},"AG":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Antigua and Barbuda","TimeDifferenceFromUTCInMinutes":-240},"AR":{"Timezone":"(UTC-03:00) Buenos Aires","DisplayName":"Argentina","TimeDifferenceFromUTCInMinutes":-180},"AM":{"Timezone":"(UTC+04:00) Yerevan","DisplayName":"Armenia","TimeDifferenceFromUTCInMinutes":240},"AW":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Aruba","TimeDifferenceFromUTCInMinutes":-240},"AU":{"Timezone":"(UTC+10:00) Canberra, Melbourne, Sydney","DisplayName":"Australia","TimeDifferenceFromUTCInMinutes":600},"AT":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Austria","TimeDifferenceFromUTCInMinutes":60},"AZ":{"Timezone":"(UTC+04:00) Baku","DisplayName":"Azerbaijan","TimeDifferenceFromUTCInMinutes":240},"BS":{"Timezone":"(UTC-05:00) Eastern Time (US and Canada)","DisplayName":"Bahamas","TimeDifferenceFromUTCInMinutes":-300},"BH":{"Timezone":"(UTC+03:00) Kuwait, Riyadh","DisplayName":"Bahrain","TimeDifferenceFromUTCInMinutes":180},"BD":{"Timezone":"(UTC+06:00) Dhaka","DisplayName":"Bangladesh","TimeDifferenceFromUTCInMinutes":360},"BB":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Barbados","TimeDifferenceFromUTCInMinutes":-240},"BY":{"Timezone":"(UTC+02:00) Minsk","DisplayName":"Belarus","TimeDifferenceFromUTCInMinutes":120},"BE":{"Timezone":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","DisplayName":"Belgium","TimeDifferenceFromUTCInMinutes":60},"BZ":{"Timezone":"(UTC-06:00) Central America","DisplayName":"Belize","TimeDifferenceFromUTCInMinutes":-360},"BJ":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Benin","TimeDifferenceFromUTCInMinutes":60},"BM":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Bermuda","TimeDifferenceFromUTCInMinutes":-240},"BT":{"Timezone":"(UTC+06:00) Astana","DisplayName":"Bhutan","TimeDifferenceFromUTCInMinutes":360},"BO":{"Timezone":"(UTC-04:00) Cuiaba","DisplayName":"Bolivia","TimeDifferenceFromUTCInMinutes":-240},"BQ":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Bonaire, Saint Eustatius and Saba","TimeDifferenceFromUTCInMinutes":-240},"BA":{"Timezone":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","DisplayName":"Bosnia and Herzegovina","TimeDifferenceFromUTCInMinutes":60},"BW":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Botswana","TimeDifferenceFromUTCInMinutes":120},"BV":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Bouvet Island","TimeDifferenceFromUTCInMinutes":0},"BR":{"Timezone":"(UTC-03:00) Brasilia","DisplayName":"Brazil","TimeDifferenceFromUTCInMinutes":-180},"IO":{"Timezone":"(UTC+06:00) Astana","DisplayName":"British Indian Ocean Territory","TimeDifferenceFromUTCInMinutes":360},"BN":{"Timezone":"(UTC+08:00) Kuala Lumpur, Singapore","DisplayName":"Brunei Darussalam","TimeDifferenceFromUTCInMinutes":480},"BG":{"Timezone":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","DisplayName":"Bulgaria","TimeDifferenceFromUTCInMinutes":120},"BF":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Burkina Faso","TimeDifferenceFromUTCInMinutes":0},"BI":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Burundi","TimeDifferenceFromUTCInMinutes":120},"KH":{"Timezone":"(UTC+07:00) Bangkok, Hanoi, Jakarta","DisplayName":"Cambodia","TimeDifferenceFromUTCInMinutes":420},"CM":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Cameroon","TimeDifferenceFromUTCInMinutes":60},"CA":{"Timezone":"(UTC-05:00) Eastern Time (US and Canada)","DisplayName":"Canada","TimeDifferenceFromUTCInMinutes":-300},"CV":{"Timezone":"(UTC-01:00) Cabo Verde Is.","DisplayName":"Cape Verde","TimeDifferenceFromUTCInMinutes":-60},"KY":{"Timezone":"(UTC-05:00) Eastern Time (US and Canada)","DisplayName":"Cayman Islands","TimeDifferenceFromUTCInMinutes":-300},"CF":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Central African Republic","TimeDifferenceFromUTCInMinutes":60},"TD":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Chad","TimeDifferenceFromUTCInMinutes":60},"CL":{"Timezone":"(UTC-04:00) Santiago","DisplayName":"Chile","TimeDifferenceFromUTCInMinutes":-240},"CN":{"Timezone":"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi","DisplayName":"China","TimeDifferenceFromUTCInMinutes":480},"CX":{"Timezone":"(UTC+14:00) Kiritimati Island","DisplayName":"Christmas Island","TimeDifferenceFromUTCInMinutes":840},"CC":{"Timezone":"(UTC+06:30) Yangon (Rangoon)","DisplayName":"Cocos (Keeling) Islands","TimeDifferenceFromUTCInMinutes":360},"CO":{"Timezone":"(UTC-05:00) Bogota, Lima, Quito","DisplayName":"Colombia","TimeDifferenceFromUTCInMinutes":-300},"KM":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Comoros","TimeDifferenceFromUTCInMinutes":180},"CG":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Congo (Brazzaville)","TimeDifferenceFromUTCInMinutes":60},"CD":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Congo [DRC]","TimeDifferenceFromUTCInMinutes":60},"CK":{"Timezone":"(UTC-10:00) Hawaii","DisplayName":"Cook Islands","TimeDifferenceFromUTCInMinutes":-600},"CR":{"Timezone":"(UTC-06:00) Central America","DisplayName":"Costa Rica","TimeDifferenceFromUTCInMinutes":-360},"CI":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Ivory Coast","TimeDifferenceFromUTCInMinutes":0},"HR":{"Timezone":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","DisplayName":"Croatia","TimeDifferenceFromUTCInMinutes":60},"CU":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Cuba","TimeDifferenceFromUTCInMinutes":-240},"CW":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Curaçao","TimeDifferenceFromUTCInMinutes":-240},"CY":{"Timezone":"(UTC+02:00) Istanbul","DisplayName":"Cyprus","TimeDifferenceFromUTCInMinutes":120},"CZ":{"Timezone":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","DisplayName":"Czech Republic","TimeDifferenceFromUTCInMinutes":60},"DK":{"Timezone":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","DisplayName":"Denmark","TimeDifferenceFromUTCInMinutes":60},"DJ":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Djibouti","TimeDifferenceFromUTCInMinutes":180},"DM":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Dominica","TimeDifferenceFromUTCInMinutes":-240},"DO":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Dominican Republic","TimeDifferenceFromUTCInMinutes":-240},"EC":{"Timezone":"(UTC-05:00) Eastern Time (US and Canada)","DisplayName":"Ecuador","TimeDifferenceFromUTCInMinutes":-300},"EG":{"Timezone":"(UTC+02:00) Cairo","DisplayName":"Egypt","TimeDifferenceFromUTCInMinutes":120},"SV":{"Timezone":"(UTC-06:00) Central America","DisplayName":"El Salvador","TimeDifferenceFromUTCInMinutes":-360},"GQ":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Equatorial Guinea","TimeDifferenceFromUTCInMinutes":60},"ER":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Eritrea","TimeDifferenceFromUTCInMinutes":180},"EE":{"Timezone":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","DisplayName":"Estonia","TimeDifferenceFromUTCInMinutes":120},"ET":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Ethiopia","TimeDifferenceFromUTCInMinutes":180},"FK":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Falkland Islands (Malvinas)","TimeDifferenceFromUTCInMinutes":-240},"FO":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Faroe Islands","TimeDifferenceFromUTCInMinutes":0},"FJ":{"Timezone":"(UTC+12:00) Fiji","DisplayName":"Fiji","TimeDifferenceFromUTCInMinutes":720},"FI":{"Timezone":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","DisplayName":"Finland","TimeDifferenceFromUTCInMinutes":120},"FR":{"Timezone":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","DisplayName":"France","TimeDifferenceFromUTCInMinutes":60},"GF":{"Timezone":"(UTC-03:00) Cayenne, Fortaleza","DisplayName":"French Guiana","TimeDifferenceFromUTCInMinutes":-180},"PF":{"Timezone":"(UTC-10:00) Hawaii","DisplayName":"French Polynesia","TimeDifferenceFromUTCInMinutes":-600},"TF":{"Timezone":"(UTC+05:00) Tashkent","DisplayName":"French Southern Territories","TimeDifferenceFromUTCInMinutes":300},"GA":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Gabon","TimeDifferenceFromUTCInMinutes":60},"GM":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Gambia","TimeDifferenceFromUTCInMinutes":0},"GE":{"Timezone":"(UTC+04:00) Tbilisi","DisplayName":"Georgia","TimeDifferenceFromUTCInMinutes":240},"DE":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Germany","TimeDifferenceFromUTCInMinutes":60},"GH":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Ghana","TimeDifferenceFromUTCInMinutes":0},"GI":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Gibraltar","TimeDifferenceFromUTCInMinutes":60},"GR":{"Timezone":"(UTC+02:00) Athens, Bucharest","DisplayName":"Greece","TimeDifferenceFromUTCInMinutes":120},"GL":{"Timezone":"(UTC-03:00) Greenland","DisplayName":"Greenland","TimeDifferenceFromUTCInMinutes":-180},"GD":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Grenada","TimeDifferenceFromUTCInMinutes":-240},"GP":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Guadeloupe","TimeDifferenceFromUTCInMinutes":-240},"GU":{"Timezone":"(UTC+10:00) Canberra, Melbourne, Sydney","DisplayName":"Guam","TimeDifferenceFromUTCInMinutes":600},"GT":{"Timezone":"(UTC-06:00) Central Time (US and Canada)","DisplayName":"Guatemala","TimeDifferenceFromUTCInMinutes":-360},"GG":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Guernsey","TimeDifferenceFromUTCInMinutes":0},"GN":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Guinea","TimeDifferenceFromUTCInMinutes":0},"GW":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Guinea-Bissau","TimeDifferenceFromUTCInMinutes":0},"GY":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Guyana","TimeDifferenceFromUTCInMinutes":-240},"HT":{"Timezone":"(UTC-05:00) Eastern Time (US and Canada)","DisplayName":"Haiti","TimeDifferenceFromUTCInMinutes":-300},"HM":{"Timezone":"(UTC+05:00) Tashkent","DisplayName":"Heard Island and McDonald Islands","TimeDifferenceFromUTCInMinutes":300},"VA":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Holy See","TimeDifferenceFromUTCInMinutes":60},"HN":{"Timezone":"(UTC-06:00) Central America","DisplayName":"Honduras","TimeDifferenceFromUTCInMinutes":-360},"HK":{"Timezone":"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi","DisplayName":"Hong Kong","TimeDifferenceFromUTCInMinutes":480},"HU":{"Timezone":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","DisplayName":"Hungary","TimeDifferenceFromUTCInMinutes":60},"IS":{"Timezone":"(UTC) Monrovia, Reykjavik","DisplayName":"Iceland","TimeDifferenceFromUTCInMinutes":0},"IN":{"Timezone":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","DisplayName":"India","TimeDifferenceFromUTCInMinutes":300},"ID":{"Timezone":"(UTC+07:00) Bangkok, Hanoi, Jakarta","DisplayName":"Indonesia","TimeDifferenceFromUTCInMinutes":420},"IR":{"Timezone":"(UTC+03:30) Tehran","DisplayName":"Iran","TimeDifferenceFromUTCInMinutes":180},"IQ":{"Timezone":"(UTC+03:00) Baghdad","DisplayName":"Iraq","TimeDifferenceFromUTCInMinutes":180},"IE":{"Timezone":"(UTC) Dublin, Edinburgh, Lisbon, London","DisplayName":"Ireland","TimeDifferenceFromUTCInMinutes":0},"IM":{"Timezone":"(UTC) Dublin, Edinburgh, Lisbon, London","DisplayName":"Isle of Man","TimeDifferenceFromUTCInMinutes":0},"IL":{"Timezone":"(UTC+02:00) Jerusalem","DisplayName":"Israel","TimeDifferenceFromUTCInMinutes":120},"IT":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Italy","TimeDifferenceFromUTCInMinutes":60},"JM":{"Timezone":"(UTC-05:00) Eastern Time (US and Canada)","DisplayName":"Jamaica","TimeDifferenceFromUTCInMinutes":-300},"JP":{"Timezone":"(UTC+09:00) Osaka, Sapporo, Tokyo","DisplayName":"Japan","TimeDifferenceFromUTCInMinutes":540},"JE":{"Timezone":"(UTC) Dublin, Edinburgh, Lisbon, London","DisplayName":"Jersey","TimeDifferenceFromUTCInMinutes":0},"JO":{"Timezone":"(UTC+02:00) Amman","DisplayName":"Jordan","TimeDifferenceFromUTCInMinutes":120},"KZ":{"Timezone":"(UTC+06:00) Astana","DisplayName":"Kazakhstan","TimeDifferenceFromUTCInMinutes":360},"KE":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Kenya","TimeDifferenceFromUTCInMinutes":180},"KI":{"Timezone":"(UTC+12:00) Coordinated Universal Time +12","DisplayName":"Kiribati","TimeDifferenceFromUTCInMinutes":720},"KP":{"Timezone":"(UTC+09:00) Seoul","DisplayName":"Korea, Democratic People's Republic of","TimeDifferenceFromUTCInMinutes":540},"KR":{"Timezone":"(UTC+09:00) Seoul","DisplayName":"Korea","TimeDifferenceFromUTCInMinutes":540},"KW":{"Timezone":"(UTC+03:00) Kuwait, Riyadh","DisplayName":"Kuwait","TimeDifferenceFromUTCInMinutes":180},"KG":{"Timezone":"(UTC+06:00) Astana","DisplayName":"Kyrgyzstan","TimeDifferenceFromUTCInMinutes":360},"LA":{"Timezone":"(UTC+07:00) Bangkok, Hanoi, Jakarta","DisplayName":"Lao PDR","TimeDifferenceFromUTCInMinutes":420},"LV":{"Timezone":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","DisplayName":"Latvia","TimeDifferenceFromUTCInMinutes":120},"LB":{"Timezone":"(UTC+02:00) Beirut","DisplayName":"Lebanon","TimeDifferenceFromUTCInMinutes":120},"LS":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Lesotho","TimeDifferenceFromUTCInMinutes":120},"LR":{"Timezone":"(UTC) Monrovia, Reykjavik","DisplayName":"Liberia","TimeDifferenceFromUTCInMinutes":0},"LY":{"Timezone":"(UTC+02:00) Cairo","DisplayName":"Libya","TimeDifferenceFromUTCInMinutes":120},"LI":{"Timezone":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","DisplayName":"Liechtenstein","TimeDifferenceFromUTCInMinutes":60},"LT":{"Timezone":"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius","DisplayName":"Lithuania","TimeDifferenceFromUTCInMinutes":120},"LU":{"Timezone":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","DisplayName":"Luxembourg","TimeDifferenceFromUTCInMinutes":60},"MO":{"Timezone":"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi","DisplayName":"Macao SAR","TimeDifferenceFromUTCInMinutes":480},"MK":{"Timezone":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","DisplayName":"Macedonia (Former Yugoslav Republic of Macedonia)","TimeDifferenceFromUTCInMinutes":60},"MG":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Madagascar","TimeDifferenceFromUTCInMinutes":180},"MW":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Malawi","TimeDifferenceFromUTCInMinutes":120},"MY":{"Timezone":"(UTC+08:00) Kuala Lumpur, Singapore","DisplayName":"Malaysia","TimeDifferenceFromUTCInMinutes":480},"MV":{"Timezone":"(UTC+05:00) Tashkent","DisplayName":"Maldives","TimeDifferenceFromUTCInMinutes":300},"ML":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Mali","TimeDifferenceFromUTCInMinutes":0},"MT":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Malta","TimeDifferenceFromUTCInMinutes":60},"MH":{"Timezone":"(UTC+12:00) Coordinated Universal Time +12","DisplayName":"Marshall Islands","TimeDifferenceFromUTCInMinutes":720},"MQ":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Martinique","TimeDifferenceFromUTCInMinutes":-240},"MR":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Mauritania","TimeDifferenceFromUTCInMinutes":0},"MU":{"Timezone":"(UTC+04:00) Port Louis","DisplayName":"Mauritius","TimeDifferenceFromUTCInMinutes":240},"YT":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Mayotte","TimeDifferenceFromUTCInMinutes":180},"MX":{"Timezone":"(UTC-06:00) Guadalajara, Mexico City, Monterrey","DisplayName":"Mexico","TimeDifferenceFromUTCInMinutes":-360},"FM":{"Timezone":"(UTC+10:00) Canberra, Melbourne, Sydney","DisplayName":"Micronesia, Federated States of","TimeDifferenceFromUTCInMinutes":600},"MD":{"Timezone":"(UTC+02:00) Athens, Bucharest","DisplayName":"Moldova","TimeDifferenceFromUTCInMinutes":120},"MC":{"Timezone":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","DisplayName":"Principality of Monaco","TimeDifferenceFromUTCInMinutes":60},"MN":{"Timezone":"(UTC+08:00) Ulaanbaatar","DisplayName":"Mongolia","TimeDifferenceFromUTCInMinutes":480},"ME":{"Timezone":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","DisplayName":"Montenegro","TimeDifferenceFromUTCInMinutes":60},"MS":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Montserrat","TimeDifferenceFromUTCInMinutes":-240},"MA":{"Timezone":"(UTC) Casablanca","DisplayName":"Morocco","TimeDifferenceFromUTCInMinutes":0},"MZ":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Mozambique","TimeDifferenceFromUTCInMinutes":120},"MM":{"Timezone":"(UTC+06:30) Yangon (Rangoon)","DisplayName":"Myanmar","TimeDifferenceFromUTCInMinutes":360},"NA":{"Timezone":"(UTC+01:00) Windhoek","DisplayName":"Namibia","TimeDifferenceFromUTCInMinutes":60},"NR":{"Timezone":"(UTC+12:00) Coordinated Universal Time +12","DisplayName":"Nauru","TimeDifferenceFromUTCInMinutes":720},"NP":{"Timezone":"(UTC+05:45) Kathmandu","DisplayName":"Nepal","TimeDifferenceFromUTCInMinutes":300},"NL":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Netherlands","TimeDifferenceFromUTCInMinutes":60},"NC":{"Timezone":"(UTC+11:00) Solomon Is., New Caledonia","DisplayName":"New Caledonia","TimeDifferenceFromUTCInMinutes":660},"NZ":{"Timezone":"(UTC+12:00) Auckland, Wellington","DisplayName":"New Zealand","TimeDifferenceFromUTCInMinutes":720},"NI":{"Timezone":"(UTC-06:00) Central America","DisplayName":"Nicaragua","TimeDifferenceFromUTCInMinutes":-360},"NE":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Niger","TimeDifferenceFromUTCInMinutes":60},"NG":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Nigeria","TimeDifferenceFromUTCInMinutes":60},"NU":{"Timezone":"(UTC-11:00) Coordinated Universal Time -11","DisplayName":"Niue","TimeDifferenceFromUTCInMinutes":-660},"NF":{"Timezone":"(UTC+12:00) Auckland, Wellington","DisplayName":"Norfolk Island","TimeDifferenceFromUTCInMinutes":720},"MP":{"Timezone":"(UTC+10:00) Canberra, Melbourne, Sydney","DisplayName":"Northern Mariana Islands","TimeDifferenceFromUTCInMinutes":600},"NO":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Norway","TimeDifferenceFromUTCInMinutes":60},"OM":{"Timezone":"(UTC+04:00) Abu Dhabi, Muscat","DisplayName":"Oman","TimeDifferenceFromUTCInMinutes":240},"PK":{"Timezone":"(UTC+05:00) Islamabad, Karachi","DisplayName":"Pakistan","TimeDifferenceFromUTCInMinutes":300},"PW":{"Timezone":"(UTC+09:00) Seoul","DisplayName":"Palau","TimeDifferenceFromUTCInMinutes":540},"PS":{"Timezone":"(UTC+02:00) Jerusalem","DisplayName":"Palestine, State of","TimeDifferenceFromUTCInMinutes":120},"PA":{"Timezone":"(UTC-05:00) Bogota, Lima, Quito","DisplayName":"Panama","TimeDifferenceFromUTCInMinutes":-300},"PG":{"Timezone":"(UTC+10:00) Canberra, Melbourne, Sydney","DisplayName":"Papua New Guinea","TimeDifferenceFromUTCInMinutes":600},"PY":{"Timezone":"(UTC-04:00) Asuncion","DisplayName":"Paraguay","TimeDifferenceFromUTCInMinutes":-240},"PE":{"Timezone":"(UTC-05:00) Bogota, Lima, Quito","DisplayName":"Peru","TimeDifferenceFromUTCInMinutes":-300},"PH":{"Timezone":"(UTC+08:00) Kuala Lumpur, Singapore","DisplayName":"Philippines","TimeDifferenceFromUTCInMinutes":480},"PN":{"Timezone":"(UTC-08:00) Pacific Time (US and Canada)","DisplayName":"Pitcairn","TimeDifferenceFromUTCInMinutes":-480},"PL":{"Timezone":"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb","DisplayName":"Poland","TimeDifferenceFromUTCInMinutes":60},"PT":{"Timezone":"(UTC) Dublin, Edinburgh, Lisbon, London","DisplayName":"Portugal","TimeDifferenceFromUTCInMinutes":0},"PR":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Puerto Rico","TimeDifferenceFromUTCInMinutes":-240},"QA":{"Timezone":"(UTC+03:00) Kuwait, Riyadh","DisplayName":"Qatar","TimeDifferenceFromUTCInMinutes":180},"RE":{"Timezone":"(UTC+04:00) Abu Dhabi, Muscat","DisplayName":"Réunion","TimeDifferenceFromUTCInMinutes":240},"RO":{"Timezone":"(UTC+02:00) Athens, Bucharest","DisplayName":"Romania","TimeDifferenceFromUTCInMinutes":120},"RU":{"Timezone":"(UTC+04:00) Moscow, St. Petersburg, Volgograd","DisplayName":"Russia","Currency":["RUR","RUB"],"TimeDifferenceFromUTCInMinutes":240},"RW":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Rwanda","TimeDifferenceFromUTCInMinutes":120},"BL":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Saint Barthélemy","TimeDifferenceFromUTCInMinutes":-240},"SH":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Saint Helena, Ascension and Tristan da Cunha","TimeDifferenceFromUTCInMinutes":0},"KN":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Saint Kitts and Nevis","TimeDifferenceFromUTCInMinutes":-240},"LC":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Saint Lucia","TimeDifferenceFromUTCInMinutes":-240},"MF":{"Timezone":"(UTC-04:00) Asuncion","DisplayName":"Saint Martin (French part)","TimeDifferenceFromUTCInMinutes":-240},"PM":{"Timezone":"(UTC-03:00) Cayenne, Fortaleza","DisplayName":"Saint Pierre and Miquelon","TimeDifferenceFromUTCInMinutes":-180},"VC":{"Timezone":"(UTC-04:00) Santiago","DisplayName":"Saint Vincent and the Grenadines","TimeDifferenceFromUTCInMinutes":-240},"WS":{"Timezone":"(UTC+13:00) Samoa","DisplayName":"Samoa","TimeDifferenceFromUTCInMinutes":780},"SM":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"San Marino","TimeDifferenceFromUTCInMinutes":60},"ST":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Sao Tome and Principe","TimeDifferenceFromUTCInMinutes":0},"SA":{"Timezone":"(UTC+03:00) Kuwait, Riyadh","DisplayName":"Saudi Arabia","TimeDifferenceFromUTCInMinutes":180},"SN":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Senegal","TimeDifferenceFromUTCInMinutes":0},"RS":{"Timezone":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","DisplayName":"Serbia","TimeDifferenceFromUTCInMinutes":60},"SC":{"Timezone":"(UTC+04:00) Abu Dhabi, Muscat","DisplayName":"Seychelles","TimeDifferenceFromUTCInMinutes":240},"SL":{"Timezone":"(UTC) Monrovia, Reykjavik","DisplayName":"Sierra Leone","TimeDifferenceFromUTCInMinutes":0},"SG":{"Timezone":"(UTC+08:00) Kuala Lumpur, Singapore","DisplayName":"Singapore","TimeDifferenceFromUTCInMinutes":480},"SX":{"Timezone":"(UTC-04:00) Asuncion","DisplayName":"Sint Maarten (Dutch part)","TimeDifferenceFromUTCInMinutes":-240},"SK":{"Timezone":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","DisplayName":"Slovakia","TimeDifferenceFromUTCInMinutes":60},"SI":{"Timezone":"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague","DisplayName":"Slovenia","TimeDifferenceFromUTCInMinutes":60},"SB":{"Timezone":"(UTC+11:00) Solomon Is., New Caledonia","DisplayName":"Solomon Islands","TimeDifferenceFromUTCInMinutes":660},"SO":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Somalia","TimeDifferenceFromUTCInMinutes":180},"ZA":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"South Africa","TimeDifferenceFromUTCInMinutes":120},"GS":{"Timezone":"(UTC-02:00) Mid-Atlantic","DisplayName":"South Georgia and the South Sandwich Islands","TimeDifferenceFromUTCInMinutes":-120},"SS":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"South Sudan","TimeDifferenceFromUTCInMinutes":180},"ES":{"Timezone":"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris","DisplayName":"Spain","TimeDifferenceFromUTCInMinutes":60},"LK":{"Timezone":"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi","DisplayName":"Sri Lanka","TimeDifferenceFromUTCInMinutes":300},"SD":{"Timezone":"(UTC+02:00) Amman","DisplayName":"Sudan","TimeDifferenceFromUTCInMinutes":120},"SR":{"Timezone":"(UTC-03:00) Montevideo","DisplayName":"Suriname","TimeDifferenceFromUTCInMinutes":-180},"SJ":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Svalbard and Jan Mayen","TimeDifferenceFromUTCInMinutes":60},"SZ":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Swaziland","TimeDifferenceFromUTCInMinutes":120},"SE":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Sweden","TimeDifferenceFromUTCInMinutes":60},"CH":{"Timezone":"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","DisplayName":"Switzerland","TimeDifferenceFromUTCInMinutes":60},"SY":{"Timezone":"(UTC+02:00) Damascus","DisplayName":"Syria","TimeDifferenceFromUTCInMinutes":120},"TW":{"Timezone":"(UTC+08:00) Taipei","DisplayName":"Taiwan","TimeDifferenceFromUTCInMinutes":480},"TJ":{"Timezone":"(UTC+05:00) Tashkent","DisplayName":"Tajikistan","TimeDifferenceFromUTCInMinutes":300},"TZ":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Tanzania, United Republic of","TimeDifferenceFromUTCInMinutes":180},"TH":{"Timezone":"(UTC+07:00) Bangkok, Hanoi, Jakarta","DisplayName":"Thailand","TimeDifferenceFromUTCInMinutes":420},"TL":{"Timezone":"(UTC+09:00) Osaka, Sapporo, Tokyo","DisplayName":"Timor-Leste","TimeDifferenceFromUTCInMinutes":540},"TG":{"Timezone":"(UTC) Coordinated Universal Time","DisplayName":"Togo","TimeDifferenceFromUTCInMinutes":0},"TK":{"Timezone":"(UTC+13:00)Samoa","DisplayName":"Tokelau","TimeDifferenceFromUTCInMinutes":780},"TO":{"Timezone":"(UTC+13:00) Nuku'alofa","DisplayName":"Tonga","TimeDifferenceFromUTCInMinutes":780},"TT":{"Timezone":"(UTC-04:00) Atlantic Time (Canada)","DisplayName":"Trinidad and Tobago","TimeDifferenceFromUTCInMinutes":-240},"TN":{"Timezone":"(UTC+01:00) West Central Africa","DisplayName":"Tunisia","TimeDifferenceFromUTCInMinutes":60},"TR":{"Timezone":"(UTC+02:00) Istanbul","DisplayName":"Turkey","TimeDifferenceFromUTCInMinutes":120},"TM":{"Timezone":"(UTC+05:00) Tashkent","DisplayName":"Turkmenistan","TimeDifferenceFromUTCInMinutes":300},"TC":{"Timezone":"(UTC-05:00) Bogota, Lima, Quito","DisplayName":"Turks and Caicos Islands","TimeDifferenceFromUTCInMinutes":-300},"TV":{"Timezone":"(UTC+12:00) Magadan","DisplayName":"Tuvalu","TimeDifferenceFromUTCInMinutes":720},"UG":{"Timezone":"(UTC+03:00) Nairobi","DisplayName":"Uganda","TimeDifferenceFromUTCInMinutes":180},"UA":{"Timezone":"(UTC+02:00) Minsk","DisplayName":"Ukraine","TimeDifferenceFromUTCInMinutes":120},"AE":{"Timezone":"(UTC+04:00) Abu Dhabi, Muscat","DisplayName":"U.A.E.","TimeDifferenceFromUTCInMinutes":240},"GB":{"Timezone":"(UTC) Dublin, Edinburgh, Lisbon, London","DisplayName":"United Kingdom","TimeDifferenceFromUTCInMinutes":0},"US":{"Timezone":"(UTC-05:00) Eastern Time (US and Canada)","DisplayName":"United States","TimeDifferenceFromUTCInMinutes":-300},"UM":{"Timezone":"(UTC+12:00) Magadan","DisplayName":"United States Minor Outlying Islands","TimeDifferenceFromUTCInMinutes":720},"UY":{"Timezone":"(UTC-03:00) Montevideo","DisplayName":"Uruguay","TimeDifferenceFromUTCInMinutes":-180},"UZ":{"Timezone":"(UTC+05:00) Tashkent","DisplayName":"Uzbekistan","TimeDifferenceFromUTCInMinutes":300},"VU":{"Timezone":"(UTC+11:00) Solomon Is., New Caledonia","DisplayName":"Vanuatu","TimeDifferenceFromUTCInMinutes":660},"VE":{"Timezone":"(UTC-04:30) Caracas","DisplayName":"Bolivarian Republic of Venezuela","TimeDifferenceFromUTCInMinutes":-240},"VN":{"Timezone":"(UTC+07:00) Bangkok, Hanoi, Jakarta","DisplayName":"Vietnam","TimeDifferenceFromUTCInMinutes":420},"VG":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Virgin Islands, British","TimeDifferenceFromUTCInMinutes":-240},"VI":{"Timezone":"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan","DisplayName":"Virgin Islands, U.S.","TimeDifferenceFromUTCInMinutes":-240},"WF":{"Timezone":"(UTC+12:00) Coordinated Universal Time +12","DisplayName":"Wallis and Futuna","TimeDifferenceFromUTCInMinutes":720},"EH":{"Timezone":"(UTC) Casablanca","DisplayName":"Western Sahara","TimeDifferenceFromUTCInMinutes":0},"YE":{"Timezone":"(UTC+03:00) Kuwait, Riyadh","DisplayName":"Yemen","TimeDifferenceFromUTCInMinutes":180},"ZM":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Zambia","TimeDifferenceFromUTCInMinutes":120},"ZW":{"Timezone":"(UTC+02:00) Harare, Pretoria","DisplayName":"Zimbabwe","TimeDifferenceFromUTCInMinutes":120},"NotAvailable":{"Timezone":"(UTC) Dublin, Edinburgh, Lisbon, London","DisplayName":"","TimeDifferenceFromUTCInMinutes":0}};CCC.COUNTRYINFO.countryToCurrency={"US":"USD","GB":"GBP","DE":"EUR","FR":"EUR","IT":"EUR","PT":"EUR","RO":"RON","HU":"HUF","AU":"AUD","BR":"BRL","CA":"CAD","CH":"CHF","CN":"CNY","HK":"HKD","IN":"INR","JP":"JPY","KR":"KRW","MX":"MXN","NZ":"NZD","PH":"PHP","PL":"PLN","RU":"RUB","SG":"SGD","VE":"VEF","VN":"VND"};CCC.COUNTRYINFO.getFiatCurrencies=function(){var fiatCurrenciesArrayToReturn=[];for(var countrySymbol in CCC.COUNTRYINFO.countryToCurrency){var currentFiatCurrency=CCC.COUNTRYINFO.countryToCurrency[countrySymbol];if(fiatCurrenciesArrayToReturn.indexOf(currentFiatCurrency)===-1){fiatCurrenciesArrayToReturn.push(currentFiatCurrency);}}
return fiatCurrenciesArrayToReturn;};CCC.COUNTRYINFO.getCountryTimezoneOptions=function(){var timezoneArrayToReturn=[];for(var countryCode in CCC.COUNTRYINFO.data){var indexOfTimezone=timezoneArrayToReturn.findIndex(function(obj){return obj.Timezone===CCC.COUNTRYINFO.data[countryCode].Timezone})
if(indexOfTimezone===-1){timezoneArrayToReturn.push(CCC.COUNTRYINFO.data[countryCode]);}}
timezoneArrayToReturn.sort(function(a,b){return a.TimeDifferenceFromUTCInMinutes-b.TimeDifferenceFromUTCInMinutes;});return timezoneArrayToReturn.map(function(obj){return obj.Timezone});};CCC.COUNTRYINFO.getCountryDisplayNames=function(){var countryDisplayNamesArrayToReturn=[];for(var countryCode in CCC.COUNTRYINFO.data){countryDisplayNamesArrayToReturn.push(CCC.COUNTRYINFO.data[countryCode].DisplayName);}
return countryDisplayNamesArrayToReturn.sort();};;;;angular.module('ccc-app').factory('cookieService',['$rootScope',function cookieServiceFactory($rootScope){var cookieServiceInterface={};cookieServiceInterface.setItem=function(key,value){cookieServiceInterface.setCookie(key,value,1000,'/');};cookieServiceInterface.removeItem=function(key,value){cookieServiceInterface.setCookie(key,value,-1,'/');};cookieServiceInterface.setCookie=function(cname,cvalue,exdays,path){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();var cookieString=cname+"="+cvalue+"; "+expires+"; path="+path;document.cookie=cookieString;};cookieServiceInterface.getCookie=function(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length,c.length);}
return"";};return cookieServiceInterface;}]);angular.module('ccc-app').factory('coinTabsAPI',['$http','$filter','toastNotifications',function coinTabsAPIFactory($http,$filter,toastNotifications){var utilStatic=CCC.STATIC.UTIL;return{getToplistByTotalVolume:function(limit,toSymbol,pageNumber,callback){var formattedCoinData=[];var formattedSponsoredCoinData=[];var paramsForCall={};var conversionNotAvailable={Conversion:'not_available',ConversionSymbol:'',CurrencyFrom:'-',CurrencyTo:'-',Market:'-',Supply:0,TotalVolume24H:0,SubBase:'5~',SubsNeeded:[],RAW:[]}
paramsForCall['params']={};paramsForCall['params']['limit']=limit;paramsForCall['params']['tsym']=toSymbol;paramsForCall['params']['page']=pageNumber;$http.get(CCC.minApiUrl+"data/top/totalvol",paramsForCall).then(function(res){var responseData=res.data.Data;var responseSponsoredData=res.data.SponsoredData||[];for(var iCoinData=0,lenCoinData=responseData.length;iCoinData<lenCoinData;iCoinData++){var coinInfo=responseData[iCoinData]['CoinInfo'];var subInfo=responseData[iCoinData]['ConversionInfo']||conversionNotAvailable;var coinObj={"CommonData":coinInfo,"SubInfo":subInfo,"Raw":subInfo['RAW'],"DATA":{},"DISPLAY":{},"VISUAL":{}};formattedCoinData.push(coinObj);};for(var iSponsoredCoinData=0,lenSponsoredCoinData=responseSponsoredData.length;iSponsoredCoinData<lenSponsoredCoinData;iSponsoredCoinData++){var coinInfo=responseSponsoredData[iSponsoredCoinData]['CoinInfo'];var subInfo=responseSponsoredData[iSponsoredCoinData]['ConversionInfo'];var coinObj={"CommonData":coinInfo,"SubInfo":subInfo,"Raw":subInfo['RAW'],"DATA":{},"DISPLAY":{},"VISUAL":{}};formattedSponsoredCoinData.push(coinObj);};callback(formattedCoinData,formattedSponsoredCoinData);},function(err){toastNotifications.addNotification('error','Could not get coin data. Try reloading page');});},getICOCoinData:function(status,limit,callback){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['status']=status;paramsForCall['params']['limit']=limit;$http.get('https://www.cryptocompare.com/api/data/icolist',paramsForCall).then(function(res){var icoArray=[];var icoList=res.data.Data;for(var key in icoList){var dataObj={};var displayObj={};var coin=icoList[key];coin.Symbol=key;var coinsOffered=0;var percent=parseFloat(coin.ICOTokenPercentageForInvestors);var tokens=parseInt(coin.ICOTokenSupply);if(isNaN(percent)||percent==0||isNaN(tokens)||tokens==0){dataObj.ICOCOINSOFFERED=0;displayObj.ICOCOINSOFFERED="-";}else{var offered=percent/100*tokens;dataObj.ICOCOINSOFFERED=offered;displayObj.ICOCOINSOFFERED=utilStatic.convertValueToDisplay("",offered,$filter('number'),'short');displayObj.ICOCOINSOFFERED+=" ("+utilStatic.convertValueToDisplay("",coin.ICOTokenPercentageForInvestors,$filter('number'),'short')+"%)";}
coin.ICOStartPrice=parseFloat(coin.ICOStartPrice);if(isNaN(coin.ICOStartPrice)){dataObj.ICOSTARTPRICE=0;displayObj.ICOSTARTPRICE="-";}else if(icoList[key].ICOStartPriceCurrency=='USD'){dataObj.ICOSTARTPRICE=coin.ICOStartPrice;displayObj.ICOSTARTPRICE=displayObj.ICOPRICE=utilStatic.convertValueToDisplay('$',dataObj.ICOSTARTPRICE,$filter('number'));}else{dataObj.ICOSTARTPRICE=coin.ICOStartPrice;}
if(!isNaN(coin.ICOFundsRaisedUSD)&&!isNaN(dataObj.ICOCOINSOFFERED)&&coin.ICOFundsRaisedUSD>0&&dataObj.ICOCOINSOFFERED>0){var averagePrice=coin.ICOFundsRaisedUSD/dataObj.ICOCOINSOFFERED;dataObj.ICOPRICE=averagePrice;displayObj.ICOPRICE=utilStatic.convertValueToDisplay('$',averagePrice,$filter('number'));}else{dataObj.ICOPRICE=0;displayObj.ICOPRICE="-";}
if(isNaN(coin.ICOFundsRaisedUSD)||coin.ICOFundsRaisedUSD==0){dataObj.ICOFUNDSRAISEDUSD=0;displayObj.ICOFUNDSRAISEDUSD="-";}else{dataObj.ICOFUNDSRAISEDUSD=coin.ICOFundsRaisedUSD;displayObj.ICOFUNDSRAISEDUSD=utilStatic.convertValueToDisplay('$',coin.ICOFundsRaisedUSD,$filter('number'),'short');}
dataObj.CHANGEPCT24HOUR=0;displayObj.CHANGEPCT24HOUR="-";dataObj.CHANGE24HOUR=0;displayObj.CHANGE24HOUR="-";dataObj.ICOSTATUS=coin.ICOStatus;var objToAdd={CommonData:icoList[key],Coin:{},DATA:dataObj,DISPLAY:displayObj,Subs:[],VISUAL:{},Sponsored:icoList[key].Sponsored}
icoArray.push(objToAdd);};callback(icoArray);},function(err){toastNotifications.addNotification('error','Could not get ICO data. Try reloading page');});},getICOSubData:function(commaSeparatedSymbols,toCurrency){var params={};params['params']={};params['params']['fsyms']=commaSeparatedSymbols;params['params']['tsym']=toCurrency;return $http.get(CCC.minApiUrl+"data/subsWatchlist",params)}}}]);angular.module('ccc-app').factory('cccLocalStorage',['cookieService',function cccLocalStorageFactory(cookieService){var cccLocalStorageInterface={};var localStorageSupported=false;try{localStorage.setItem("localStorageSupported",true);localStorage.removeItem("localStorageSupported");localStorageSupported=true;}catch(e){localStorageSupported=false;};cccLocalStorageInterface.setObject=function(key,value){if(localStorageSupported){localStorage.setItem(key,JSON.stringify(value));}};cccLocalStorageInterface.getObject=function(key){var objectToReturn={};if(localStorageSupported){objectToReturn=localStorage.getItem(key);if(objectToReturn==null){objectToReturn={};}else{objectToReturn=JSON.parse(objectToReturn);}}
return objectToReturn;};cccLocalStorageInterface.setItem=function(key,value){if(localStorageSupported){localStorage.setItem(key,value);}else{cookieService.setItem(key,value);}};cccLocalStorageInterface.removeItem=function(key){if(localStorageSupported){localStorage.removeItem(key);}else{cookieService.removeItem(key);}};cccLocalStorageInterface.getText=function(key){var itemValue='';if(localStorageSupported){itemValue=localStorage.getItem(key);}else{itemValue=cookieService.getCookie(key);}
if(itemValue===null){return'';}
return itemValue;}
cccLocalStorageInterface.getInteger=function(key){var itemValue=0;if(localStorageSupported){itemValue=localStorage.getItem(key);}else{itemValue=cookieService.getCookie(key);}
if(itemValue===null){return 0;}
return parseInt(itemValue,10);};return cccLocalStorageInterface;}]);angular.module('ccc-app').factory('cccLightsService',['$rootScope','cookieService',function cccLightsService($rootScope,cookieService){var cccLightsServiceInterface={};var lightsOffKey='lightsOff';cccLightsServiceInterface.isOn=function(){if(cookieService.getCookie(lightsOffKey)===''){return true;}
return false;};cccLightsServiceInterface.turnOn=function(){cookieService.removeItem(lightsOffKey,'1');$rootScope.$emit("LightsChange");};cccLightsServiceInterface.turnOff=function(){cookieService.setItem(lightsOffKey,'1');$rootScope.$emit("LightsChange",'1');};return cccLightsServiceInterface;}]);angular.module('ccc-app').factory('profileManager',['$http','$filter',function profileManagerFactory($http,$filter){var profileStatsData={};var profileData={};var utilStatic=CCC.STATIC.UTIL;return{setAvatarUrl:function(avatarUrl){profileData.avatar_url=avatarUrl;},setId:function(cryptopianId){profileData.user_id=cryptopianId;},setBannedStatus:function(isBanned){profileData.is_banned=isBanned;},setCreationDate:function(createdOnTimestamp){profileData.creation_date=createdOnTimestamp;},setUsername:function(username){profileData.username=username;},setDescription:function(userDescription){profileData.description=userDescription;},setProfileStatsData:function(apiResponse){profileStatsData=apiResponse["Data"];},getProfileStatsData:function(){return profileStatsData;},getBannedStatus:function(){return profileData.is_banned;},getStatus:function(){if(profileData.is_banned==true){return"Banned";}
return"Active";},getCreationDate:function(){return $filter('date')(new Date(profileData.creation_date*1000),'mediumDate');},getProfileStat:function(statName,showSummaryValue){if(profileStatsData.hasOwnProperty(statName)){if(showSummaryValue){return utilStatic.convertValueToDisplay("",profileStatsData[statName].Value||0,$filter('number'),'short',true);}
return profileStatsData[statName].Value||0;}
return 0;},hasUserTakenAQuiz:function(){var hasUserTakenAQuiz=false;if(profileStatsData.hasOwnProperty("Badges")){if(profileStatsData.Badges.length>0){hasUserTakenAQuiz=true;}}
return hasUserTakenAQuiz;},getProfileBadges:function(){if(profileStatsData.hasOwnProperty("Badges")){return profileStatsData["Badges"];}
return[];},getFollowers:function(userId,lastId){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['cId']=userId;if(lastId){paramsForCall['params']['lId']=lastId;}
return $http.get("/api/cryptopian/followers/",paramsForCall);},getFollowing:function(userId,lastId){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['cId']=userId;if(lastId){paramsForCall['params']['lId']=lastId;}
return $http.get("/api/cryptopian/following/",paramsForCall);},getAvatarUrl:function(){return profileData.avatar_url;},getId:function(){return profileData.user_id;},getUsername:function(){return profileData.username;},getDescription:function(){return profileData.description;},getTotalActivity:function(showSummaryValue){var totalActivities=0;if(profileStatsData.hasOwnProperty('Posts')){totalActivities+=parseInt(profileStatsData.Posts.Value);}
if(profileStatsData.hasOwnProperty('Reviews')){totalActivities+=parseInt(profileStatsData.Reviews.Value);}
if(profileStatsData.hasOwnProperty('Following')){totalActivities+=parseInt(profileStatsData.Following.Value);}
if(profileStatsData.hasOwnProperty('Comments')){totalActivities+=parseInt(profileStatsData.Comments.Value);}
if(profileStatsData.hasOwnProperty('Agrees')){totalActivities+=parseInt(profileStatsData.Agrees.Value);}
if(profileStatsData.hasOwnProperty('Disagrees')){totalActivities+=parseInt(profileStatsData.Disagrees.Value);}
if(profileStatsData.hasOwnProperty('QuizzesTaken')){totalActivities+=parseInt(profileStatsData.QuizzesTaken.Value);}
if(showSummaryValue){return utilStatic.convertValueToDisplay("",totalActivities,$filter('number'),'short',true);}
return totalActivities;}};}]);angular.module('ccc-app').factory('userManager',['$rootScope','$http','toastNotifications',function userManagerFactory($rootScope,$http,toastNotifications){var userProperties={'is_logged_in':false,'user_id':'','username':'','is_activated':false,'avatar_url':'','email':'','roles':[],'portfolios':[],'is_following':false,'is_showing_login':false};var defaultApiResponseNamesForDisplay={'general':'General','email_notifications':'Email Notifications','security_info':'Security','web_notifications':'Web Notifications','api_key':'API Key','billing_history':'Billing'};var userProfileData={};var userStatsData={};var setLoggedInPrivate=function(value){userProperties.is_logged_in=value;$rootScope.$emit("LoginValueChange",value);};var mergeUserProperties=function(newUserProperties){for(var userProp in newUserProperties){userProperties[userProp]=newUserProperties[userProp];}};var addDisplayNameToResponseObj=function(objToAddDisplayNamesTo){for(var objKey in objToAddDisplayNamesTo){if(defaultApiResponseNamesForDisplay.hasOwnProperty(objKey)){objToAddDisplayNamesTo[objKey]["nameToDisplay"]=defaultApiResponseNamesForDisplay[objKey];}}
return objToAddDisplayNamesTo;};return{FOLLOWING:{CRYPTOPIAN:0,COIN:1,EXCHANGE:2},initUser:function(newUserProperties){mergeUserProperties(newUserProperties);},setUserProfileData:function(apiResponse){userProfileData=apiResponse;},updateProfileEmailNotificationsNoEmail:function(value){if(userProfileData.hasOwnProperty('Notifications')){var notifications=userProfileData['Notifications'];notifications[0].CurrentValue=value;if(value){for(var i=1;i<notifications.length;i++){if(notifications[i].Type=='checkbox'){notifications[i].CurrentValue=false;}
if(notifications[i].Type=='dropdown'){notifications[i].CurrentValue=notifications[i].Values[notifications[i].Values.length-1];}}}else{for(var i=1;i<notifications.length;i++){if(notifications[i].Type=='checkbox'){notifications[i].CurrentValue=true;}
if(notifications[i].Type=='dropdown'){notifications[i].CurrentValue=notifications[i].Values[0];}}}
userProfileData['Notifications']=notifications;}},setUserStatsData:function(apiResponse){userStatsData=apiResponse["Data"];},setCryptopianRoles:function(value){userProperties.roles=value;},setLoggedIn:function(value){setLoggedInPrivate(value);},setCryptopianId:function(value){userProperties.user_id=value;},setUsername:function(value){userProperties.username=value;},setAvatarUrl:function(value){userProperties.avatar_url=value;},setEmailAddress:function(value){userProperties.email=value;},setActivated:function(value){userProperties.is_activated=value;},setFollowing:function(value){userProperties.is_following=value;},setShowingLogin:function(value){userProperties.is_showing_login=value;},setPortfolioSummary:function(apiResponse){userProperties.portfolio_summary=apiResponse.Data;},getActivated:function(){return userProperties.is_activated;},isFollowing:function(){return userProperties.is_following;},isLoggedIn:function(){return userProperties.is_logged_in;},isShowingLogin:function(){return userProperties.is_showing_login;},getCryptopianId:function(){return userProperties.user_id;},getUsername:function(){return userProperties.username;},getAvatarUrl:function(){return userProperties.avatar_url;},getEmailAddress:function(){return userProperties.email;},getUserProfileData:function(){return addDisplayNameToResponseObj(userProfileData);},getUserSubscriptionData:function(){if(userProfileData['subscription']!==undefined){return userProfileData['subscription'];}
return{};},getUserStatsData:function(){return userStatsData;},getCryptopianAsFollower:function(){return{Id:userProperties.user_id,Name:userProperties.username,ImageUrl:userProperties.avatar_url,Url:"/profile/"+userProperties.username+"/",Type:"Cryptopian"};},logout:function(){$http.get(CCC.authApiUrl+"cryptopian/logout",{"withCredentials":true}).then(function(response){response=response["data"];toastNotifications.addNotification('success','<div>Logout successful.</div>'+'<div>Bye, bye '+userProperties.username+'. We hope to see you again soon!</div>');setLoggedInPrivate(false);mergeUserProperties(response.Data.User);},function(errResponse){errResponse=errResponse["data"];toastNotifications.addNotification('error','<div>Could not log out.</div>'+'<div>It seems you are not logged in.</div>');});},startTwoFactorAuth:function(password){return $http.post(CCC.authApiUrl+"cryptopian/two-factor/start",{"password":password},{"withCredentials":true});},enableTwoFactorAuth:function(twoFactorCode){return $http.post(CCC.authApiUrl+"cryptopian/two-factor/enable",{"two_factor_code":twoFactorCode},{"withCredentials":true});},requestPasswordReset:function(email){return $http.post(CCC.authApiUrl+"cryptopian/pass/reset/request",{"email":email},{"withCredentials":true});},requestDelete:function(password){return $http.post(CCC.authApiUrl+"cryptopian/delete/user/request",{"password":password},{"withCredentials":true}).then(function(response){setLoggedInPrivate(false);mergeUserProperties({});});},getUserAuthKeys:function(getUserAuthKeysCallback){$http.post(CCC.authApiUrl+"cryptopian/list/auth/keys",{},{"withCredentials":true}).then(function(response){getUserAuthKeysCallback(response.data.Data);},function(err){getUserAuthKeysCallback([]);});},addKeyDescription:function(authKeyToAddDescriptionTo,addKeyDescriptionCallback){var hasError=false;var paramsToPass={"key_to_update":authKeyToAddDescriptionTo.key}
if(authKeyToAddDescriptionTo.info!==""){paramsToPass["key_info"]=authKeyToAddDescriptionTo.info;}
$http.post(CCC.authApiUrl+"cryptopian/update/key/info",paramsToPass,{"withCredentials":true}).then(function(response){addKeyDescriptionCallback(hasError);},function(err){hasError=true;addKeyDescriptionCallback(hasError);});},getApiPermissions:function(getApiPermissionsCallback){$http.post(CCC.authApiUrl+"cryptopian/get/permissions",{},{"withCredentials":true}).then(function(response){getApiPermissionsCallback(response.data.Data);},function(err){getApiPermissionsCallback(response.data.Data);});},generateApiKey:function(permissions,key_info,callback){$http.post(CCC.authApiUrl+"cryptopian/create/api/key",{permissions:permissions,key_info:key_info},{"withCredentials":true}).then(function(response){callback(response.data);},function(err){callback(err.data);});},updateApiKeyPermissions:function(permissions,key_info,callback){$http.post(CCC.authApiUrl+"cryptopian/update/key/permissions",{permissions:permissions,key_to_update:key_info},{"withCredentials":true}).then(function(response){callback(response.data);},function(err){callback(err.data);});},getApiStats:function(callback){$http.post(CCC.authApiUrl+"stats/calls/api/keys",{"api_type":"price_api"},{"withCredentials":true}).then(function(response){callback(false,response.data.Data);},function(err){callback(true,{keys_data:[],keys:[],account:{}});});},getAvailablePlans:function(callback){$http.post(CCC.authApiUrl+"cryptopian/get/plan/list",{"api_type":"price_api"},{"withCredentials":true}).then(function(response){callback(false,response.data.Data);},function(err){callback(true,{});});},removeAnApiKey:function(key){return $http.post(CCC.authApiUrl+"cryptopian/remove/api/key",{"key_to_remove":key},{"withCredentials":true});},removeAnAuthKey:function(authKeyToRemove){return $http.post(CCC.authApiUrl+"cryptopian/remove/auth/key",{"key_to_remove":authKeyToRemove},{"withCredentials":true});},removeAllAuthKeys:function(authKeyToRemove){return $http.get(CCC.authApiUrl+"cryptopian/remove/auth/keys/all",{"withCredentials":true});},disableTwoFactor:function(password){return $http.post(CCC.authApiUrl+"cryptopian/two-factor/disable",{"password":password},{"withCredentials":true});},upgradeAPISubscriptionPlan:function(planId,prorate){return $http.post(CCC.authApiUrl+"cryptopian/upgrade-api-subscription",{"new_plan_id":planId,"prorate":prorate},{"withCredentials":true});},downgradeAPISubscriptionPlan:function(planId){return $http.post(CCC.authApiUrl+"cryptopian/downgrade-api-subscription",{"new_plan_id":planId},{"withCredentials":true});},cancelAPISubscription:function(){return $http.post(CCC.authApiUrl+"cryptopian/cancel-api-subscription",{},{"withCredentials":true});},updateFields:function(objectWithUpdateFields){return $http.post(CCC.authApiUrl+"cryptopian/update/user/all",objectWithUpdateFields,{"withCredentials":true});},termsAndConditionsAgreed:function(isAffiliateEnabled,isMarketwatchEnabled,isForumEnabled){var objectWithUpdateFields={affiliate:isAffiliateEnabled,market_watch:isMarketwatchEnabled,forum:isForumEnabled};return $http.post(CCC.authApiUrl+"cryptopian/update/user/terms-and-conditions-agreed",objectWithUpdateFields,{"withCredentials":true});},changeFollowingStatus:function(nodeId,followingType){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['id']=nodeId;paramsForCall['params']['ft']=followingType;return $http.get("/api/cryptopian/follow/",paramsForCall);},banCryptopian:function(nodeId,reason){var paramsForCall={};paramsForCall['user_id']=nodeId;paramsForCall['ban_reason']=reason;return $http.post(CCC.authApiUrl+"cryptopian/ban",paramsForCall,{"withCredentials":true});},unBanCryptopian:function(nodeId){var paramsForCall={};paramsForCall['user_id']=nodeId;return $http.post(CCC.authApiUrl+"cryptopian/un-ban",paramsForCall,{"withCredentials":true});},checkFollowingStatus:function(nodeId){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['id']=nodeId;return $http.get("/api/cryptopian/isfollowing/",paramsForCall);},getFollowers:function(userId,lastId){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['cId']=userId;if(lastId){paramsForCall['params']['lId']=lastId;}
return $http.get("/api/cryptopian/followers/",paramsForCall);},deleteAllForumActivity:function(cryptopianId){return $http.get("/api/forum/post/delete/",{params:{cryptopianId:cryptopianId}});},getFollowing:function(userId,lastId){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['cId']=userId;if(lastId){paramsForCall['params']['lId']=lastId;}
return $http.get("/api/cryptopian/following/",paramsForCall);},loadProfileDataFromApi:function(){return $http.get("/api/cryptopian/userinfo/");},hasSubscription:function(subName){if(userProperties.roles.length==0){return false;}
if(userProperties.roles.indexOf(subName)>-1){return true;}
return false;},canDelete:function(){if(userProperties.roles.length==0){return false;}
if(userProperties.roles.indexOf("forum_mod")>-1){return true;}
return false;},canMakeSticky:function(){if(userProperties.roles.length==0){return false;}
if(userProperties.roles.indexOf("sales_manager")>-1){return true;}
return false;},canBan:function(){if(userProperties.roles.length==0){return false;}
if(userProperties.roles.indexOf("forum_mod")>-1){return true;}
return false;},canDeleteAllForumActivity:function(){if(userProperties.roles.length==0){return false;}
if(userProperties.roles.indexOf("forum_admin")>-1){return true;}
return false;},canEdit:function(idOfOwner){if(!userProperties.is_logged_in){return userProperties.is_logged_in;}
if(userProperties.user_id==idOfOwner){return true;}
if(userProperties.roles.length==0){return false;}
if(userProperties.roles.indexOf("forum_admin")>-1){return true;}
return false;},retrieveUserDataFromApi:function(userSectionsToRetrieveArray,retrieveUserDataCallback){var errorRetrievingUserData=false;$http.post(CCC.authApiUrl+"cryptopian/get",{"user_info_sections":userSectionsToRetrieveArray},{"withCredentials":true}).then(function(userDataResponse){addDisplayNameToResponseObj(userDataResponse.data.Data);retrieveUserDataCallback(errorRetrievingUserData,userDataResponse.data);},function(errResponse){errorRetrievingUserData=true;retrieveUserDataCallback(errorRetrievingUserData,[]);});},};}]);angular.module('ccc-app').factory('totals',['$filter',function totalsFactory($filter){var totals={};var utilStatic=CCC.STATIC.UTIL;var text={'comment':{'p':'comments','s':'comment','sValues':[1]},'pageView':{'p':'page views','s':'page view','sValues':[1]}}
var totalsInterface={};totalsInterface.postsOnPage=function(pageId,apiResponse){totals['totalPosts']=apiResponse['Total'][pageId]['Posts'];};totalsInterface.pageViews=function(apiResponse){if(apiResponse.Type=="100"){totals['totalPageViews']=apiResponse.PageViews;}else{totals['totalPageViews']=0;}};totalsInterface.new=function(name,value){totals[name]=value;};totalsInterface.exists=function(name){if(totals.hasOwnProperty(name)){return true;}
return false;};totalsInterface.getText=function(name,base){var currentTotal=totals[name]||0;if(text.hasOwnProperty(base)){if(text[base].sValues.indexOf(currentTotal)>-1){return text[base].s;}else{return text[base].p;}}
return"";};totalsInterface.inc=function(name,value){if(totals.hasOwnProperty(name)){totals[name]+=value;}};totalsInterface.dec=function(name,value){if(totals.hasOwnProperty(name)){totals[name]-=value;}};totalsInterface.get=function(name){if(totals.hasOwnProperty(name)){return utilStatic.convertValueToDisplay('',totals[name],$filter('number'),'short',true)}
return 0;};totalsInterface.getFullNumber=function(name){if(totals.hasOwnProperty(name)){return utilStatic.convertValueToDisplay('',totals[name],$filter('number'),'full',true)}
return 0;};return totalsInterface;}]);angular.module('ccc-app').factory('pageInfo',['$http','$timeout','$filter','$window','$location','dateParsing',function pageInfoFactory($http,$timeout,$filter,$window,$location,dateParsing){var utilStatic=CCC.STATIC.UTIL;var sideBarSlot={isActive:false,link:'',imageUrl:''};var aboutItems=[];var displayAboutItems=[];var userCountryCode="US";var exchangesInfo={};var pageTrackingCode=0;var pageTrackingPromise;var pageTrackingType;var secondLevelNav=[];var currentPostId=0;var currentReviewId=0;var seoInfo={};var initialSeoInfo={};var generalInfo={};var pageSubs=[];var streamerDataRaw=[];var pageViewRecorded=true;var ICOInfo={};var ICOTableItems=[];return{setUserCountryCode:function(countryCode){userCountryCode=countryCode;},getUserCountryCode:function(countryCode){return userCountryCode;},trackPage:function(trackingCode,type){if(trackingCode){pageTrackingCode=trackingCode;pageTrackingType=type;if(pageTrackingPromise){$timeout.cancel(pageTrackingPromise);}
pageTrackingPromise=$timeout(function(){var objectToPost={};objectToPost.Code=pageTrackingCode;objectToPost.Type=pageTrackingType;$http.post("/api/tracking/pageview/",objectToPost);if(!pageViewRecorded){$window.ga('send','pageview',{page:$location.url()});}else{pageViewRecorded=false;}},10000,false);}},changeICOToOngoing:function(){if(ICOInfo.Status=="Upcoming"){ICOInfo.Status="Ongoing"};},changeICOToFinished:function(){if(ICOInfo.Status=="Ongoing"){ICOInfo.Status="Finished"};},isICOStage:function(){return ICOInfo.Status=="Ongoing"||ICOInfo.Status=="Upcoming";},isTradingStage:function(){return ICOInfo.Status=="N/A"||ICOInfo.Status=="Finished";},didNotDoAnICO:function(){return ICOInfo.Status=="N/A";},isICOOngoing:function(){return ICOInfo.Status=="Ongoing";},isICOUpcoming:function(){return ICOInfo.Status=="Upcoming";},isICOFinished:function(){return ICOInfo.Status=="Finished";},hasICOData:function(){return ICOInfo.Status!=null&&ICOInfo.Status!="N/A";},hasICOStartDate:function(){return ICOInfo.hasOwnProperty('Date')&&ICOInfo.Date>0;},hasICOEndDate:function(){return ICOInfo.hasOwnProperty('EndDate')&&ICOInfo.EndDate>0;},getICOFeatures:function(){return ICOInfo.Features;},getICOWebsite:function(){return ICOInfo.WebsiteLink;},getICOWhitePaper:function(){return ICOInfo.WhitePaperLink;},getTotalSupply:function(){return generalInfo.TotalCoinSupply;},getInvestorPercent:function(){return ICOInfo.TokenPercentageForInvestors;},getICOFundingTarget:function(){return ICOInfo.FundingTarget;},getICOFundinCap:function(){return ICOInfo.FundingCap;},getICOStartPrice:function(){if(ICOInfo.StartPrice=="N/A"){return ICOInfo.StartPrice};return utilStatic.convertValueToDisplay(ICOInfo.StartPriceCurrency,ICOInfo.StartPrice,$filter('number'),'short',false)},getFundsRaisedUSD:function(){return ICOInfo.FundsRaisedUSD;},getAveragePriceUSD:function(){var avgPrice="N/A";var funds=parseInt(ICOInfo.FundsRaisedUSD);var percent=parseInt(ICOInfo.TokenPercentageForInvestors);var tokens=parseInt(ICOInfo.ICOTokenSupply);if(isNaN(funds)||funds==0){return avgPrice;}
if(isNaN(percent)||percent==0){return avgPrice;}
if(isNaN(tokens)||tokens==0){return avgPrice;}
avgPrice=funds/(percent/100*tokens);return utilStatic.convertValueToDisplay("USD",avgPrice,$filter('number'),'short',false);},getICOCoinsOffered:function(){var coinsOffered="N/A";var percent=parseInt(ICOInfo.TokenPercentageForInvestors);var tokens=parseInt(ICOInfo.ICOTokenSupply);if(isNaN(percent)||percent==0){return coinsOffered;}
if(isNaN(tokens)||tokens==0){return coinsOffered;}
coinsOffered=percent/100*tokens;return utilStatic.convertValueToDisplay('',coinsOffered,$filter('number'),'short',false)+' ('+percent+'%)';},convertStringToNumber:function(data){if(data!=''){if(data=="0"){return"Not Applicable";}
return $filter('number')(data,1);}
return'-';},setCoinPageInfo:function(apiResponse){seoInfo=apiResponse.Data.SEO;for(var attr in apiResponse.Data.SEO){initialSeoInfo[attr]=apiResponse.Data.SEO[attr];}
generalInfo=apiResponse.Data.General;ICOInfo=apiResponse.Data.ICO;pageSubs=apiResponse.Data.Subs;streamerDataRaw=apiResponse.Data.StreamerDataRaw;this.addDisplayAboutItem({'label':'Max Supply','text':this.convertStringToNumber(generalInfo.TotalCoinSupply),'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Algorithm','text':generalInfo.Algorithm||'-','visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Proof Type','text':generalInfo.ProofType||'-','visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Start Date','text':generalInfo.StartDate||'-','visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Twitter','text':'<a href="https://twitter.com/'+generalInfo.Twitter.replace('@','')+'" target="_blank">'+generalInfo.Twitter+'</a>'||'-','visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Website','text':generalInfo.Website||'-','visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'DifficultyAdj.','text':generalInfo.DifficultyAdjustment||"-",'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'BlockRR.','text':generalInfo.BlockRewardReduction||"-",'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'BlockNo.','text':this.convertStringToNumber(generalInfo.BlockNumber),'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Network H/s','text':this.convertStringToNumber(generalInfo.NetHashesPerSecond),'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Current Supply','text':this.convertStringToNumber(generalInfo.TotalCoinsMined),'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Block Reward','text':this.convertStringToNumber(generalInfo.BlockReward),'visible':true,'hasExtraInfo':false,'extraInfo':''});if(ICOInfo.Status!="N/A"){this.addICOTableItem({'label':'Status','text':ICOInfo.Status,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Token Platform','text':ICOInfo.TokenType,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Public Portfolio','text':ICOInfo.PublicPortfolioUrl,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Token Reserve Split','text':ICOInfo.TokenReserveSplit,'visible':true,'hasExtraInfo':true,'extraInfo':'T - team, partners, contributors, and avisers, B - bounties, C - held by company or foundation, O - other'});this.addICOTableItem({'label':'Token percentage for investors','text':ICOInfo.TokenPercentageForInvestors+"%",'visible':true,'hasExtraInfo':true,'extraInfo':'This is the percentage of token sale supply not of max supply.'});if(ICOInfo.ICOTokenSupply=="N/A"){this.addICOTableItem({'label':'Total token supply','text':'N/A','visible':true,'hasExtraInfo':true,'extraInfo':'Total max supply is '+this.convertStringToNumber(generalInfo.TotalCoinSupply)});}else{this.addICOTableItem({'label':'Total tokens supply','text':utilStatic.convertValueToDisplay("",ICOInfo.ICOTokenSupply,$filter('number'),'short',false),'visible':true,'hasExtraInfo':true,'extraInfo':'Total max supply is '+this.convertStringToNumber(generalInfo.TotalCoinSupply)});}
if(ICOInfo.Date>0){this.addICOTableItem({'label':'Start Date','text':$filter('date')(ICOInfo.Date*1000,"yyyy, dd MMM H:mm:ss"),'visible':true,'hasExtraInfo':false,'extraInfo':''});}else{this.addICOTableItem({'label':'Start Date','text':'Not Available','visible':true,'hasExtraInfo':false,'extraInfo':''});}
if(ICOInfo.EndDate>0){this.addICOTableItem({'label':'End Date','text':$filter('date')(ICOInfo.EndDate*1000,"yyyy, dd MMM H:mm:ss"),'visible':true,'hasExtraInfo':false,'extraInfo':''});}else{this.addICOTableItem({'label':'End Date','text':'Not Available','visible':true,'hasExtraInfo':false,'extraInfo':''});}
this.addICOTableItem({'label':'Token supply post sale','text':ICOInfo.TokenSupplyPostICO,'visible':true,'hasExtraInfo':false,'extraInfo':''});if(ICOInfo.StartPrice=="N/A"){this.addICOTableItem({'label':'Start price','text':'N/A','visible':true,'hasExtraInfo':false,'extraInfo':''});}else{this.addICOTableItem({'label':'Start price','text':utilStatic.convertValueToDisplay(ICOInfo.StartPriceCurrency,ICOInfo.StartPrice,$filter('number'),'short',false),'visible':true,'hasExtraInfo':true,'extraInfo':'Full Price: '+ICOInfo.StartPrice});}
this.addICOTableItem({'label':'Funding target','text':ICOInfo.FundingTarget,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Funding cap','text':ICOInfo.FundingCap,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Average price','text':this.getAveragePriceUSD(),'visible':true,'hasExtraInfo':true,'extraInfo':'This is calculated as:funds raised USD / (total tokens sold * pct sold to investors)'});this.addICOTableItem({'label':'Funds raised list','text':ICOInfo.FundsRaisedList,'visible':true,'hasExtraInfo':true,'extraInfo':'Funds raised in total over different payment methods'});if(ICOInfo.FundsRaisedUSD=="N/A"){this.addICOTableItem({'label':'Funds raised USD','text':'N/A','visible':true,'hasExtraInfo':false,'extraInfo':''});}else{this.addICOTableItem({'label':'Funds raised USD','text':utilStatic.convertValueToDisplay("USD",ICOInfo.FundsRaisedUSD,$filter('number'),'short',false),'visible':true,'hasExtraInfo':false,'extraInfo':''});}
this.addICOTableItem({'label':'Payment method','text':ICOInfo.PaymentMethod,'visible':true,'hasExtraInfo':true,'extraInfo':'Ways of contributing to the token sale'});this.addICOTableItem({'label':'Features','text':ICOInfo.Features,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Security Audit','text':ICOInfo.SecurityAuditCompany,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Legal Form','text':ICOInfo.LegalForm,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Jurisdiction','text':ICOInfo.Jurisdiction,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Legal Advisers','text':ICOInfo.LegalAdvisers,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Sale Website','text':ICOInfo.Website,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'Blog','text':ICOInfo.Blog,'visible':true,'hasExtraInfo':false,'extraInfo':''});this.addICOTableItem({'label':'White paper','text':ICOInfo.WhitePaper,'visible':true,'hasExtraInfo':false,'extraInfo':''});}},setCurrentPageSection:function(pageSection){generalInfo.CurrentPageSection=pageSection;},setExchangePageInfo:function(apiResponse){seoInfo=apiResponse.Data.SEO;for(var attr in apiResponse.Data.SEO){initialSeoInfo[attr]=apiResponse.Data.SEO[attr];}
generalInfo=apiResponse.Data.General;pageSubs=apiResponse.Data.Subs;streamerDataRaw=apiResponse.Data.StreamerDataRaw;this.addDisplayAboutItem({'label':'Country','text':generalInfo.Country||'-','visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Twitter','text':'<a href="https://twitter.com/'+generalInfo.Twitter.replace('@','')+'" target="_blank">'+generalInfo.Twitter+'</a>'||'-','visible':true,'hasExtraInfo':false,'extraInfo':''});this.addDisplayAboutItem({'label':'Website','text':generalInfo.Website||'-','visible':true,'hasExtraInfo':false,'extraInfo':''});},setAllExchangesInfo:function(apiResponse){exchangesInfo=apiResponse.Data;},setPaymentMethods:function(methodsList){generalInfo.PaymentMethods=[];if(methodsList!=""){generalInfo.PaymentMethods=methodsList.split(",");}},setDepositMethods:function(methodsList){generalInfo.DepositMethods=[];if(methodsList!=""){generalInfo.DepositMethods=methodsList.split(",");}},setWithdrawalMethods:function(methodsList){generalInfo.WithdrawalMethods=[];if(methodsList!=""){generalInfo.WithdrawalMethods=methodsList.split(",");}},setHistoricalPriceData:function(apiHistoricalData){generalInfo.HistoricalPriceData=apiHistoricalData.Data;},setSideBarSlot:function(obj){sideBarSlot=obj;},setPageId:function(id){generalInfo.Id=id;},setBaseUrl:function(bUrl){generalInfo.BaseAngularUrl=bUrl;},setDocumentType:function(dType){generalInfo.DocumentType=dType;},setH1Text:function(value){generalInfo.H1Text=value;},setSymbol:function(value){generalInfo.Symbol=value;},setToSymbol:function(value){generalInfo.ToSymbol=value;},setInfoName:function(value){generalInfo.Name=value;},setInfoDescription:function(value){generalInfo.Description=value;},setFeaturesInfo:function(value){generalInfo.Features=value;},setTechnologyInfo:function(value){generalInfo.Technology=value;},setLogo:function(value){generalInfo.ImageUrl=value;},addICOTableItem:function(item){ICOTableItems.push(item);},addDisplayAboutItem:function(item){displayAboutItems.push(item);},setDisplayAboutItems:function(arrayOfObjects){displayAboutItems=arrayOfObjects;},setForumId:function(value){generalInfo.Id=value;},setReviewsId:function(value){generalInfo.Id=value;},setSecondLevelNav:function(arrayOfObjects){secondLevelNav=arrayOfObjects;},setCurrentPostId:function(postId){currentPostId=postId;},setCurrentReviewId:function(reviewId){currentReviewId=reviewId;},setBaseSEOTitle:function(baseSEOTitle){seoInfo.BaseSEOTitle=baseSEOTitle;},setSEOTitle:function(seoTitle){seoInfo.PageTitle=seoTitle;},setInitialSEOTitle:function(){seoInfo.BaseSEOTitle=initialSeoInfo.PageTitle.replace(generalInfo.H1Text+' - ','');},addToSymbolToSEOTitle:function(){seoInfo.PageTitle=generalInfo.H1Text+' - '+generalInfo.ToSymbol+' - '+seoInfo.BaseSEOTitle;},setBaseSEODescription:function(baseSEODescription){seoInfo.BaseSEOPageDescription=baseSEODescription;},setSEODescription:function(seoDescription){seoInfo.PageDescription=seoDescription;},setInitialSEODescription:function(){seoInfo.BaseSEOPageDescription="{{currencyPair}} - "+initialSeoInfo.PageDescription;},addToSymbolToSEODescription:function(){seoInfo.PageDescription=seoInfo.BaseSEOPageDescription.replace(/{{currencyPair}}/g,generalInfo.H1Text+' - '+generalInfo.ToSymbol);},setOgImageWidth:function(ogImageWidth){seoInfo.OgImageWidth=ogImageWidth;},setInitialOgImageWidth:function(){seoInfo.OgImageWidth=initialSeoInfo.OgImageWidth;},setOgImageHeight:function(ogImageHeight){seoInfo.OgImageHeight=ogImageHeight;},setInitialOgImageHeight:function(){seoInfo.OgImageHeight=initialSeoInfo.OgImageHeight;},setOgImage:function(ogImageUrl){seoInfo.OgImageUrl=ogImageUrl;},setInitialOgImage:function(){seoInfo.OgImage=initialSeoInfo.OgImage;},hasIndividualSponsor:function(){return generalInfo.hasOwnProperty("IndividualSponsor");},getIndividualSponsorText:function(){if(this.hasIndividualSponsor()){if(generalInfo.IndividualSponsor.hasOwnProperty("Text")&&generalInfo.IndividualSponsor.Text!=""){return generalInfo.IndividualSponsor.Text;}}
return"";},getIndividualSponsorLogo:function(){if(this.hasIndividualSponsor()){if(generalInfo.IndividualSponsor.hasOwnProperty("AffiliateLogo")&&generalInfo.IndividualSponsor.AffiliateLogo!=""){return generalInfo.IndividualSponsor.AffiliateLogo;}}
return"";},getIndividualSponsorUrl:function(){if(this.hasIndividualSponsor()){return generalInfo.IndividualSponsor.Link;}
return"https://wwww.cryptocompare.com";},getIndividualSponsorExcludedCountries:function(){if(this.hasIndividualSponsor()){return generalInfo.IndividualSponsor.ExcludedCountries;}
return"";},getImageSponsorExcludedCountries:function(){if(this.hasSponsor()){if(generalInfo.Sponsor.hasOwnProperty("ExcludedCountries")&&generalInfo.Sponsor.ExcludedCountries!=""){return generalInfo.Sponsor.ExcludedCountries;}}
return"";},hasSponsor:function(){return generalInfo.hasOwnProperty("Sponsor");},getSponsorTextTop:function(){if(this.hasSponsor()){if(generalInfo.Sponsor.hasOwnProperty("TextTop")&&generalInfo.Sponsor.TextTop!=""){return generalInfo.Sponsor.TextTop;}}
return"";},getSponsorLink:function(){if(this.hasSponsor()){return generalInfo.Sponsor.Link;}
return"https://wwww.cryptocompare.com";},getSponsorImageUrl:function(){if(this.hasSponsor()){return generalInfo.Sponsor.ImageUrl;}
return"https://wwww.cryptocompare.com/media/351339/crypto-compare-70-18.png";},getBaseUrl:function(){return generalInfo.BaseAngularUrl;},getDocumentType:function(){return generalInfo.DocumentType;},getH1Text:function(){return generalInfo.H1Text;},getH1TextTrimChars:function(stringToTrim){var index=generalInfo.H1Text.indexOf(stringToTrim);if(index!=-1)
return generalInfo.H1Text.substr(0,index)
return generalInfo.H1Text;},getSymbol:function(){return generalInfo.Symbol;},getInfoName:function(){return generalInfo.Name;},getInfoDescription:function(){return generalInfo.Description;},getICODescription:function(){return ICOInfo.Description;},getICOStatus:function(){return ICOInfo.Status;},getICOTokenType:function(){return ICOInfo.TokenType;},getICOStartDate:function(){return ICOInfo.Date*1000;},getICOEndDate:function(){return ICOInfo.EndDate*1000;},getFeaturesInfo:function(){return generalInfo.Features;},getTechnologyInfo:function(){return generalInfo.Technology;},getLogo:function(){return generalInfo.ImageUrl;},getDisplayAboutItems:function(){return displayAboutItems;},getICOTableItems:function(){return ICOTableItems;},getPageId:function(){return generalInfo.Id;},getForumId:function(){return generalInfo.Id;},getReviewsId:function(){return generalInfo.Id;},getSecondLevelNav:function(){return secondLevelNav;},getCoinsMined:function(){return generalInfo.TotalCoinsMined;},getTwitterHandle:function(){return generalInfo.Twitter;},getTwitterHandleNoAtSign:function(){return generalInfo.Twitter.replace('@','');},getCurrentPostId:function(){return currentPostId;},getCurrentReviewId:function(){return currentReviewId;},getGeneralInfoItem:function(itemName){if(generalInfo.hasOwnProperty(itemName)){return generalInfo[itemName];}
return"";},getDangerTop:function(){return generalInfo.DangerTop;},getWarningTop:function(){return generalInfo.WarningTop;},getToSymbol:function(){return generalInfo.ToSymbol;},getInfoTop:function(){return generalInfo.InfoTop;},getSEOTitle:function(){return seoInfo.PageTitle;},getSEODescription:function(){return seoInfo.PageDescription;},getOgImageWidth:function(){return seoInfo.OgImageWidth;},getOgImageHeight:function(){return seoInfo.OgImageHeight;},getOgImage:function(){return seoInfo.OgImageUrl;},getPageSubs:function(){return pageSubs;},getStreamerDataRaw:function(){return streamerDataRaw;},getPaymentMethods:function(){return generalInfo.PaymentMethods||[];},getDepositMethods:function(){return generalInfo.DepositMethods||[];},getWithdrawalMethods:function(){return generalInfo.WithdrawalMethods||[];},getWebsite:function(){return generalInfo.AffiliateUrl||generalInfo.WebsiteUrl||"";},getAllExchangesInfo:function(){return exchangesInfo;},hasHistoricalPriceData:function(){return generalInfo.hasOwnProperty("HistoricalPriceData");},getSideBarSlot:function(){return sideBarSlot;},getBasesCanURL:function(){if(generalInfo.hasOwnProperty('ToSymbol')&&generalInfo.hasOwnProperty('CurrentPageSection')){if(generalInfo.CurrentPageSection=="post"){return seoInfo.BaseUrl+generalInfo.BaseAngularUrl+generalInfo.CurrentPageSection+'/p_'+currentPostId+'/';}else if(generalInfo.CurrentPageSection=="influence"||generalInfo.CurrentPageSection=="forum"){return seoInfo.BaseUrl+generalInfo.BaseAngularUrl+generalInfo.CurrentPageSection+'/';}else{return seoInfo.BaseUrl+generalInfo.BaseAngularUrl+generalInfo.CurrentPageSection+'/'+generalInfo.ToSymbol;}}
return'';},getAMPURL:function(){if(generalInfo.CurrentPageSection=="post"){return seoInfo.BaseUrl+generalInfo.BaseAngularUrl+generalInfo.CurrentPageSection+'/p_'+currentPostId+'/';}else if(generalInfo.CurrentPageSection=="forum"){return seoInfo.BaseUrl+generalInfo.BaseAngularUrl+generalInfo.CurrentPageSection+'/';}
if(generalInfo.hasOwnProperty('ToSymbol')){return seoInfo.BaseUrl+generalInfo.BaseAngularUrl+'overview/'+generalInfo.ToSymbol;}
return seoInfo.BaseUrl+generalInfo.BaseAngularUrl+'overview/USD';}};}]);angular.module('ccc-app').factory('pageAlerts',[function pageAlertsFactory(){var topAlerts=[];return{setTopAlerts:function(arrayOfObjects){topAlerts=arrayOfObjects;},addDangerTopAlert:function(alertMessage){topAlerts.push({type:'danger',msg:alertMessage});},addWarningTopAlert:function(alertMessage){topAlerts.push({type:'warning',msg:alertMessage});},addSuccessTopAlert:function(alertMessage){topAlerts.push({type:'success',msg:alertMessage});},removeTopAlert:function(index){topAlerts.splice(index,1);},getTopAlerts:function(){return topAlerts;}};}]);angular.module('ccc-app').factory('toastNotifications',['$timeout','$http',function toastNotificationsFactory($timeout,$http){var toastNotifications=[];var messageTypes=['info','warning','error','success'];var messageTypeToTitle={'info':"Update",'warning':"Warning...",'error':"Error!",'success':"Thanks!"}
var removeNotification=function(ts){for(var i=0,length=toastNotifications.length;i<length;i++){if(toastNotifications[i].Timestamp==ts){toastNotifications.splice(i,1);return;}}}
return{addNotification:function(type,message){var timestamp=new Date().getTime();toastNotifications.push({'Timestamp':timestamp,'Title':messageTypeToTitle[type],'Type':type,'Message':message});$timeout(function(){removeNotification(timestamp)},8000);},deleteNotification:function(timestamp){removeNotification(timestamp);},getNotifications:function(){return toastNotifications;}};}]);angular.module('ccc-app').factory('notificationsManager',['$http','$interval',function notificationsManagerFactory($http,$interval){var notifications=[];var fakeUsernames=['Vladadry','jgpgw','sorinilie','electronpozitive','ardeleanudaniela80','BitcoinPaul','AngularRocks','Sorinel','SorSorIlie','MeVlad'];var fakeDescription=['Trezor wallet...','Coinbase wallet issue... ','Will bitcoin hit $200 this year?...','Bought nutella with bitcoin..','Bitfinex exchange fee...','Is now a good time to buy DRK...','What is SHA256 and how does it work?..','I think this is just temporary...','I diasgree, Jgpgw, I think...','Did you guys see...'];var notifTypes=['Agree','Disagree','Comment','Favorit'];var toType=['Post','Review','Comment'];var createNotification=function(){var randomNum=Math.floor(Math.random()*15)+1;var newNotif={Type:notifTypes[randomNum%4],Time:Math.floor(new Date()/1000),From:{Type:'Cryptopian',Username:fakeUsernames[randomNum%10],AvatarUrl:'https://randomuser.me/api/portraits/med/men/'+randomNum+'.jpg'},To:{Type:toType[randomNum%3],ID:2123,URL:'/forum/btc',Description:fakeDescription[randomNum%10]},'isNew':true,'isRead':false};return newNotif;};return{addNotification:function(notificationObject){notifications.unshift(notificationObject);if(notifications.length>20)
{var lastNotification=notifications.pop();lastNotification=null;}},setNotifications:function(notificationsArray){notifications=notificationsArray;},getNotifications:function(){return notifications;},getNewNotificaticationsCount:function(){var count=0;angular.forEach(notifications,function(notification){count+=notification.isRead?0:1;});return count;},markAsRead:function(){angular.forEach(notifications,function(notification){notification.isRead=true;});$http.post('/api/notifications/read').success(function(data){});}};}]);angular.module('ccc-app').factory('subscriptionManager',['$rootScope','$http',function subscriptionManagerFactory($rootScope,$http){var utilStatic=CCC.STATIC.UTIL;var currentSubs=[];var currentToSymbol='';var tradeSubs=[];var currentAGGSubsObj={};var currentExchangesInfo={};var currentSubsClasification=[];var currentSubsObject={};var currentChartSubsObj={};var currentTradeSubsObj={};var currentAggKeysOrder={};var orderOnEqual={'BTC':1,'USD':2,'EUR':3,'GBP':4};var currentAGGCharts={};var currentOrderBookSubsObj={};var defaultAggChart={'exchange':'N/A','fromsymbol':'N/A','tosymbol':'N/A'};var splitSub=function(sub){var subParts=sub.split("~");var obj={'TYPE':subParts[0]};switch(subParts[0]){case CCC.STATIC.TYPE.TRADE:obj['EXCHANGE']=subParts[1];obj['FROMSYMBOL']=subParts[2];obj['TOSYMBOL']=subParts[3];break;case CCC.STATIC.TYPE.CURRENTAGG:case CCC.STATIC.TYPE.CURRENT:obj['EXCHANGE']=subParts[1];obj['FROMSYMBOL']=subParts[2];obj['TOSYMBOL']=subParts[3];break;}
return obj;};var createTradeSub=function(obj){return CCC.STATIC.TYPE.TRADE+'~'+obj.EXCHANGE+'~'+obj.FROMSYMBOL+'~'+obj.TOSYMBOL;};var createAggSub=function(obj){return CCC.STATIC.TYPE.CURRENTAGG+'~CCCAGG~'+obj.FROMSYMBOL+'~'+obj.TOSYMBOL;};var createCurrentSub=function(obj){return CCC.STATIC.TYPE.CURRENT+'~'+obj.EXCHANGE+'~'+obj.FROMSYMBOL+'~'+obj.TOSYMBOL;};var createOrderBookSub=function(obj){return CCC.STATIC.TYPE.ORDERBOOK+'~'+obj.EXCHANGE+'~'+obj.FROMSYMBOL+'~'+obj.TOSYMBOL;};var createAggChart=function(obj){return{'exchange':'CCCAGG','fromsymbol':obj.FROMSYMBOL,'tosymbol':obj.TOSYMBOL}};var createChartSub=function(obj){return{'exchange':obj.EXCHANGE,'fromsymbol':obj.FROMSYMBOL,'tosymbol':obj.TOSYMBOL}};var aggSubsByToSymbol=function(){for(var i=0;i<currentSubs.length;i++){var addOrderBookSub=false;var subObj=splitSub(currentSubs[i]);if(!currentSubsObject.hasOwnProperty(subObj.TOSYMBOL)){currentSubsObject[subObj.TOSYMBOL]=[];}
if(!currentTradeSubsObj.hasOwnProperty(subObj.TOSYMBOL)){currentTradeSubsObj[subObj.TOSYMBOL]=[];}
if(!currentChartSubsObj.hasOwnProperty(subObj.TOSYMBOL)){currentChartSubsObj[subObj.TOSYMBOL]=[];}
if(!currentOrderBookSubsObj.hasOwnProperty(subObj.TOSYMBOL)&&currentExchangesInfo.hasOwnProperty(subObj.EXCHANGE)&&currentExchangesInfo[subObj.EXCHANGE].OrderBook==true){currentOrderBookSubsObj[subObj.TOSYMBOL]=[];addOrderBookSub=true;}
currentTradeSubsObj[subObj.TOSYMBOL].push(createTradeSub(subObj));currentSubsObject[subObj.TOSYMBOL].push(createCurrentSub(subObj));currentChartSubsObj[subObj.TOSYMBOL].push(createChartSub(subObj));if(addOrderBookSub){currentOrderBookSubsObj[subObj.TOSYMBOL].push(createOrderBookSub(subObj));}
if(!currentAGGCharts.hasOwnProperty(subObj.TOSYMBOL)){currentAGGCharts[subObj.TOSYMBOL]=createAggChart(subObj);}
if(!currentAGGSubsObj.hasOwnProperty(subObj.TOSYMBOL)){currentAGGSubsObj[subObj.TOSYMBOL]=createAggSub(subObj);}}
currentSubsClasification=Object.keys(currentSubsObject);if(currentSubsClasification.length>1){currentSubsClasification.sort(function(a,b){if(currentSubsObject[a].length>currentSubsObject[b].length){return-1;}
if(currentSubsObject[a].length<currentSubsObject[b].length){return 1;}
if(orderOnEqual.hasOwnProperty(a)){if(orderOnEqual.hasOwnProperty(b)){if(orderOnEqual[a]<orderOnEqual[b]){return-1;}else{return 1;}}else{return-1;}}else if(orderOnEqual.hasOwnProperty(b)){return 1;}
return 0;});};};return{hasSubs:function(){if(currentSubs.length>0)
return true;if(tradeSubs.length>0)
return true;return false;},setCurrentToSymbol:function(toSymbol){currentToSymbol=toSymbol;},setCurrentSubs:function(subs,exchangesInfo){currentSubs=subs;currentExchangesInfo=exchangesInfo;aggSubsByToSymbol();currentToSymbol=currentSubsClasification[0]||"";},setTradeSubs:function(subs){tradeSubs=subs;},getTopCurrentSubs:function(){if(currentToSymbol!=""&&currentSubsObject.hasOwnProperty(currentToSymbol))
return currentSubsObject[currentToSymbol];return[];},getCurrentSubsObj:function(){return currentSubsObject;},getCurrentSubsByToSymbol:function(toSymbol){return currentSubsObject[toSymbol]||[];},getCurrentSubsClassification:function(){return currentSubsClasification;},getCurrentDisplaySubs:function(){return currentSubsDisplay||[];},getComputedTradeSubsObj:function(){return currentTradeSubsObj;},getComputedTradeSubsBySymbol:function(toSymbol){return currentTradeSubsObj[toSymbol]||[];},getComputedTradeSubs:function(){if(currentToSymbol!=""&&currentTradeSubsObj.hasOwnProperty(currentToSymbol))
return currentTradeSubsObj[currentToSymbol];return[];},getComputedOrderBookSubsObj:function(){return currentOrderBookSubsObj;},getComputedOrderBookSubsBySymbol:function(toSymbol){return currentOrderBookSubsObj[toSymbol]||[];},getComputedOrderBookSubs:function(){if(currentToSymbol!=""&&currentOrderBookSubsObj.hasOwnProperty(currentToSymbol))
return currentOrderBookSubsObj[currentToSymbol];return[];},getInputTradeSubs:function(){return tradeSubs||[];},getCurrentAGGSubsObj:function(toSymbol){return currentAGGSubsObj;},getCurrentAGGSubByToSymbol:function(toSymbol){if(currentAGGSubsObj.hasOwnProperty(toSymbol))
return[currentAGGSubsObj[toSymbol]]
return[];},getCurrentAGGSub:function(){if(currentToSymbol!=""&&currentAGGSubsObj.hasOwnProperty(currentToSymbol))
return[currentAGGSubsObj[currentToSymbol]]
return[];},getCurrentChartObj:function(){return currentChartSubsObj;},getCurrentChartDataSets:function(){if(currentToSymbol!=""&&currentChartSubsObj.hasOwnProperty(currentToSymbol))
return currentChartSubsObj[currentToSymbol];return[];},getCurrentChartDataSetsByToSymbol:function(toSymbol){return currentChartSubsObj[toSymbol]||[];},getCurrentAggChartByToSymbol:function(toSymbol){return currentAGGCharts[toSymbol]||defaultAggChart;},getCurrentAggChartObj:function(){return currentAGGCharts},getCurrentAggChart:function(){if(currentToSymbol!=""&&currentAGGCharts.hasOwnProperty(currentToSymbol))
return currentAGGCharts[currentToSymbol];return defaultAggChart;},changeCurrency:function(symbol){if(symbol!=currentToSymbol){currentToSymbol=symbol;$rootScope.$emit("ChangeCurrency",symbol);}},changeView:function(viewName){$rootScope.$emit("ChangeView",viewName);},getCurrentToSymbol:function(){return currentToSymbol;},getNameForExchange:function(exchangeName){return utilStatic.getNameForExchange(exchangeName);},getTopPairsFromMinApi:function(fsym,limit){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['fsym']=fsym;if(limit){paramsForCall['params']['limit']=limit;}
return $http.get(CCC.minApiUrl+"data/top/pairs",paramsForCall);},getTopExchangesFromMinApi:function(fsym,tsym,limit){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['fsym']=fsym;paramsForCall['params']['tsym']=tsym;if(limit){paramsForCall['params']['limit']=limit;}
return $http.get(CCC.minApiUrl+"data/top/exchanges",paramsForCall);}};}]);angular.module('ccc-app').factory('dateParsing',['$filter',function dateParsingFactory($filter){return{formatTimePast:function(timestamp){var seconds=Math.floor((new Date()-new Date(timestamp))/1000);var interval=Math.floor(seconds/31536000);if(interval>1){return interval+" years";}else if(interval==1){return"year";}
interval=Math.floor(seconds/2592000);if(interval>1){return interval+" months";}else if(interval==1){return"month";}
interval=Math.floor(seconds/86400);if(interval>1){return interval+" days";}else if(interval==1){return"day";}
interval=Math.floor(seconds/3600);if(interval>1){return interval+" hours";}else if(interval==1){return"hour";}
interval=Math.floor(seconds/60);if(interval>=1){return interval+" minutes";}
return"minute";},formatFromNow:function(timestamp){var seconds=Math.floor((new Date()-new Date(timestamp))/1000);var interval=Math.floor(seconds/31536000);if(interval>1){return interval+" years ago";}else if(interval==1){return"1 year ago";}
interval=Math.floor(seconds/2592000);if(interval>1){return interval+" months ago";}else if(interval==1){return"1 month ago";}
interval=Math.floor(seconds/86400);if(interval>1){return interval+" days ago";}else if(interval==1){return"1 day ago";}
interval=Math.floor(seconds/3600);if(interval>1){return interval+" hours ago";}else if(interval==1){return"1 hour ago";}
interval=Math.floor(seconds/60);if(interval>=1){return interval+" min ago";}
return"Just now";},formatFromNowDays:function(timestamp){var seconds=Math.floor((new Date()-new Date(timestamp))/1000);var interval=Math.floor(seconds/31536000);if(interval>1){return"over "+interval+" years ago";}else if(interval==1){return"over 1 year ago";}
interval=Math.floor(seconds/2592000);if(interval>1){if(interval==12){return"1 year ago";}
return interval+" months ago";}else if(interval==1){return"1 month ago";}
interval=Math.floor(seconds/86400);if(interval>1){return interval+" days ago";}else if(interval==1){return"yesterday";}
return"today";},formatTimespan:function(seconds){seconds=Math.floor(seconds);var d=Math.floor(seconds/86400);var h=Math.floor(seconds%86400/3600);var m=Math.floor(seconds%3600/60);var s=Math.floor(seconds%3600%60);return((d>0?d+"d:":"")+(h>0?(d>0&&h<10?"0":"")+h+"h:":"0h:")+(m>0?(h>0&&m<10?"0":"")+m+"m:":"0m:")+(s<10?"0":"")+s+"s");},formatLongDate:function(timestamp){return $filter('date')(new Date(timestamp),"EEEE, dd MMMM yyyy 'at' HH:mm");},formatShortDate:function(timestamp){return $filter('date')(new Date(timestamp),"yyyy-MM-dd");},formatShortTime:function(timestamp){return $filter('date')(new Date(timestamp),"HH:mm");},formatShortYear:function(timestamp){return $filter('date')(new Date(timestamp),"yyyy");},formatMediumDateNoTime:function(timestamp){return $filter('date')(new Date(timestamp),"dd MMMM yyyy");},formatLongDateNoTime:function(timestamp){return $filter('date')(new Date(timestamp),"EEEE, dd MMMM yyyy");},formatDateMonthYear:function(timestamp){return $filter('date')(new Date(timestamp),"MMMM yyyy");},formatLongDateNoTimeWS:function(timestamp){var dayOfWeek=new Date(timestamp).getDay();var diffFromCurrentToWeekStart=new Date(timestamp).getDate()-dayOfWeek+(dayOfWeek==0?-6:1);var startOfWeek=new Date(new Date(timestamp).setDate(diffFromCurrentToWeekStart));return $filter('date')(startOfWeek,"dd MMMM yyyy");},formatLongDateNoTimeWE:function(timestamp){var dayOfWeek=new Date(timestamp).getDay();var diffFromCurrentToWeekStart=new Date(timestamp).getDate()-dayOfWeek+(dayOfWeek==0?-6:1);var endOfWeek=new Date(new Date(timestamp).setDate(diffFromCurrentToWeekStart+6));return $filter('date')(endOfWeek,"dd MMMM yyyy");},formatLongDateNoTimeMS:function(timestamp){var currentDate=new Date(timestamp);var startOfMonth=new Date(currentDate.getFullYear(),currentDate.getMonth(),1);return $filter('date')(startOfMonth,"dd MMMM yyyy");},formatLongDateNoTimeME:function(timestamp){var currentDate=new Date(timestamp);var endOfMonth=new Date(currentDate.getFullYear(),currentDate.getMonth()+1,0);return $filter('date')(endOfMonth,"dd MMMM yyyy");},unixTimestamp:function(secondsToSubstract){return Math.round((new Date()).getTime()/1000)-secondsToSubstract;}}}]);angular.module('ccc-app').service('cModalService',['$uibModal','userManager','$q',function($uibModal,userManager,$q){this.showLoginModal=function(messageForLogin,action,callback){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/login',controller:'LoginRegisterCtrl',size:'cm',backdrop:'static',keyboard:false,resolve:{params:function(){return{ActionStage:0,Message:messageForLogin,Action:action};}}});modalInstance.result.then(function(message){userManager.setShowingLogin(false);if(callback){callback();}},function(){userManager.setShowingLogin(false);});};this.showPasswordResetModal=function(){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/login',controller:'LoginRegisterCtrl',size:'md',resolve:{params:function(){return{ActionStage:2,Message:''};}}});modalInstance.result.then(function(message){userManager.setShowingLogin(false);},function(){userManager.setShowingLogin(false);});};this.showChangeAvatarModal=function(){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/changeavatar',controller:'ChangeAvatarCtrl'});};this.showGenericModal=function(title,body,confirmCallback,cancelCallback){var template=` 
   <div class="modal-header"> 
    <h3 class="modal-title">`+title+`
     <button type="button" class="close" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button> 
    </h3> 
   </div> 
   <div class="modal-body" style="text-align: center;"> 
    `+body+`
   </div> 
   <div class="modal-footer" style="text-align: center;"> 
    <a class="btn btn-default"><span ng-click="close()">Cancel</span></a> 
    <a class="btn btn-success"><span ng-click="confirm()">Confirm</span></a> 
   </div>`;var modalInstance=$uibModal.open({template:template,controller:function($scope,$uibModalInstance,confirmCallback,cancelCallback){$scope.close=function(){cancelCallback();$uibModalInstance.close();};$scope.confirm=function(){confirmCallback();$uibModalInstance.close();}},resolve:{confirmCallback:function(){return confirmCallback;},cancelCallback:function(){return cancelCallback;}}});};this.paymentFailedModal=function(){var template=` 
   <div class="modal-header"> 
    <h3 class="modal-title">Payment Unsuccessful 
     <button type="button" class="close" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button> 
    </h3> 
   </div> 
   <div class="modal-body" style="text-align: center;"> 
    Your chosen payment method was unsuccessful, please try again, or if the problem persists, contact our support team. 
   </div> 
   <div class="modal-footer" style="text-align: center;"> 
    <a class="btn btn-success"><span ng-click="close()">Ok :(</span></a> 
   </div>`;var modalInstance=$uibModal.open({template:template,controller:function($scope,$uibModalInstance){$scope.close=function(){$uibModalInstance.close();};},resolve:{}});};this.showUpgradeSubscriptionModal=function(doUpgrade,type,newPrice,yearToMonth){var yearToMonthMessage='';if(yearToMonth){yearToMonthMessage=`<p>Please note you are changing from a yearly subscription to a monthly subscription. This will take immediate effect.</p>`;}
if(type==="upgrade"){var template=` 
    <div class="modal-header"> 
     <h3 class="modal-title">Upgrade API Subscription 
      <button type="button" class="close" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button> 
     </h3> 
    </div> 
    <div class="modal-body" style="text-align: center;"> 
     Upgrading to this tier will immediately charge you $`+newPrice+`. `+yearToMonthMessage+`
     <p>For enquiries please contact our <a href="mailto:info@cryptocompare.com">Support Team</a></p>
    </div> 
    <div class="modal-footer" style="text-align: center;"> 
     <a class="btn btn-default"><span ng-click="cancel()">Cancel</span></a> 
     <a class="btn btn-success"><span ng-click="confirm()">Confirm</span></a> 
    </div>`;}else{var template=` 
    <div class="modal-header"> 
     <h3 class="modal-title">Downgrade API Subscription 
      <button type="button" class="close" aria-label="Close" ng-click="cancel()"><span aria-hidden="true">&times;</span></button> 
     </h3> 
    </div> 
    <div class="modal-body" style="text-align: center;">
     <p>Your API Subscription will be downgraded at the next payment period.</p> 
     <p>For enquiries please contact our <a href="mailto:info@cryptocompare.com">Support Team</a></p>
    </div> 
    <div class="modal-footer" style="text-align: center;"> 
     <a class="btn btn-default"><span ng-click="cancel()">Cancel</span></a> 
     <a class="btn btn-success"><span ng-click="confirm()">Confirm</span></a> 
    </div>`;}
var modalInstance=$uibModal.open({template:template,controller:'UpgradeSubscriptionModal',resolve:{doUpgrade:function(){return doUpgrade;},type:function(){return type;}}});};this.showEnterpriseInformationModal=function(email){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/enterprise-information',controller:'EnterpriseInformationModal',resolve:{params:function(){return{"email":email};}}});};this.showActivationReminderModal=function(){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/activationreminder',controller:'ActivationReminderCtrl'});}
this.showBanModal=function(passedCryptopian){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/ban',controller:'BanCtrl',size:'md',resolve:{passedCryptopian:function(){return passedCryptopian;}}});}
this.showQrCodeModal=function(showQrCodeCallback){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/addqr',controller:['$scope','$uibModalInstance','$http','params','toastNotifications',function showCurrentPasswordModalCtrl($scope,$uibModalInstance,$http,params,toastNotifications){$scope.sendingDetailsToApi=false;$scope.passwordError=false;$scope.twoFactorCodeErr=false;$scope.sendingAuthCodeToApi=false;$scope.twoFactorCodeErrMessage="";$scope.twoFactorAuthCode="";$scope.currentPassword="";$scope.qrCodeCreated=false;$scope.secretCodeFromApi="";$scope.cancelModal=function(messageToPassToToast){$uibModalInstance.dismiss(messageToPassToToast);};var dataForQrCodeString="";var demoId=document.getElementById("qrcode");$scope.isQrCodeValid=function(qrCode){if(qrCode.length!==6||isNaN(qrCode)){return false;}
return true;};userManager.startTwoFactorAuth().then(function(response){$scope.sendingDetailsToApi=false;if(response.status===200){var qrCodeResponseObjFromApi=response.data.Data;dataForQrCodeString+=qrCodeResponseObjFromApi.protocol;dataForQrCodeString+=qrCodeResponseObjFromApi.info;dataForQrCodeString+="?secret="+qrCodeResponseObjFromApi.secret;dataForQrCodeString+="&issuer="+qrCodeResponseObjFromApi.issuer;dataForQrCodeString+="&algorithm="+qrCodeResponseObjFromApi.algorithm;dataForQrCodeString+="&digits="+qrCodeResponseObjFromApi.digits;dataForQrCodeString+="&period="+qrCodeResponseObjFromApi.period;new QRCode(document.getElementById("qrcode"),{"text":dataForQrCodeString,"height":150,"width":150});$scope.secretCodeFromApi=qrCodeResponseObjFromApi.secret;$scope.passwordError=false;$scope.passwordApproved=true;$scope.qrCodeCreated=true;}else{$scope.passwordError=true;$scope.errorMessage=response.data.Data.Message;}},function(errorResponse){$scope.sendingDetailsToApi=false;$scope.passwordError=true;$scope.errorMessage=errorResponse.data.Message;});$scope.enableTwoFactor=function(twoFactorAuthCode){$scope.sendingAuthCodeToApi=true;if(twoFactorAuthCode===undefined){$scope.sendingAuthCodeToApi=false;$scope.twoFactorCodeErr=true;$scope.twoFactorCodeErrMessage="QR Code must be 6 digits";return;}
twoFactorAuthCode=twoFactorAuthCode.replace(/\s+/g,'');if($scope.isQrCodeValid(twoFactorAuthCode)){userManager.enableTwoFactorAuth(twoFactorAuthCode).then(function(twoFactorResp){$scope.sendingAuthCodeToApi=false;if(twoFactorResp){$uibModalInstance.close();showQrCodeCallback();}else{}},function(errTwoFactor){$scope.sendingAuthCodeToApi=false;$scope.twoFactorCodeErr=true;$scope.twoFactorCodeErrMessage=errTwoFactor.data.Message;});}else{$scope.sendingAuthCodeToApi=false;$scope.twoFactorCodeErr=true;$scope.twoFactorCodeErrMessage="QR Code must be 6 digits";}};}],size:'md',resolve:{params:function(){return{"fieldBeingUpdated":"qrCode"};}}});};this.showCurrentPasswordModal=function(fieldBeingUpdated,objectToSendToApiWithUpdatedUserDetails,showCurrentPasswordModalCallback){var deferred=$q.defer();var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/currentpassword',controller:['$scope','$uibModalInstance','$http','params','toastNotifications',function showCurrentPasswordModalCtrl($scope,$uibModalInstance,$http,params,toastNotifications){$scope.sendingDetailsToApi=false;$scope.userHasForgottenPass=false;$scope.currentPassword="";$scope.cancelModal=function(messageToPassToToast){$uibModalInstance.dismiss(messageToPassToToast);};$scope.showPassReset=function(){$scope.userHasForgottenPass=true;};$scope.submitPassword=function(password){$scope.sendingDetailsToApi=true;objectToSendToApiWithUpdatedUserDetails["password"]=password;var responseObjToPassToCallback={"hasError":false,"password":$scope.currentPassword};$scope.passwordError=false;showCurrentPasswordModalCallback(responseObjToPassToCallback).then(function(response){$scope.sendingDetailsToApi=false;if(response.success===true){$uibModalInstance.dismiss();deferred.resolve();}else{$scope.passwordError=true;if(!("pass"in response.field)){toastNotifications.addNotification('error',response.errorMsg);$uibModalInstance.dismiss();}
deferred.reject();}});};}],size:'cm',resolve:{params:function(){return{"fieldBeingUpdated":fieldBeingUpdated};}}});return deferred.promise;};this.showModalAddAPIKey=function(permissionsObj,editInfo,callback){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/addkey',controller:['$scope','$uibModalInstance','$http','params','toastNotifications','$uibModal','userManager',function showModalAddAPIKeyCtrl($scope,$uibModalInstance,$http,params,toastNotifications){$scope.editMode=false;if(params.editInfo!==null){$scope.editInfo=params.editInfo;$scope.editMode=true;}
$scope.secretCodeFromApi="";$scope.keyName='';$scope.errorKeyName=null;$scope.errorPermissions=null;$scope.cancelModal=function(messageToPassToToast){$uibModalInstance.dismiss(messageToPassToToast);};var dataForQrCodeString="";$scope.permissionsObj=params.permissionsObj;$scope.permissionsFlat=Object.keys($scope.permissionsObj);$scope.permissions={};$scope.selectedPermissions=[];$scope.pathArray=null;if($scope.editMode===true){$scope.keyName=$scope.editInfo.apiKeyObject.info;$scope.selectedPermissions=JSON.parse(JSON.stringify($scope.editInfo.apiKeyObject.rights));}
for(var key in permissionsObj){if(permissionsObj.hasOwnProperty(key)){for(var parentIndex in permissionsObj[key].parents){var parent=permissionsObj[key].parents[parentIndex];if(!$scope.permissions.hasOwnProperty(parent)){$scope.permissions[parent]=[key];}
else{$scope.permissions[parent].push(key);}}}};$scope.togglePermission=function(key,event){var index=$scope.selectedPermissions.indexOf(key);if(index>-1){$scope.selectedPermissions.splice(index,1);}
else{$scope.selectedPermissions.push(key);}
$scope.parsePermissions();};$scope.toggleParentSubs=function(parentObj){var subsArray=Object.keys(parentObj.sub);for(i in subsArray){var currentSub=subsArray[i];if(parentObj.sub[currentSub].implemented===false){continue;}
var index=$scope.selectedPermissions.indexOf(currentSub);if(parentObj.countTotal>parentObj.countSelected){if(index===-1){$scope.selectedPermissions.push(currentSub);}}
else{if(index>-1){$scope.selectedPermissions.splice(index,1);}}}
$scope.parsePermissions();};$scope.checkPermissionSelection=function(key){var index=$scope.selectedPermissions.indexOf(key);if(index>-1){return true;}
return false};var recursiveCountProps=function(obj){for(property in obj){if(property==='sub'){var filteredSubsObj={},key;recursiveCountProps(obj[property]);for(key in obj.sub){if(obj.sub[key].hasOwnProperty('display')){if(obj.sub[key].display===true){filteredSubsObj[key]=obj.sub[key];}}}
var props=Object.keys(filteredSubsObj);var propsSelected=0;for(index in props){if($scope.selectedPermissions.indexOf(props[index])>-1){propsSelected++;}}
obj.countTotal=props.length;obj.countSelected=propsSelected;}else if(obj[property]instanceof Object){recursiveCountProps(obj[property]);}}};var findPropPath=function(obj,name){for(var prop in obj){if(prop==name){return name;}else if(typeof obj[prop]=="object"){var result=findPropPath(obj[prop],name);if(result){return prop+'.'+result;}}}
return null;}
if($scope.editInfo!==null&&$scope.editInfo!==undefined){if($scope.editInfo.selectedKey!==undefined){var path=findPropPath($scope.permissionsObj,$scope.editInfo.selectedKey);var pathArray=path.split('.');$scope.pathArray=pathArray.filter(function(e){return e!=='sub'});}}
$scope.parsePermissions=function(){recursiveCountProps($scope.permissionsObj);};recursiveCountProps($scope.permissionsObj);$scope.submit=function(){if($scope.keyName===undefined){$scope.errorKeyName='The Name field must have at least 3 characters';}
else{if($scope.keyName===''){$scope.errorKeyName='The Name field is mandatory';}
if($scope.keyName.length<1){$scope.errorKeyName='The Name field must have at least 1 characters';}
if($scope.keyName.length>50){$scope.errorKeyName='The Name field must have a maximum of 50 characters';}}
if($scope.keyName.length>=1&&$scope.keyName.length<50){$scope.errorKeyName='';}
if($scope.selectedPermissions.length===0){$scope.errorPermissions='Choose permissions';}
else{$scope.errorPermissions='';}
if($scope.errorKeyName===''&&$scope.errorPermissions===''){if($scope.editMode===false){callback({permissionsArray:$scope.selectedPermissions,keyName:$scope.keyName,edit:false});}
else{if($scope.editInfo.field==='permissions'){callback({permissionsArray:$scope.selectedPermissions,key:$scope.editInfo.apiKeyObject.key,edit:$scope.editInfo.field,apiKeyObject:params.editInfo.apiKeyObject});}
if($scope.editInfo.field==='name'){callback({key:$scope.editInfo.apiKeyObject,newKey:$scope.keyName,edit:$scope.editInfo.field,apiKeyObject:params.editInfo.apiKeyObject});}}
$scope.cancelModal();}};}],size:'md',resolve:{params:function(){return{"permissionsObj":permissionsObj,"editInfo":editInfo};}}});};this.showModalDeleteAPIKey=function(keyObject,callback){keyObject.title="Revoke API Key";keyObject.description="By revoking this key all API requests made against it will be rate limited by IP. Once deleted there is no way to recover this key, you'll have to generate a new one. The key you are deleting is:"
var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/deletekey',controller:['$scope','$uibModalInstance','$http','params','toastNotifications',function deleteCurrentPasswordModalCtrl($scope,$uibModalInstance,$http,params,toastNotifications){$scope.sendingDetailsToApi=false;$scope.keyObject=params.keyObject;$scope.cancelModal=function(messageToPassToToast){$uibModalInstance.dismiss(messageToPassToToast);};$scope.ok=function(){$scope.cancelModal();callback($scope.keyObject.key);};}],size:'md',resolve:{params:function(){return{"keyObject":keyObject};}}});};this.showModalDeletePermission=function(apiKey,permissionToDelete,callback){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/cryptopian/deletepermission',controller:['$scope','$uibModalInstance','$http','params','toastNotifications',function deleteCurrentPasswordModalCtrl($scope,$uibModalInstance,$http,params,toastNotifications){$scope.sendingDetailsToApi=false;$scope.key=params.key;$scope.permissionToDelete=params.permissionToDelete;$scope.cancelModal=function(messageToPassToToast){$uibModalInstance.dismiss(messageToPassToToast);};$scope.ok=function(){$scope.cancelModal();callback(params.apiKey,permissionToDelete);};}],size:'md',resolve:{params:function(){return{"apiKey":apiKey,"permissionToDelete":permissionToDelete};}}});};}]);angular.module('ccc-app').service('gModalService',['$uibModal','$log',function($uibModal,$log){this.showMessageModal=function(message){var modalInstance=$uibModal.open({templateUrl:'gModalService/showMessage.html',controller:'ShowMessageCtrl',resolve:{message:function(){return message;}}});};this.showTipUsModal=function(){var message={btcQr:false,ltcQr:false,dogeQr:false,dashQr:false,nmcQr:false,show:function(item){this.btcQr=false;this.ltcQr=false;this.dogeQr=false;this.dashQr=false;this.nmcQr=false;this[item]=true;},hide:function(item){this[item]=false;}};var modalInstance=$uibModal.open({templateUrl:'gModalService/showTipMessage.html',controller:'ShowMessageCtrl',resolve:{message:function(){return message;}}});};this.showFeedbackModal=function(debugInfo){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/sendfeedback',controller:'ShowFeedackCtrl',resolve:{debugInfo:function(){return debugInfo;}}});};this.showCryptopianList=function(obj){var modalInstance=$uibModal.open({templateUrl:CCC.pathForWebsite+'/angular/forum-list/cryptopians/',controller:'CryptopianListModalCtrl',size:'cm',resolve:{initObj:function(){return obj;}}});};}]);angular.module('ccc-app').factory('chartUtil',['$rootScope','$filter','$http',function chartUtilFactory($rootScope,$filter,$http){var chartsData={};var chartPeriods=[];var currentStatus={'fromSymbol':'','toSymbol':'','dataLoaded':false,'dataIsLoading':true,'period':{},'data':[],'stats':{},'tableDisplay':[]};var makeKey=function(type,e,fsym,tsym,limit){return type+'~'+e+'~'+fsym+'~'+tsym+'~'+limit;}
var util=CCC.STATIC.UTIL;var displayCurrency=CCC.STATIC.CURRENCY;var colorOptions=CCC.STATIC.UTIL.chartColors;return{availableChartPeriods:function(periods){chartPeriods=periods;},isPeriodSelected:function(periodId){return currentStatus.period.name==chartPeriods[periodId].name;},setFromSymbol:function(symbol){currentStatus.fromSymbol=symbol;},setToSymbol:function(symbol){currentStatus.toSymbol=symbol;},saveCurrentPeriod:function(period){currentStatus.period=period;},handleNewPeriod:function(periodId){$rootScope.$emit("ChartPeriodChange",periodId);},saveCurrentData:function(dataSet){currentStatus.data=dataSet;var tableDisplayData=[];var prevValue="";for(var i=0,length=dataSet.length;i<length;i++){if(i%currentStatus.period.periodForTable==0){var objectToAdd={};objectToAdd.dateDisplay=$filter('date')(new Date(dataSet[i].time),'yyyy-MM-dd HH:mm');objectToAdd.close=dataSet[i].close;objectToAdd.priceDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),objectToAdd.close);if(i>0){objectToAdd.chgValue=this.convertValueForChart(objectToAdd.close-prevValue.close);objectToAdd.chgValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),objectToAdd.chgValue);var pctChange=(objectToAdd.chgValue/prevValue.close)*100;if(pctChange<1){objectToAdd.pct=pctChange.toFixed(2);}else{objectToAdd.pct=this.convertValueToDisplay('',pctChange);}}else{objectToAdd.chgValue=0;objectToAdd.chgValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),objectToAdd.chgValue);objectToAdd.pct=0;}
prevValue=objectToAdd;tableDisplayData.push(objectToAdd);}}
currentStatus.tableDisplay=tableDisplayData.reverse();},setChartStats:function(stats){currentStatus.stats=stats;currentStatus.stats.chgValue=this.convertValueForChart(stats['close']-stats['open']);currentStatus.stats.pct=this.convertValueToDisplay('',(currentStatus.stats.chgValue/stats['open'])*100);currentStatus.stats.chgValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),stats.chgValue);currentStatus.stats.highValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),stats.high);currentStatus.stats.lowValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),stats.low);currentStatus.stats.openValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),stats.open);currentStatus.stats.closeValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),stats.close);currentStatus.stats.volumeFromValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.fromSymbol),stats.volumefrom);currentStatus.stats.volumeToValueDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),stats.volumeto);currentStatus.stats.highDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),stats.high);currentStatus.stats.lowDisplay=this.convertValueToDisplay(this.getSymbolFromCurrencyCode(currentStatus.toSymbol),stats.low);},getChartStats:function(){return currentStatus.stats;},setLoaded:function(isLoaded){currentStatus.dataLoaded=isLoaded;},setLoading:function(isLoading){currentStatus.dataIsLoading=isLoading;},getToSymbol:function(){return currentStatus.toSymbol;},getLoaded:function(){return currentStatus.dataLoaded;},getLoading:function(){return currentStatus.dataIsLoading;},getCurrentPeriod:function(){return currentStatus.period;},getAvailableChartPeriods:function(){return chartPeriods;},getCurrentData:function(){return currentStatus.data;},getTableDisplay:function(){return currentStatus.tableDisplay;},saveData:function(type,e,fsym,tsym,limit,chartData){var key=makeKey(type,e,fsym,tsym,limit);chartsData[key]=chartData;},hasData:function(type,e,fsym,tsym,limit){var key=makeKey(type,e,fsym,tsym,limit);if(chartsData.hasOwnProperty(key)){return true;}
return false;},getHistoFromMemory:function(type,e,fsym,tsym,limit){var key=makeKey(type,e,fsym,tsym,limit);return chartsData[key];},getSocialHistoFromApi:function(type,id,limit,aggregate,position){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['id']=id;paramsForCall['params']['limit']=limit;if(aggregate){paramsForCall['params']['aggregate']=aggregate;}
if(position){paramsForCall['params']['position']=position;}
return $http.get("/api/data/socialstatshisto"+type+"/",paramsForCall);},getHistoFromApi:function(type,e,fsym,tsym,limit,aggregate,position){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['e']=e;paramsForCall['params']['fsym']=fsym;paramsForCall['params']['tsym']=tsym;paramsForCall['params']['limit']=limit;if(aggregate){paramsForCall['params']['aggregate']=aggregate;}
if(position){paramsForCall['params']['position']=position;}
return $http.get("/api/data/histo"+type+"/",paramsForCall);},getHistoFromMinApi:function(type,e,fsym,tsym,limit,aggregate,position,toTs){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['e']=e;paramsForCall['params']['fsym']=fsym;paramsForCall['params']['tsym']=tsym;if(limit){paramsForCall['params']['limit']=limit;}else{paramsForCall['params']['allData']=true;}
if(aggregate){paramsForCall['params']['aggregate']=aggregate;}else{paramsForCall['params']['aggregate']=1;}
if(toTs){paramsForCall['params']['toTs']=toTs;}
paramsForCall['params']['extraParams']='CryptoCompare';paramsForCall['params']['tryConversion']=false;return $http.get(CCC.minApiUrl+"data/histo"+type,paramsForCall);},getPortfolioHistoFromMinApi:function(type,e,fsym,tsym,limit,aggregate,position,toTs,cacheReset){var paramsForCall={};paramsForCall['params']={};paramsForCall['params']['e']=e;paramsForCall['params']['fsym']=fsym;paramsForCall['params']['tsym']=tsym;if(limit){paramsForCall['params']['limit']=limit;}else{paramsForCall['params']['allData']=true;}
if(aggregate){paramsForCall['params']['aggregate']=aggregate;}else{paramsForCall['params']['aggregate']=1;}
if(toTs){paramsForCall['params']['toTs']=toTs;}
if(cacheReset!==undefined&&cacheReset==true){paramsForCall['params']['cb']=Math.floor(Date.now());}
paramsForCall['params']['extraParams']='CC_Portfolio';paramsForCall['params']['tryConversion']=true;return $http.get(CCC.minApiUrl+"data/histo"+type,paramsForCall);},getSymbolFromCurrencyCode:function(currencyCode){return displayCurrency.getSymbol(currencyCode);},getDaysSoFarInYear:function(){var currentDate=new Date();var startOfYear=new Date(currentDate.getFullYear(),0,0);var diffInMilliSeconds=currentDate-startOfYear;var oneDayInMilliSeconds=86400000;var currentDay=Math.floor(diffInMilliSeconds/oneDayInMilliSeconds);if(currentDay==0){currentDay=1;}
return currentDay-1;},convertValueForChart:function(value){return util.reduceFloatVal(value);},convertValueToDisplay:function(symbol,value){return util.convertValueToDisplay(symbol,value,$filter('number'),'short',false);},convertValueToDisplayLong:function(symbol,value){return util.convertValueToDisplay(symbol,value,$filter('number'));},convertExchangeName:function(value){return util.getNameForExchange(value);},topVolumeColumn:function(graphs,text,valuefield){graphs.push({id:"base",valueField:valuefield,type:"column",fillAlphas:0.8,lineColor:'#006098',title:text+" Volume",balloonText:"<span style='font-size:12px;'>[[title]]:<br><span style='font-size:16px;'>[[value]]</span></span>"});},addGuideLine:function(guides,value,text,color){guides.push({value:value,label:text,lineAlpha:0.5,lineThickness:1,color:color,inside:true,position:"right",lineColor:color});},topLineSerial:function(graphs,text,valuefield,currencyField){graphs.push({id:"base",valueField:valuefield,type:"line",fillAlphas:0.1,lineColor:'#006098',title:text,balloonText:"<span style='font-size:12px;'>[[title]]:<br><span style='font-size:16px;'>"+currencyField+" [[value]]</span></span>"});},topLineSerialWithBullet:function(graphs,text,valuefield,bulletField,currencyField){graphs.push({id:"base",valueField:valuefield,type:"line",bulletField:bulletField,fillAlphas:0.1,lineColor:'#006098',title:text,balloonText:"<span style='font-size:12px;'>[[title]]:<br><span style='font-size:16px;'>"+currencyField+" [[value]]</span></span>"});},topLineSerialSecondary:function(graphs,text,valuefield,currencyField){graphs.push({id:"secondary",valueField:valuefield,type:"line",fillAlphas:0,lineColor:'#00FF00',title:text,balloonText:"<span style='font-size:12px;'>[[title]]:<br><span style='font-size:16px;'>"+currencyField+" [[value]]</span></span>"});},topLineSerialVolatility:function(graphs,text,valuefield){graphs.push({id:"volatility",valueField:valuefield,type:"line",fillAlphas:0.1,lineColor:'#006098',title:text,balloonText:"<span style='font-size:12px;'>[[title]]:<br><span style='font-size:16px;'>[[value]]%</span></span>"});},topPositiveNegativeBarsSerial:function(graphs,text,valuefield,currencyField){graphs.push({id:"base",valueField:valuefield,type:"column",fillAlphas:0.8,useDataSetColors:false,lineColor:colorOptions.Green.Hex,negativeLineColor:colorOptions.Red.Hex,negativeFillColors:colorOptions.Red.Hex,title:text,balloonText:"<span style='font-size:12px;'>[[title]]:<br><span style='font-size:16px;'>"+currencyField+" [[value]]</span></span>"});},topApiCallsSerial:function(graphs,valuefield,displayfield){graphs.push({id:"base",valueField:valuefield,type:"column",fillAlphas:0.2,lineAlpha:0.8,useDataSetColors:false,fillColorsField:"fillColor",lineColorField:"lineColor",labelText:"[[label]]",balloonFunction:function(graphDataItem,graph){var isInThePast=graphDataItem.dataContext.in_the_past;if(isInThePast===true){return"<span style='font-size:12px;'>Calls used<br><span style='font-size:16px;'>"+graphDataItem.dataContext[displayfield]+"</span></span>";}else{return"<span style='font-size:12px;'>Calls projected<br><span style='font-size:16px;'>"+graphDataItem.dataContext[displayfield]+"</span></span>";}},balloonText:"<span style='font-size:12px;'>[[labelText]]<br><span style='font-size:16px;'>[[value]]</span></span>"});},topStacked:function(graphs,text,valuefield,colorHex){graphs.push({id:text+'_'+valuefield,valueField:text+'_'+valuefield,lineAlpha:0.8,fillAlphas:0.4,lineColor:colorHex,fillColor:colorHex,title:text,balloonText:"<span style='font-size:11px;'>[[title]] : [[value]] ([[percents]]%)</span>"});},bottomVolume:function(dataSet,panel,text){dataSet.fieldMappings.push({fromField:"volumefrom",toField:"volumefrom"});panel.title="Volume "+text;panel.stockGraphs.push({valueField:"volumefrom",type:"column",fillAlphas:0.8});},bottomVolumeTo:function(dataSet,panel,text){var field=dataSet
dataSet.fieldMappings.push({fromField:"volumeto",toField:"volumeto"});panel.title="Volume "+text;panel.stockGraphs.push({valueField:"volumeto",type:"column",fillAlphas:0.8});},topCandleStick:function(dataSet,panel,text){dataSet.fieldMappings.push({fromField:"close",toField:"close",});dataSet.fieldMappings.push({fromField:"open",toField:"open"});dataSet.fieldMappings.push({fromField:"high",toField:"high"});dataSet.fieldMappings.push({fromField:"low",toField:"low"});panel.stockGraphs.push({id:"base",type:"candlestick",balloonText:"Open:<b>[[open]]</b><br>Low:<b>[[low]]</b><br>High:<b>[[high]]</b><br>Close:<b>[[close]]</b><br>",closeField:"close",fillColors:"#3d9400",highField:"high",lineColor:"#3d9400",lineAlpha:1,lowField:"low",fillAlphas:0.8,negativeFillColors:"#d14836",negativeLineColor:"#d14836",openField:"open",valueField:"close",valueAxis:"a1",legendValueText:"[[close]] "+text,proCandlesticks:false});panel.stockLegend.valueTextRegular="[[close]] "+text;},topLine:function(dataSet,panel,text,withFill){dataSet.fieldMappings.push({fromField:"close",toField:"close",});var lineChart={id:"base",valueField:"close",lineThickness:1,balloonText:"Close:<b>[[close]]</b>",valueAxis:"a1",legendValueText:"[[close]] "+text,bullet:"none"};if(withFill){lineChart.fillAlphas=0.1;};panel.stockGraphs.push(lineChart);panel.stockLegend.valueTextRegular="[[close]] "+text;},topOHLC:function(dataSet,panel,text){dataSet.fieldMappings.push({fromField:"close",toField:"close",});dataSet.fieldMappings.push({fromField:"open",toField:"open"});dataSet.fieldMappings.push({fromField:"high",toField:"high"});dataSet.fieldMappings.push({fromField:"low",toField:"low"});panel.stockGraphs.push({id:"base",type:"ohlc",balloonText:"Open:<b>[[open]]</b><br>Low:<b>[[low]]</b><br>High:<b>[[high]]</b><br>Close:<b>[[close]]</b><br>",closeField:"close",fillColors:"#3d9400",highField:"high",lineColor:"#3d9400",lineAlpha:1,lowField:"low",fillAlphas:0.8,negativeFillColors:"#d14836",negativeLineColor:"#d14836",openField:"open",valueField:"close",legendValueText:"[[close]] "+text,valueAxis:"a1",proCandlesticks:false});panel.stockLegend.valueTextRegular="[[close]] "+text;},addDownloadButtonToChart:function(){return[{label:"<i class='fa fa-floppy-o'></i>",title:"Save as... ",menu:[{label:"PNG",click:function(){if(this.drawing.buffer.enabled){this.drawing.handler.done();this.toPNG({},function(data){this.download(data,"image/png",this.config.fileName+Date.now()+'.png');});}else{this.capture({},function(){this.toPNG({},function(data){this.download(data,"text/xml",this.config.fileName+Date.now()+'.png');});});}}},{label:"JPG",click:function(){if(this.drawing.buffer.enabled){this.drawing.handler.done();this.toJPG({},function(data){this.download(data,"image/jpg",this.config.fileName+Date.now()+'.jpg');});}else{this.capture({},function(){this.toJPG({},function(data){this.download(data,"text/xml",this.config.fileName+Date.now()+'.jpg');});});}}},{label:"SVG",click:function(){if(this.drawing.buffer.enabled){this.drawing.handler.done();this.toSVG({},function(data){this.download(data,"text/xml",this.config.fileName+Date.now()+'.svg');});}else{this.capture({},function(){this.toSVG({},function(data){this.download(data,"text/xml",this.config.fileName+Date.now()+'.svg');});});}}},{label:"CSV",click:function(){this.toCSV({},function(data){this.download(data,"text/plain",this.config.fileName+Date.now()+".csv");});}},{label:"JSON",click:function(){this.toJSON({},function(data){this.download(data,"text/plain",this.config.fileName+Date.now()+".json");});}},{label:"XLSX",click:function(){this.toXLSX({},function(data){this.download(data,"application/octet-stream",this.config.fileName+Date.now()+".xlsx");});}}]}];},appendData:function(originalDataSet,newDataSet,field,prefix){var indexODS=0;var indexNDS=0;if(originalDataSet.length==0){for(var i=0,len=newDataSet.length;i<len;i++){var newObj={};newObj['time']=newDataSet[i]['time'];newObj['timeDate']=new Date(newObj['time']);newObj[prefix+'_'+field]=newDataSet[i][field];originalDataSet.push(newObj);}
return;}
if(newDataSet.length==0){for(var i=0,len=originalDataSet.length;i<len;i++){originalDataSet[i][prefix+'_'+field]=0;}
return;}
while(indexODS<originalDataSet.length&&originalDataSet[indexODS]['time']<newDataSet[indexNDS]['time']){originalDataSet[indexODS][prefix+'_'+field]=0;indexODS++;}
var newDataSetToAdd=[];while(originalDataSet[indexODS]['time']>newDataSet[indexNDS]['time']){var newObj={};for(var propertyName in originalDataSet[indexODS]){newObj[propertyName]=0;}
newObj['time']=newDataSet[indexNDS]['time'];newObj['timeDate']=new Date(newDataSet[indexNDS]['time']);newObj[prefix+'_'+field]=newDataSet[indexNDS][field];newDataSetToAdd.push(newObj);indexNDS++;}
if(newDataSetToAdd.length>0){indexODS=newDataSetToAdd.length;originalDataSet=newDataSetToAdd.concat(originalDataSet);}
while(indexODS<originalDataSet.length&&indexNDS<newDataSet.length&&originalDataSet[indexODS]['time']==newDataSet[indexNDS]['time']){originalDataSet[indexODS][prefix+'_'+field]=newDataSet[indexNDS][field];indexNDS++;indexODS++;}
while(indexODS<originalDataSet.length&&originalDataSet[indexODS]['time']>newDataSet[indexNDS]['time']){originalDataSet[indexODS][prefix+'_'+field]=0;indexODS++;}
while(indexNDS<newDataSet.length&&originalDataSet[indexODS]['time']<newDataSet[indexNDS]['time']){var newObj={};for(var propertyName in originalDataSet[indexODS]){newObj[propertyName]=0;}
newObj['time']=newDataSet[indexNDS]['time'];newObj['timeDate']=new Date(newObj['time']);newObj[prefix+'_'+field]=newDataSet[indexNDS][field];originalDataSet.push(newObj);indexNDS++;indexODS++;}},polyfillSocialData:function(chartData,interval){var arrayToReturn=[];var valueToAddAtEnd={};var allData=chartData['Data'];var timestampToStop;var currentTimestamp=chartData.TimeFrom;if(!chartData.hasOwnProperty('Data')){return arrayToReturn;}
if(allData.length>0){timestampToStop=allData[0]['time'];}else{timestampToStop=chartData.TimeTo;}
if(!chartData.FirstValueInArray){var initalValue={};for(var attrname in chartData['FirstValue']){initalValue[attrname]=chartData['FirstValue'][attrname];}
initalValue['time']=chartData.TimeFrom*1000;initalValue['timeDate']=new Date(initalValue['time']);arrayToReturn.push(initalValue);currentTimestamp=currentTimestamp+interval;while(currentTimestamp<timestampToStop){var newValue={};for(var attrname in chartData['FirstValue']){newValue[attrname]=chartData['FirstValue'][attrname];}
newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);arrayToReturn.push(newValue);currentTimestamp=currentTimestamp+interval;}}
if(allData.length==0){return arrayToReturn;}
var newValue={};currentTimestamp=allData[0]['time'];for(var attrname in allData[0]){newValue[attrname]=allData[0][attrname];}
newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);arrayToReturn.push(newValue);currentTimestamp=currentTimestamp+interval;for(var i=1;i<allData.length;i++){timestampToStop=allData[i]['time'];while(currentTimestamp<timestampToStop){var newValue={};for(var attrname in allData[i-1]){newValue[attrname]=allData[i-1][attrname];}
newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);arrayToReturn.push(newValue);currentTimestamp=currentTimestamp+interval;}
var newValue={};for(var attrname in allData[i]){newValue[attrname]=allData[i][attrname];}
newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);valueToAddAtEnd=newValue;arrayToReturn.push(newValue);currentTimestamp=currentTimestamp+interval;};timestampToStop=chartData.TimeTo;while(currentTimestamp<=timestampToStop){var newValue={};for(var attrname in valueToAddAtEnd){newValue[attrname]=valueToAddAtEnd[attrname];}
newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);arrayToReturn.push(newValue);currentTimestamp=currentTimestamp+interval;}
return arrayToReturn;},generateEmptyData:function(interval,totalPoints,initalTS){var emptyDataArray=[];for(var i=0;i<totalPoints;i++){var emptyValueToAdd={};emptyValueToAdd['time']=(initalTS+(interval*i))*1000;emptyValueToAdd['timeDate']=new Date(emptyValueToAdd['time']);emptyValueToAdd['close']=0;emptyValueToAdd['high']=0;emptyValueToAdd['low']=0;emptyValueToAdd['open']=0;emptyValueToAdd['volumefrom']=0;emptyValueToAdd['volumeto']=0;emptyDataArray.push(emptyValueToAdd);}
return emptyDataArray;},roundCurrentDateToInterval:function(interval){var currentDate=Math.floor(new Date().getTime()/1000);return currentDate-currentDate%interval;},polyfillChartData:function(chartData,interval,indexForStats,dateFormat){var chartStats={close:0,high:0,low:0,open:0,volumefrom:0,volumeto:0};var arrayToReturn=[];var prevClose;var allData=chartData['Data'];var timestampToStop;var currentTimestamp=chartData.TimeFrom;if(!chartData.hasOwnProperty('Data')){return{data:arrayToReturn,stats:chartStats};}
if(allData.length>0){timestampToStop=allData[0]['time'];}else{timestampToStop=chartData.TimeTo;}
if(!chartData.FirstValueInArray){if(chartData.hasOwnProperty("FirstValue")){prevClose=util.reduceFloatVal(chartData.FirstValue['close']);}else{if(allData.length>0){prevClose=util.reduceFloatVal(allData[0]['close']);}else{prevClose=0;}}
var initalValue={};initalValue['time']=chartData.TimeFrom*1000;initalValue['timeDate']=new Date(initalValue['time']);initalValue['close']=prevClose;initalValue['high']=prevClose;initalValue['low']=prevClose;initalValue['open']=prevClose;initalValue['volumefrom']=0;initalValue['volumeto']=0;if(dateFormat){initalValue['formatedDate']=$filter('date')(new Date(initalValue['time']),dateFormat);}
arrayToReturn.push(initalValue);prevClose=initalValue['close'];currentTimestamp=currentTimestamp+interval;while(currentTimestamp<timestampToStop){var newValue={};newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);newValue['close']=prevClose;newValue['high']=prevClose;newValue['low']=prevClose;newValue['open']=prevClose;newValue['volumefrom']=0;newValue['volumeto']=0;if(dateFormat){newValue['formatedDate']=$filter('date')(new Date(newValue['time']),dateFormat);}
arrayToReturn.push(newValue);currentTimestamp=currentTimestamp+interval;}}
if(allData.length==0){chartStats['high']=arrayToReturn[0]['high'];chartStats['tsHigh']=arrayToReturn[0]['time'];chartStats['low']=arrayToReturn[0]['low'];chartStats['tsLow']=arrayToReturn[0]['time'];chartStats['close']=arrayToReturn[0]['close'];chartStats['open']=arrayToReturn[0]['open'];chartStats['volumefrom']=arrayToReturn[0]['volumefrom'];chartStats['volumeto']=arrayToReturn[0]['volumeto'];return{data:arrayToReturn,stats:chartStats};}
var newValue={};currentTimestamp=allData[0]['time'];newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);newValue['close']=util.reduceFloatVal(allData[0]['close']);newValue['high']=util.reduceFloatVal(allData[0]['high']);newValue['low']=util.reduceFloatVal(allData[0]['low']);newValue['open']=util.reduceFloatVal(allData[0]['open']);newValue['volumefrom']=util.reduceFloatVal(allData[0]['volumefrom']);newValue['volumeto']=util.reduceFloatVal(allData[0]['volumeto']);if(arrayToReturn.length>=indexForStats){chartStats['high']=allData[0]['high'];chartStats['tsHigh']=allData[0]['time'];chartStats['low']=allData[0]['low'];chartStats['tsLow']=allData[0]['time'];chartStats['open']=allData[0]['open'];chartStats['volumefrom']=allData[0]['volumefrom'];chartStats['volumeto']=allData[0]['volumeto'];}
if(dateFormat){newValue['formatedDate']=$filter('date')(new Date(newValue['time']),dateFormat);}
arrayToReturn.push(newValue);prevClose=newValue['close'];currentTimestamp=currentTimestamp+interval;for(var i=1;i<allData.length;i++){timestampToStop=allData[i]['time'];while(currentTimestamp<timestampToStop){var newValue={};newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);newValue['close']=prevClose;newValue['high']=prevClose;newValue['low']=prevClose;newValue['open']=prevClose;newValue['volumefrom']=0;newValue['volumeto']=0;if(dateFormat){newValue['formatedDate']=$filter('date')(new Date(newValue['time']),dateFormat);}
arrayToReturn.push(newValue);currentTimestamp=currentTimestamp+interval;}
var newValue={};newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);newValue['close']=util.reduceFloatVal(allData[i]['close']);newValue['high']=util.reduceFloatVal(allData[i]['high']);newValue['low']=util.reduceFloatVal(allData[i]['low']);newValue['open']=util.reduceFloatVal(allData[i]['open']);newValue['volumefrom']=util.reduceFloatVal(allData[i]['volumefrom']);newValue['volumeto']=util.reduceFloatVal(allData[i]['volumeto']);if(dateFormat){newValue['formatedDate']=$filter('date')(new Date(newValue['time']),dateFormat);}
arrayToReturn.push(newValue);prevClose=newValue['close'];if(arrayToReturn.length>indexForStats&&chartStats['open']>0){chartStats['close']=allData[i]['close'];if(allData[i]['high']>=chartStats['high']){chartStats['tsHigh']=allData[i]['time'];chartStats['high']=allData[i]['high'];}
if(allData[i]['low']<=chartStats['low']){chartStats['tsLow']=allData[i]['time'];chartStats['low']=allData[i]['low'];}
chartStats['volumefrom']+=allData[i]['volumefrom'];chartStats['volumeto']+=allData[i]['volumeto'];}else if(arrayToReturn.length==indexForStats||chartStats['open']==0){chartStats['close']=allData[i]['close'];chartStats['open']=allData[i]['open'];chartStats['high']=allData[i]['high'];chartStats['tsHigh']=allData[i]['time'];chartStats['low']=allData[i]['low'];chartStats['tsLow']=allData[i]['time'];chartStats['volumefrom']=allData[i]['volumefrom'];chartStats['volumeto']=allData[i]['volumeto'];}
currentTimestamp=currentTimestamp+interval;};timestampToStop=chartData.TimeTo;while(currentTimestamp<=timestampToStop){var newValue={};newValue['time']=currentTimestamp*1000;newValue['timeDate']=new Date(newValue['time']);newValue['close']=prevClose;newValue['high']=prevClose;newValue['low']=prevClose;newValue['open']=prevClose;newValue['volumefrom']=0;newValue['volumeto']=0;if(dateFormat){newValue['formatedDate']=$filter('date')(new Date(newValue['time']),dateFormat);}
arrayToReturn.push(newValue);currentTimestamp=currentTimestamp+interval;}
return{data:arrayToReturn,stats:chartStats};}};}]);angular.module('ccc-app').filter('parseUrlFilter',function(){var urlPattern=/(http|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gi;var imagePattern=/(\.jpeg|\.jpg|\.png|\.gif)/;var noFollow='';return function(text,target){return text.replace(urlPattern,function(url){if(imagePattern.test(url)){return'<img src="'+url+'" class="forum-image-embed"/>';}
if(url.length>29&&url.substring(0,29)==='https://www.cryptocompare.com'){noFollow='';}else{noFollow='rel="nofollow" ';}
return'<a target="'+target+'" href="'+url+'" '+noFollow+'class="link-external"><span class="fa fa-external-link"></span>'+url+'</a>';});};});angular.module('ccc-app').filter('cutText',function(){return function(value,wordwise,max,tail){if(!value)return'';value=value.replace(/<br\/>/g,'')
max=parseInt(max,10);if(!max)return value;if(value.length<=max)return value;value=value.substr(0,max);if(wordwise){var lastspace=value.lastIndexOf(' ');if(lastspace!=-1){value=value.substr(0,lastspace);}}
return value+(tail||' …');};});;;;angular.module('ccc-app').controller('HeaderSEOCtrl',['$scope','pageInfo',function($scope,pageInfo){$scope.pageInfo=pageInfo;}]);angular.module('ccc-app').controller('DropdownCtrl',['$scope',function($scope){$scope.menuCoins=false;$scope.menuExchanges=false;$scope.menuMining=false;$scope.menuWallets=false;$scope.menuForum=false;$scope.status={isopen:false};$scope.toggled=function(open){};$scope.toggleDropdown=function($event){$event.preventDefault();$event.stopPropagation();$scope.status.isopen=!$scope.status.isopen;};}]);angular.module('ccc-app').controller('RatingCtrl',['$scope',function($scope){$scope.currentStars=0;$scope.initStars=function(stars){$scope.currentStars=stars;};}]);angular.module('ccc-app').controller('UsernameOptionsCtrl',['$scope','$window','userManager','gModalService','cModalService','toastNotifications',function($scope,$window,userManager,gModalService,cModalService,toastNotifications){$scope.changingFollowStatus=false;$scope.userManager=userManager;$scope.followingHover=false;$scope.status={isopen:false};$scope.alreadyFollowing=false;$scope.alreadyBanned=false;$scope.itIsMe=false;$scope.isLoadingFollowing=false;$scope.isDeleting=false;$scope.toggleDropdown=function($event){$event.preventDefault();$event.stopPropagation();if($scope.isLoadingFollowing||$scope.cryptopian.Name=='[removed]'){return;}
if(!$scope.status.isopen){if(userManager.getCryptopianId()==$scope.cryptopian.Id){$scope.itIsMe=true;$scope.status.isopen=!$scope.status.isopen;return;}
if(userManager.isLoggedIn()){$scope.isLoadingFollowing=true;userManager.checkFollowingStatus($scope.cryptopian.Id).success(function(data){$scope.isLoadingFollowing=false;if(data.Type==100){$scope.alreadyFollowing=true;}
if(data.Type==200){$scope.alreadyFollowing=false;}
$scope.status.isopen=!$scope.status.isopen;});}else{$scope.status.isopen=!$scope.status.isopen;$scope.alreadyFollowing=false;}}else{$scope.status.isopen=!$scope.status.isopen;}};$scope.profileUrl='/profile/'+$scope.cryptopian.Name+'/';$scope.goToProfile=function(){$window.location=$scope.profileUrl;};$scope.changeFollowingStatus=function(){if($scope.changingFollowStatus){return;}
$scope.changingFollowStatus=true;userManager.changeFollowingStatus($scope.cryptopian.Id,userManager.FOLLOWING.CRYPTOPIAN).then(function successCallback(response){var data=response.data;if(data["Response"]=="Success"){if(data.Type==100){toastNotifications.addNotification('success','Following '+$scope.cryptopian.Name+'!');$scope.alreadyFollowing=true;}
if(data.Type==200){toastNotifications.addNotification('success','Unfollowed '+$scope.cryptopian.Name+'!');$scope.alreadyFollowing=false;}}else{if(data.Type==1){cModalService.showLoginModal('','Username Options Change Following Status');}
if(data.Type==5){cModalService.showActivationReminderModal();};}
$scope.changingFollowStatus=false;},function errorCallback(response){var data=response.data;$scope.changingFollowStatus=false;toastNotifications.addNotification('error',data["Message"]);});};$scope.deleteAllForumActivityCryptopian=function(){if($scope.isDeleting){return;}
var warning={'Title':'Confirm delete all forum activity','Body':'Are you sure you want to delete all comments and posts made by this cryptopian?','Type':'warning','ShowOk':true,'OkAction':function(){$scope.isDeleting=true;userManager.deleteAllForumActivity($scope.cryptopian.Id).success(function(data){if(data["Response"]=="Success"){$scope.isDeleted=true;toastNotifications.addNotification('success','All posts and comments have been succesfully deleted');}else{toastNotifications.addNotification('error','We could not delete all posts and comments because: '+data["Message"]);}
$scope.isDeleting=false;}).error(function(){$scope.isDeleting=false;toastNotifications.addNotification('error','We could not delete all posts and comments because there was an internal error!');});}};gModalService.showMessageModal(warning);};$scope.banOrUnbanCryptopian=function(){if(!$scope.alreadyBanned){cModalService.showBanModal({Id:$scope.cryptopian.Id,Name:$scope.cryptopian.Name,setBanned:function(){$scope.alreadyBanned=true;}});}
if($scope.alreadyBanned){userManager.unBanCryptopian($scope.cryptopian.Id).success(function(data){if(data["Response"]=="Success"){if(data.Type==100){toastNotifications.addNotification('success','Cryptopian '+$scope.cryptopian.Name+' successfully un-banned!');$scope.alreadyBanned=false;}}else{if(data.Type==1){cModalService.showLoginModal('','Username Options Ban/Unban Cryptonpian');}
if(data.Type==5){cModalService.showActivationReminderModal();};if(data.Type==10){toastNotifications.addNotification('success','Cryptopian '+$scope.cryptopian.Name+' is already un-banned. Somebody beat you to it!');$scope.alreadyBanned=false;};}});}}}]);angular.module('ccc-app').controller('FollowableItemOptionsCtrl',['$scope','$window','userManager','cModalService','toastNotifications',function($scope,$window,userManager,cModalService,toastNotifications){$scope.changingFollowStatus=false;$scope.followingHover=false;$scope.status={isopen:false};$scope.alreadyFollowing=false;$scope.itIsMe=false;$scope.isLoadingFollowing=false;$scope.toggleDropdown=function($event){$event.preventDefault();$event.stopPropagation();if($scope.isLoadingFollowing){return;}
if(!$scope.status.isopen){if(userManager.getCryptopianId()==$scope.item.Id){$scope.itIsMe=true;$scope.status.isopen=!$scope.status.isopen;return;}
if(userManager.isLoggedIn()){$scope.isLoadingFollowing=true;userManager.checkFollowingStatus($scope.item.Id).success(function(data){$scope.isLoadingFollowing=false;if(data.Type==100){$scope.alreadyFollowing=true;}
if(data.Type==200){$scope.alreadyFollowing=false;}
$scope.status.isopen=!$scope.status.isopen;});}else{$scope.status.isopen=!$scope.status.isopen;$scope.alreadyFollowing=false;}}else{$scope.status.isopen=!$scope.status.isopen;}};$scope.profileUrl=$scope.item.Url;$scope.goToProfile=function(){$window.location=$scope.profileUrl;};$scope.changeFollowingStatus=function(){if($scope.changingFollowStatus){return;}
$scope.changingFollowStatus=true;var followingType=userManager.FOLLOWING.CRYPTOPIAN;if($scope.item.Type=="Webpagecoinp"){followingType=userManager.FOLLOWING.COIN;}
if($scope.item.Type=="Webpageexchangep"){followingType=userManager.FOLLOWING.EXCHANGE;}
userManager.changeFollowingStatus($scope.item.Id,followingType).success(function(data){if(data["Response"]=="Success"){if(data.Type==100){toastNotifications.addNotification('success','Following '+$scope.item.Name+'!');$scope.alreadyFollowing=true;}
if(data.Type==200){toastNotifications.addNotification('success','Unfollowed '+$scope.item.Name+'!');$scope.alreadyFollowing=false;}}else{if(data.Type==1){cModalService.showLoginModal('','Followable Options Following Status');}
if(data.Type==5){cModalService.showActivationReminderModal();};}
$scope.changingFollowStatus=false;});};}]);angular.module('ccc-app').controller('FollowPageItemOptionsCtrl',['$scope','$window','userManager','cModalService','toastNotifications',function($scope,$window,userManager,cModalService,toastNotifications){$scope.changingFollowStatus=false;$scope.followingHover=false;$scope.status={isopen:false};$scope.alreadyFollowing=false;$scope.itIsMe=false;$scope.isLoadingFollowing=false;$scope.toggleDropdown=function($event){$event.preventDefault();$event.stopPropagation();if($scope.isLoadingFollowing){return;}
if(!$scope.status.isopen){if(userManager.getCryptopianId()==$scope.item.Data.Id){$scope.itIsMe=true;$scope.status.isopen=!$scope.status.isopen;return;}
if(userManager.isLoggedIn()){$scope.isLoadingFollowing=true;userManager.checkFollowingStatus($scope.item.Data.Id).success(function(data){$scope.isLoadingFollowing=false;if(data.Type==100){$scope.alreadyFollowing=true;}
if(data.Type==200){$scope.alreadyFollowing=false;}
$scope.status.isopen=!$scope.status.isopen;});}else{$scope.status.isopen=!$scope.status.isopen;$scope.alreadyFollowing=false;}}else{$scope.status.isopen=!$scope.status.isopen;}};$scope.profileUrl=$scope.item.Data.Url;$scope.goToProfile=function(){$window.location=$scope.profileUrl;};$scope.changeFollowingStatus=function(){if($scope.changingFollowStatus){return;}
$scope.changingFollowStatus=true;var followingType=userManager.FOLLOWING.CRYPTOPIAN;if($scope.item.Data.DocumentType=="Webpagecoinp"){followingType=userManager.FOLLOWING.COIN;}
if($scope.item.Data.DocumentType=="Webpageexchangep"){followingType=userManager.FOLLOWING.EXCHANGE;}
userManager.changeFollowingStatus($scope.item.Data.Id,followingType).success(function(data){if(data["Response"]=="Success"){if(data.Type==100){toastNotifications.addNotification('success','Following '+$scope.item.Data.Name+'!');$scope.alreadyFollowing=true;$scope.item.isFollowing=true;}
if(data.Type==200){toastNotifications.addNotification('success','Unfollowed '+$scope.item.Data.Name+'!');$scope.alreadyFollowing=false;$scope.item.isFollowing=false;}}else{if(data.Type==1){cModalService.showLoginModal('','Followable Items Change Following Status');}
if(data.Type==5){cModalService.showActivationReminderModal();};}
$scope.changingFollowStatus=false;});};}]);angular.module('ccc-app').controller('CookieNotificationPopupCtrl',['$scope','cccLocalStorage',function($scope,cccLocalStorage){$scope.cookiePopupSeen=true;$scope.hideCookieNotification=function(){$scope.cookiePopupSeen=true;}}]);angular.module('ccc-app').controller('SocialShareCtrl',['$scope',function($scope){$scope.shareTwitter=function(){var url="https://twitter.com/intent/tweet?text=";var hashTags="%23CryptoCompare%20"+encodeURIComponent(document.URL);url+=encodeURIComponent(document.title.replace(" | CryptoCompare.com",""))+"%20"+hashTags;var width=600;var height=400;var left=(screen.width/2)-(width/2);var top=(screen.height/2)-(height/2);var jsPopupDetails='toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height='+height+',width='+width+',top='+top+', left='+left;newwindow=window.open(url,'name',jsPopupDetails);if(window.focus){newwindow.focus()}
return false;};$scope.shareFacebook=function(){var url="https://www.facebook.com/sharer/sharer.php?u=";url+=encodeURIComponent(document.URL);var width=600;var height=400;var left=(screen.width/2)-(width/2);var top=(screen.height/2)-(height/2);var jsPopupDetails='toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height='+height+',width='+width+',top='+top+', left='+left;newwindow=window.open(url,'name',jsPopupDetails);if(window.focus){newwindow.focus()}
return false;};$scope.shareGooglePlus=function(){var url="https://plus.google.com/share?url=";url+=encodeURIComponent(document.URL);var width=500;var height=400;var left=(screen.width/2)-(width/2);var top=(screen.height/2)-(height/2);var jsPopupDetails='toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height='+height+',width='+width+',top='+top+', left='+left;newwindow=window.open(url,'name',jsPopupDetails);if(window.focus){newwindow.focus()}
return false;};}]);angular.module('ccc-app').controller('DropdownMenuUserSectionCtrl',['$rootScope','$scope','userManager','notificationsManager','cModalService','gModalService','cccLightsService',function($rootScope,$scope,userManager,notificationsManager,cModalService,gModalService,cccLightsService){$scope.status={isopen:false};$scope.userManager=userManager;$scope.notificationsManager=notificationsManager;$scope.LightsStatus="Off";if(cccLightsService.isOn()){$scope.LightsStatus="Off";}else{$scope.LightsStatus="On";}
$rootScope.$on('LightsChange',function(event,isOn){if(isOn=='1'){$scope.LightsStatus="On";}else{$scope.LightsStatus="Off";}});$scope.toggled=function(open,type){if(open&&type=='notifications'){notificationsManager.markAsRead();}};$scope.showLogin=function(){cModalService.showLoginModal("","Dropdown Menu User Section");};$scope.showTipUs=function(){gModalService.showTipUsModal();};$scope.toggleDropdown=function($event){$event.preventDefault();$event.stopPropagation();$scope.status.isopen=!$scope.status.isopen;};$scope.switchLights=function(){if(cccLightsService.isOn()){cccLightsService.turnOff();}else{cccLightsService.turnOn();}}}]);angular.module('ccc-app').controller('LoginButtonCtrl',['$scope','userManager','notificationsManager','cModalService',function($scope,userManager,notificationsManager,cModalService){$scope.status={isopen:false};$scope.userManager=userManager;$scope.notificationsManager=notificationsManager;$scope.toggled=function(open,type){if(open&&type=='notifications'){notificationsManager.markAsRead();}};$scope.showLogin=function(){cModalService.showLoginModal("","Login Button");};$scope.showPasswordReset=function(){cModalService.showPasswordResetModal();};$scope.toggleDropdown=function($event){$event.preventDefault();$event.stopPropagation();$scope.status.isopen=!$scope.status.isopen;};}]);angular.module('ccc-app').controller('AutosuggestCtrl',['$scope','$http',function($scope,$http){$scope.asyncDataResult="";$scope.getAutosuggest=function(val){return $http.get('/api/autosuggest/all/',{params:{q:val,maxRows:10}}).then(function(response){if(response.data.Type>99){return response.data.Results;}});};$scope.onSelect=function($item,$model,$label){window.location.href=$item.fullPath;};}]);angular.module('ccc-app').controller('ShowMessageCtrl',['$scope','$uibModalInstance','message',function($scope,$uibModalInstance,message){$scope.message=message;$scope.cancel=function(){$uibModalInstance.dismiss('Cancel');};$scope.doOkAction=function(){if($scope.message.hasOwnProperty("OkAction")){$scope.message.OkAction();}
$uibModalInstance.close('Ok');};}]);angular.module('ccc-app').controller('ShowFeedackCtrl',['$rootScope','$scope','$http','$uibModalInstance','$templateCache','gModalService','cModalService','toastNotifications','userManager','debugInfo',function($rootScope,$scope,$http,$uibModalInstance,$templateCache,gModalService,cModalService,toastNotifications,userManager,debugInfo){$scope.debugInfo=debugInfo;$scope.title=debugInfo.Title||"Website Feeback";$scope.sendingFeedback=false;$scope.requestType="Support";$scope.debugInfo.ModalLoaded=new Date();$scope.cancel=function(){$uibModalInstance.dismiss('Cancel');};$scope.sendFeedback=function(){if(!$scope.feedbackText||$scope.feedbackText.trim()==""){var message={'Title':'Feedback text appears to be blank...','Body':'It seems that the feedback box is empty. Please write something and try to send your feedback again.','Type':'warning'};gModalService.showMessageModal(message);return;}
$scope.sendingFeedback=true;$scope.debugInfo.FeedbackText=$scope.feedbackText;$scope.debugInfo.RequestType=$scope.requestType;$http.post('/api/cryptopian/sendfeedback',$scope.debugInfo).success(function(response,status,headers,config){$scope.sendingFeedback=false;if(response.Type>99){toastNotifications.addNotification('success','<div>Message sent.</div>'+'<div>Our team will address you issue, request or suggestion as soon as possible</div>');$uibModalInstance.dismiss("Message sent");return;}
if(response.Type==1){cModalService.showLoginModal(response["Message"],"Show Feedback Send Feedback");}
if(response.Type==2){$scope.alerts=[{type:'danger',msg:"There was no data to update."}];}
if(response.Type==99){$scope.alerts=[{type:'danger',msg:'Oops! Something went wrong. Please refresh the page and try again.',contact:true}];}}).error(function(response,status,headers,config){$scope.sendingFeedback=false;$scope.alerts=[{type:'danger',msg:'Oops! Something went wrong. Please refresh the page and try again.',contact:true}];});};}]);angular.module('ccc-app').controller('ContactUsFooterCtrl',['$rootScope','$scope','$http','gModalService','userManager','cccLightsService',function($rootScope,$scope,$http,gModalService,userManager,cccLightsService){$scope.pageLoaded=new Date();$scope.LightsStatus="Off";if(cccLightsService.isOn()){$scope.LightsStatus="Off";}else{$scope.LightsStatus="On";}
$scope.debugInfo={"URL":document.URL,"PageLoaded":$scope.pageLoaded}
$rootScope.$on('LightsChange',function(event,isOn){if(isOn=='1'){$scope.LightsStatus="On";}else{$scope.LightsStatus="Off";}});$scope.switchLights=function(){if(cccLightsService.isOn()){cccLightsService.turnOff();}else{cccLightsService.turnOn();}}
$scope.sendFeedback=function(){$scope.debugInfo.Title='Website Feedback';$scope.debugInfo.Action='footerFeedback';$scope.debugInfo.ReportLinkClicked=new Date();$scope.debugInfo.UserName=userManager.getUsername();gModalService.showFeedbackModal($scope.debugInfo);};$scope.sendProblem=function(location){$scope.debugInfo.Title='Website Issue';$scope.debugInfo.Action=location;$scope.debugInfo.ReportLinkClicked=new Date();$scope.debugInfo.UserName=userManager.getUsername();gModalService.showFeedbackModal($scope.debugInfo);}
$scope.contactUs=function(){$scope.debugInfo.Title='Contact Us';$scope.debugInfo.Action='footerContactUs';$scope.debugInfo.ReportLinkClicked=new Date();$scope.debugInfo.UserName=userManager.getUsername();gModalService.showFeedbackModal($scope.debugInfo);};$scope.showTipUs=function(){gModalService.showTipUsModal();};}]);angular.module('ccc-app').controller('LoginRegisterCtrl',['$scope','$timeout','$uibModalInstance','$templateCache','$http','cccLocalStorage','cModalService','userManager','params','toastNotifications',function($scope,$timeout,$uibModalInstance,$templateCache,$http,cccLocalStorage,cModalService,userManager,params,toastNotifications){$scope.tabSelected="Login";$scope.actionTypeToTitle={0:'Sign in',1:'Sign out',2:'Forgotten Password',3:'Email sent',4:'Your Contact Preferences',5:'Register',6:'Two Factor Social',7:'Two Factor Auth'};$scope.cryptopian={};$scope.loginStatus=params.ActionStage;$scope.loginMessage=params.Message||'';$scope.signingIn=false;$scope.signingInFacebook=false;$scope.signingInGoogle=false;$scope.sendingPassResetEmail=false;$scope.registering=false;$scope.canSubmit=true;$scope.alerts=[];$scope.twoFactorAuthCode="";$scope.loginSocialType="";$scope.paramsToAddToRequest={"referrer":document.referrer||"Direct","campaign":"N/A","reg_page":window.location.href,"action":params.Action||"Other"};$scope.tcButtonIsColoured=false;$scope.notifications={affiliate:false,marketwatch:false,forum:false};userManager.setShowingLogin(true);$scope.ok=function(){$uibModalInstance.close();};$scope.cancel=function(){$uibModalInstance.dismiss('Cancel');};$scope.closeAlert=function(index){$scope.alerts.splice(index,1);};$scope.showPassReset=function(){$scope.loginStatus=2;};$scope.backToLogin=function(){$scope.loginStatus=0;};$scope.selectTabClick=function(loginStatus){$scope.loginStatus=loginStatus;$scope.loginForm.email.$valid=true;$scope.loginForm.email.$invalid=false;$scope.loginForm.password.$valid=true;$scope.loginForm.password.$invalid=false;};$scope.sendPassResetEmail=function(){$scope.sendingPassResetEmail=true;$scope.canSubmit=false;return $http.post(CCC.authApiUrl+"cryptopian/pass/reset/request",{"email":$scope.cryptopian.email}).then(function(response){response=response.data;$scope.sendingPassResetEmail=false;$scope.canSubmit=true;$scope.passReset.email.$valid=true;$scope.passReset.email.$invalid=false;$scope.passResetAlerts=[];if(response["Type"]===100){$scope.loginStatus=3;}},function(response){$scope.sendingPassResetEmail=false;$scope.canSubmit=true;$scope.passReset.email.$valid=true;$scope.passReset.email.$invalid=false;$scope.passResetAlerts=[];if(response["Type"]<100){var currentAlert={type:"danger",msg:response["Message"]};$scope.passResetAlerts.push(currentAlert);}
if(response["Type"]===2||response["Type"]===1){$scope.passReset.email.$valid=false;$scope.passReset.email.$invalid=true;}});};$scope.initUserDetails=function(userDataObjToInit){userDataObjToInit.avatar_url=CCC.STATIC.BASEIMAGEPATH+userDataObjToInit.avatar_url;userManager.setAvatarUrl(userDataObjToInit.avatar_url);userManager.initUser(userDataObjToInit);userManager.setLoggedIn(true);};$scope.loginFacebookAuthorize=function(response){$scope.alerts=[];if(response.authResponse){$scope.socialTypeToAppendToUrl="facebook";$scope.sendSocialToAuthApi(response.authResponse.accessToken,"",$scope.socialTypeToAppendToUrl);}else{$scope.signingInFacebook=false;$scope.canSubmit=true;$scope.alerts.push({type:'danger',msg:"It seems that you have cancelled the login box. Please try again or use another authentication method."});$scope.$apply();}};$scope.loginFacebook=function(){$scope.signingInFacebook=true;$scope.canSubmit=false;FB.login(function(response){$scope.loginFacebookAuthorize(response);},{scope:'email, public_profile',auth_type:'rerequest'});};$scope.sendSocialToAuthApi=function(accessToken,twoFactorAuthCode,socialTypeToAppendToUrl){$scope.paramsToAddToRequest["access_token"]=accessToken;$scope.alerts=[];if($scope.loginStatus==6){var hasError=true;if(twoFactorAuthCode!==undefined){twoFactorAuthCode=twoFactorAuthCode.replace(/\s+/g,'');if(twoFactorAuthCode.length===6&&!isNaN(twoFactorAuthCode)){hasError=false;}}
if(hasError){$scope.alerts=[{type:'danger',msg:"Two factor code must be 6 digits"}];$scope.twpFactorCodeError=true;$scope.twoFactorSocialForm.twoFactor.$dirty=true;$scope.canSubmit=true;$scope.signingIn=false;return;}
$scope.paramsToAddToRequest["two_factor_code"]=twoFactorAuthCode;}
$http.post(CCC.authApiUrl+"cryptopian/login/"+socialTypeToAppendToUrl,$scope.paramsToAddToRequest,{"withCredentials":true}).then(function(response){response=response.data;if(socialTypeToAppendToUrl=="google"){$scope.signingInGoogle=false;cccLocalStorage.removeItem("creating_g_account");}else{$scope.signingInFacebook=false;}
$scope.canSubmit=true;if(response["Type"]===100||response["Type"]===101){$scope.initUserDetails(response.Data.User);if(!response.Data.TermsAndConditionsAgreed){$scope.loginStatus=4;}else{$scope.loginStatus=1;$uibModalInstance.dismiss(socialTypeToAppendToUrl+" Login");toastNotifications.addNotification('success','<div>Login successful.</div>'+'<div>Good to see you again '+userManager.getUsername()+'!</div>');}}},function(errResponse){errResponse=errResponse.data;if(socialTypeToAppendToUrl=="google"){$scope.signingInGoogle=false;cccLocalStorage.removeItem("creating_g_account");}else{$scope.signingInFacebook=false;}
$scope.canSubmit=true;if(errResponse["Type"]===30){$scope.loginStatus=6;$scope.accessToken=accessToken;};if(errResponse["Type"]===31){$scope.twpFactorCodeError=true;};if(errResponse["Type"]<100&&errResponse["Type"]!==30){$scope.alerts.push({type:'danger',msg:errResponse["Message"]});};});};$scope.loginGooglePlusAuthorize=function(authResult){$scope.alerts=[];if(authResult['status']['signed_in']&&authResult['status']['method']=='PROMPT'){if(cccLocalStorage.getText("creating_g_account")!=""){return;}
cccLocalStorage.setItem("creating_g_account",1);$scope.socialTypeToAppendToUrl="google";$scope.sendSocialToAuthApi(authResult["access_token"],"",$scope.socialTypeToAppendToUrl);}else if(authResult['error']!=='immediate_failed'){$scope.signingInGoogle=false;cccLocalStorage.removeItem("creating_g_account");$scope.canSubmit=true;$scope.alerts.push({type:'danger',msg:"It seems that you have cancelled the login box. Please try again or use another authetication method."});$scope.$apply();}};$scope.loginGooglePlus=function(){$scope.signingInGoogle=true;$scope.canSubmit=false;var googlePlusParams={'clientid':'972420808852-gjedh6d1hset5i78tk68iloak1rs2gdk.apps.googleusercontent.com','cookiepolicy':'single_host_origin','scope':'email'};if(gapi.auth.getToken()==null){googlePlusParams['callback']=$scope.loginGooglePlusAuthorize;}else{$uibModalInstance.dismiss("Google Login");}
gapi.auth.signIn(googlePlusParams);};$scope.login=function(userEmail,userPassword,twoFactorAuthCode){$scope.signingIn=true;$scope.canSubmit=false;userEmail=userEmail||"";userPassword=userPassword||"";$scope.paramsToAddToRequest["email"]=userEmail;$scope.paramsToAddToRequest["password"]=userPassword;if($scope.loginStatus===7){var hasError=true;if(twoFactorAuthCode!==undefined){twoFactorAuthCode=twoFactorAuthCode.replace(/\s+/g,'');if(twoFactorAuthCode.length===6&&!isNaN(twoFactorAuthCode)){hasError=false;}}
if(hasError){$scope.alerts=[{type:'danger',msg:"Two factor code must be 6 digits"}];$scope.twpFactorCodeError=true;$scope.loginForm.twoFactor.$dirty=true;$scope.canSubmit=true;$scope.signingIn=false;return;}
$scope.paramsToAddToRequest["two_factor_code"]=twoFactorAuthCode;}
return $http.post(CCC.authApiUrl+"cryptopian/login/web",$scope.paramsToAddToRequest,{"withCredentials":true}).then(function(response){response=response["data"];$scope.signingIn=false;$scope.canSubmit=true;$scope.loginForm.email.$valid=true;$scope.loginForm.email.$invalid=false;$scope.loginForm.password.$valid=true;$scope.loginForm.password.$invalid=false;$scope.alerts=[];if(response["Type"]===100){$scope.initUserDetails(response.Data.User);if(!response.Data.TermsAndConditionsAgreed){$scope.loginStatus=4;}else{$scope.loginStatus=1;$uibModalInstance.close("Website Registration");toastNotifications.addNotification('success','<div>Login successful.</div>'+'<div>Welcome back '+userManager.getUsername()+'!</div>');}}},function(errResponse){errResponse=errResponse["data"];$scope.signingIn=false;$scope.canSubmit=true;$scope.loginForm.email.$valid=true;$scope.loginForm.email.$invalid=false;$scope.loginForm.password.$valid=true;$scope.loginForm.password.$invalid=false;$scope.alerts=[];if(errResponse["Type"]===5){$scope.loginStatus=1;$uibModalInstance.close("Showing Activation Reminder");userManager.setLoggedIn(true);userManager.initUser(errResponse.Data.User);cModalService.showActivationReminderModal();return;};if(errResponse["Type"]===30){$scope.loginStatus=7;};if(errResponse["Type"]===31){$scope.twpFactorCodeError=true;};if(errResponse["Type"]<100&&errResponse["Type"]!==30){$scope.alerts.push({type:'danger',msg:errResponse["Message"]});};if(errResponse["Type"]===2||errResponse["Type"]===1){$scope.loginForm.email.$valid=false;$scope.loginForm.email.$invalid=true;};if(errResponse["Type"]===3||errResponse["Type"]===1){$scope.loginForm.password.$valid=false;$scope.loginForm.password.$invalid=true;};});};$scope.termsAndConditionsAgreed=function(){userManager.termsAndConditionsAgreed($scope.notifications.affiliate,$scope.notifications.marketwatch,$scope.notifications.forum).then(function(response){response=response["data"];if(response["Type"]===100){$scope.loginStatus=1;$uibModalInstance.close("Website Registration");toastNotifications.addNotification('success','<div>User preferences updated successfully.</div>');}},function(errResponse){$uibModalInstance.close("Website Registration");toastNotifications.addNotification('error','<div>Unable to update preferences, please try again later.</div>');});};$scope.setAffiliate=function(newAffiliateValue){$scope.notifications.affiliate=newAffiliateValue;$scope.setTermsAndConditionsText();};$scope.setMarketwatch=function(newMarketwatchValue){$scope.notifications.marketwatch=newMarketwatchValue;$scope.setTermsAndConditionsText();};$scope.setForum=function(newForumValue){$scope.notifications.forum=newForumValue;$scope.setTermsAndConditionsText();};$scope.setTermsAndConditionsText=function(){if($scope.notifications.affiliate||$scope.notifications.marketwatch||$scope.notifications.forum){$scope.tcButtonIsColoured=true;}else{$scope.tcButtonIsColoured=false;}};$scope.register=function(userEmail,userPassword){$scope.registering=true;$scope.canSubmit=false;userEmail=userEmail||"";userPassword=userPassword||"";$scope.paramsToAddToRequest["email"]=userEmail;$scope.paramsToAddToRequest["password"]=userPassword;return $http.post(CCC.authApiUrl+"cryptopian/register/web",$scope.paramsToAddToRequest,{"withCredentials":true}).then(function(response){response=response["data"];$scope.registering=false;$scope.canSubmit=true;$scope.loginForm.email.$valid=true;$scope.loginForm.email.$invalid=false;$scope.loginForm.password.$valid=true;$scope.loginForm.password.$invalid=false;$scope.alerts=[];if(response["Type"]===100){if(!response.Data.TermsAndConditionsAgreed){$scope.loginStatus=4;}else{$scope.loginStatus=1;$uibModalInstance.close("Website Registration");toastNotifications.addNotification('success','<div>Registration successful.</div>'+'<div>Welcome '+userManager.getUsername()+'!</div>');}
$scope.initUserDetails(response.Data.User);}},function(errResponse){errResponse=errResponse["data"];$scope.registering=false;$scope.canSubmit=true;$scope.loginForm.email.$valid=true;$scope.loginForm.email.$invalid=false;$scope.loginForm.password.$valid=true;$scope.loginForm.password.$invalid=false;$scope.alerts=[];if(errResponse["Type"]<100){$scope.alerts.push({type:'danger',msg:errResponse["Message"]});}
if(errResponse["Type"]===2||errResponse["Type"]===1){$scope.loginForm.email.$valid=false;$scope.loginForm.email.$invalid=true;}
if(errResponse["Type"]===3||errResponse["Type"]===1){$scope.loginForm.password.$valid=false;$scope.loginForm.password.$invalid=true;}});};$scope.logout=function(){toastNotifications.addNotification('success','<div>Logout successful.</div>'+'<div>Bye, bye '+userManager.getUsername()+'. We hope to see you again soon!</div>');userManager.logout();$scope.loginStatus=0;};}]);angular.module('ccc-app').controller('ActivationReminderCtrl',['$scope','$uibModalInstance','$http','$templateCache','cModalService','userManager',function($scope,$uibModalInstance,$http,$templateCache,cModalService,userManager){$scope.alerts=[];$scope.email="";$scope.previousEmail="";$scope.activationStep=1;$scope.canSubmit=true;$scope.changingEmail=false;$scope.sendingActivationReminder=false;$scope.email=userManager.getEmailAddress();$scope.previousEmail=userManager.getEmailAddress();$scope.closeAlert=function(index){$scope.alerts.splice(index,1);};$scope.cancel=function(){$templateCache.remove('/angular/activationreminder');$uibModalInstance.dismiss('Cancel');};$scope.sendActivationReminder=function(){$scope.alerts=[];$scope.canSubmit=false;$scope.sendingActivationReminder=true;return $http.get(CCC.authApiUrl+'cryptopian/activation-reminder',{"withCredentials":true}).success(function(response,status,headers,config){$scope.canSubmit=true;$scope.sendingActivationReminder=false;if(response.Type==3){$scope.activationStep=3;return;}
if(response.Type==1){return;}
$scope.activationStep=2;}).error(function(response,status,headers,config){$scope.canSubmit=true;$scope.sendingActivationReminder=false;$scope.alerts=[{type:'danger',msg:'Oops! Something went wrong. Please refresh the page and try again.',contact:true}];});};$scope.changeEmail=function(){if(!$scope.email||$scope.email.trim()==""){$scope.alerts=[{type:'danger',msg:'It seems that the email address you have typed in is invalid',contact:false}];return;}
$scope.email=$scope.email.trim();if($scope.email==$scope.previousEmail){$scope.alerts=[{type:'warning',msg:'It seems that you have not typed in a different email address.',contact:false}];return;}
$scope.alerts=[];$scope.canSubmit=false;$scope.changingEmail=true;$http.post(CCC.authApiUrl+'cryptopian/update/user/email/unactivated',{'email_address':$scope.email},{"withCredentials":true}).success(function(response,status,headers,config){$scope.canSubmit=true;$scope.changingEmail=false;if(response.Type>99){$scope.previousEmail=$scope.email;$scope.alerts=[{type:'success',msg:'Email address successfully changed. You can now request the verfification email to be sent to this address if you clik on the Send Verification Email button.',contact:false}];$templateCache.remove('/angular/activationreminder');}
else if(response.Type==4){$scope.alerts=[{type:'danger',msg:"Could not update your email because "+$scope.email+" is already registered under a different account.",contact:false}];$scope.email=$scope.previousEmail;}else if(response.Type==3){$scope.alerts=[{type:'danger',msg:"Could not update your email becasue "+$scope.email+" is not a valid email address.",contact:false}];$scope.email=$scope.previousEmail;}else{$scope.alerts=[{type:'danger',msg:'Oops! Something went wrong. Please refresh the page and try again.',contact:true}];}}).error(function(response,status,headers,config){$scope.canSubmit=true;$scope.changingEmail=false;$scope.alerts=[{type:'danger',msg:"Could not update your email because "+$scope.email+" is already registered.",contact:false}];});};}]);angular.module('ccc-app').controller('BanCtrl',['$scope','$uibModalInstance','cModalService','$http','userManager','toastNotifications','passedCryptopian',function($scope,$uibModalInstance,cModalService,$http,userManager,toastNotifications,passedCryptopian){$scope.selectedBanReason=0;$scope.randomBanJokeAsArray=['Loading....'];$http({method:'GET',url:'https://icanhazdadjoke.com/',headers:{'Accept':'application/json'}}).then(function successCallback(response){$scope.randomBanJokeAsArray=response.data.joke.replace(/\r\n\r\n/,'\r\n').split('\r\n');},function errorCallback(response){$scope.randomBanJokeAsArray=['Sorry, no random joke available. Check back later.'];});$scope.otherReasonText='';$scope.banReasons=[{'Key':'Spam','DisplayName':'Spam','Description':'Spamming the forum by posting links with no added value for the rest of the community'},{'Key':'InappropriateBehaviour','DisplayName':'Inappropriate Behaviour','Description':'Threatening, trying to scam or trick other users, using offensive language or generally behaving in an unpleasant manner.'},{'Key':'AffiliateLinks','DisplayName':'Affiliate Links','Description':'Adding a post or a review that has one or more affilate links. '}];$scope.isBanningUser=false;$scope.cancel=function(){$uibModalInstance.dismiss('Cancel');};$scope.banUser=function(){$scope.isBanningUser=true;var banReasonDescription='';if($scope.selectedBanReason=='Other'){banReasonDescription=$scope.otherReasonText;}else{banReasonDescription=$scope.banReasons[$scope.selectedBanReason].Description;}
userManager.banCryptopian(passedCryptopian.Id,banReasonDescription).then(function(response){var data=response.data;$scope.isBanningUser=false;if(data["Response"]=="Success"){if(data.Type==100){passedCryptopian.setBanned();toastNotifications.addNotification('success','Cryptopian '+passedCryptopian.Name+' successfully banned!');$uibModalInstance.close("Banned");}}else{if(data.Type==1){cModalService.showLoginModal("","Ban User");}
if(data.Type==5){cModalService.showActivationReminderModal();};if(data.Type==10){passedCryptopian.setBanned();toastNotifications.addNotification('success','Cryptopian '+passedCryptopian.Name+' is already banned. Somebody beat you to it!');$uibModalInstance.close("Already Banned");};}},function(response){$scope.isBanningUser=false;$uibModalInstance.close("Error: Could Not Ban");})};}]);angular.module('ccc-app').controller('CryptopianListModalCtrl',['$rootScope','$scope','$uibModalInstance','userManager','toastNotifications','cModalService','initObj',function($rootScope,$scope,$uibModalInstance,userManager,toastNotifications,cModalService,initObj){$scope.allCryptopianIds=[];$scope.showLoadingStatus=false;for(var iCList=0,lCList=initObj.Data.length;iCList<lCList;iCList++){initObj.Data[iCList].changingFollowStatus=false;$scope.allCryptopianIds.push(initObj.Data[iCList].Data.Id);}
$scope.cryptopianList=initObj;$scope.itIsMe=function(cryptopianId){if(!userManager.isLoggedIn()){return false;}
return userManager.getCryptopianId()==cryptopianId;}
$scope.cancel=function(){$scope.loginChange();$uibModalInstance.dismiss('Cancel');};$scope.closingModal=$scope.$on("modal.closing",function(event,newValue){$scope.loginChange();$scope.closingModal();});$scope.loadFollowingStatus=function(newValue){if(newValue==true){userManager.checkFollowingStatus($scope.allCryptopianIds.join()).success(function(data){if(data.Type==100){$scope.cryptopianList.Data.map(function(item){if(data.Followed.indexOf(item.Data.Id)>-1){item.amFollowing=true;}else{item.amFollowing=false;}
if(data.Following.indexOf(item.Data.Id)>-1){item.isFollowing=true;}else{item.isFollowing=false;}
return item;});}else{$scope.cryptopianList.Data.map(function(item){item.isFollowing=false;item.amFollowing=false;return item;});}
$scope.showLoadingStatus=false;});}else{$scope.cryptopianList.Data.map(function(item){item.isFollowing=false;item.amFollowing=false;return item;});$scope.showLoadingStatus=false;}};$scope.loginChange=$rootScope.$on("LoginValueChange",function(event,newValue){$scope.showLoadingStatus=true;$scope.loadFollowingStatus(newValue);});$scope.changeFollowingStatus=function(cryptopian){if(cryptopian.changingFollowStatus==true){return;}
cryptopian.changingFollowStatus=true;userManager.changeFollowingStatus(cryptopian.Data.Id,userManager.FOLLOWING.CRYPTOPIAN).success(function(data){if(data["Response"]=="Success"){if(data.Type==100){toastNotifications.addNotification('success','Following '+cryptopian.Data.Name+'!');cryptopian.amFollowing=true;}
if(data.Type==200){toastNotifications.addNotification('success','Unfollowed '+cryptopian.Data.Name+'!');cryptopian.amFollowing=false;}}else{if(data.Type==1){cModalService.showLoginModal("Please login or signup and you'll be able to follow "+cryptopian.Data.Name+".","Cryptonian List Modal Change Follow Status");}
if(data.Type==5){cModalService.showActivationReminderModal();};}
cryptopian.changingFollowStatus=false;});};$scope.loadMore=function(){if(initObj.ActionType=="0"){initObj.LoadMoreService.getAgreeCryptopians($scope.cryptopianList.ItemId,$scope.cryptopianList.Data[$scope.cryptopianList.Data.length-1].Id).success(function(data){$scope.cryptopianList.MoreAvailable=data.MoreAvailable;for(var iAgree=0,lAgree=data.Data.length;iAgree<lAgree;iAgree++){$scope.cryptopianList.Data.push(data.Data[iAgree]);}});}else{initObj.LoadMoreService.getDisagreeCryptopians($scope.cryptopianList.ItemId,$scope.cryptopianList.Data[$scope.cryptopianList.Data.length-1].Id).success(function(data){$scope.cryptopianList.MoreAvailable=data.MoreAvailable;for(var iDisagree=0,lDisagree=data.Data.length;iDisagree<lDisagree;iDisagree++){$scope.cryptopianList.Data.push(data.Data[iDisagree]);}});}};}]);angular.module('ccc-app').controller('PasswordResetCtrl',['$scope','$http','cModalService','userManager','toastNotifications',function($scope,$http,cModalService,userManager,toastNotifications){$scope.alerts=[];$scope.resetStage=1;$scope.sendingNewPass=false;$scope.cryptopian={'newPassword':'','hash':''};$scope.initPasswordReset=function(hashValue){$scope.cryptopian.hash=hashValue;}
$scope.closeAlert=function(index){$scope.alerts.splice(index,1);};$scope.passwordReset=function(){if(!$scope.cryptopian.newPassword||$scope.cryptopian.newPassword.trim()==""){$scope.alerts=[{type:'danger',msg:'It seems that the new password you have typed in is invalid',contact:false}];return;}
$scope.alerts=[];$scope.sendingNewPass=true;$http.post('/api/cryptopian/passreset/',$scope.cryptopian).success(function(response,status,headers,config){$scope.sendingNewPass=false;if(response.Type>99){$scope.resetStage=2;userManager.initUser(response["Data"]);toastNotifications.addNotification('success','<div>Pass reset successful.</div>'+'<div>Welcome back '+userManager.getUsername()+'!</div>');userManager.setLoggedIn(true);}}).error(function(response,status,headers,config){$scope.sendingNewPass=false;if(response.Type<100){$scope.alerts=[{type:'danger',msg:response["Message"],contact:false}];}else{$scope.alerts=[{type:'danger',msg:'Oops! Something went wrong. Please refresh the page and try again.',contact:true}];}});};}]);angular.module('ccc-app').controller('ChangeAvatarCtrl',['$scope','$uibModalInstance','$timeout','$templateCache','cModalService','userManager','toastNotifications',function($scope,$uibModalInstance,$timeout,$templateCache,cModalService,userManager,toastNotifications){$scope.alerts=[];$scope.canSubmit=true;$scope.changingAvatar=false;$scope.oldCryptopianAvatar=userManager.getAvatarUrl();$scope.newCryptopianAvatar=userManager.getAvatarUrl();$scope.closeAlert=function(index){$scope.alerts.splice(index,1);};$scope.cancel=function(){$uibModalInstance.dismiss('Cancel');};$scope.handleFileSelect=function(currentTarget){if(currentTarget.files.length!=1){return;}
var file=currentTarget.files[0];var reader=new FileReader();reader.onload=function(_file){$scope.$apply(function($scope){$scope.oldCryptopianAvatar=_file.target.result;});};reader.readAsDataURL(file);};$scope.selectFile=function(){$timeout(function(){angular.element('#newImageFile').trigger('click')},100);}
$scope.sendNewImageToServer=function(){if($scope.oldCryptopianAvatar==$scope.newCryptopianAvatar){$scope.alerts=[{type:'warning',msg:'It seems that you have not selected a new avatar.',contact:false}];return;}
$scope.alerts=[];$scope.canSubmit=false;$scope.changingAvatar=true;var objectWithUpdateFields={"general":{"avatar":$scope.newCryptopianAvatar}};userManager.updateFields({"update_data":objectWithUpdateFields}).success(function(data){if(data["Response"]=="Success"){$scope.changingAvatar=false;$scope.oldCryptopianAvatar=$scope.newCryptopianAvatar;userManager.setAvatarUrl($scope.newCryptopianAvatar)
toastNotifications.addNotification('success','Profile image succesfully updated!');$scope.canSubmit=true;$uibModalInstance.dismiss('Avatar Changed');}}).error(function(response,status,headers,config){toastNotifications.addNotification('error','Oops! Something went wrong. Please refresh the page and try again.');$scope.canSubmit=true;$scope.changingAvatar=false;$scope.alerts=[{type:'danger',msg:'Oops! Something went wrong. Please refresh the page and try again.',contact:true}];});};}]);;;;angular.module('ccc-app').directive('passReset',function(){return{restrict:'E',templateUrl:'general/pass-reset.html',controller:['$scope','$http','toastNotifications',function($scope,$http,toastNotifications){$scope.sentDataToApi=false;$scope.passwordResetError=false;$scope.sendingNewPass=true;$scope.hasHashKeyExpired=false;$scope.paramsToSendToUrl={'h':$scope.h,'user_id':$scope.id,'new_password':''}
$scope.sendNewPasswordToApi=function(){$http.post(CCC.authApiUrl+'cryptopian/pass/reset',$scope.paramsToSendToUrl,{"withCredentials":true}).then(function(resetPassResponse){resetPassResponse=resetPassResponse.data;$scope.sentDataToApi=true;},function(errResetPass){$scope.sentDataToApi=true;$scope.passwordResetError=true;if(errResetPass.data===undefined){toastNotifications.addNotification("error","Error trying to reset your account. Try again later.");}else{if(errResetPass.data.Type===41){$scope.hasHashKeyExpired=true;}
toastNotifications.addNotification("error",errResetPass.data.Message);}});};}],scope:{h:'@',id:'@'}};});angular.module('ccc-app').directive('requestPasswordReset',function(){return{restrict:'E',template:`
     <form ng-hide="hasResetPassEmailBeenSent === true" class="clearfix" role="form" name="passReset" novalidate>
      <p style="margin-left: 15px; margin-right: 15px; margin-top: 15px;">To reset your password, please enter your email address below.</p>
      <uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)" class="text-center" style="margin-top:10px; margin-bottom:10px;">
       <span class="glyphicon glyphicon-exclamation-sign" ng-show="alert.type=='danger'" aria-hidden="true"></span> {{alert.msg}}
      </uib-alert>
      <div class="col-md-12">
       <div class="form-group has-feedback" ng-class="{'has-success': passReset.email.$valid, 'has-error': passReset.email.$dirty && passReset.email.$invalid}">
        <label for="email" class="control-label" title="Your registred email address.">Email</label>
        <input type="email" class="form-control" name="email" ng-model="emailToSend" placeholder="Type in your email" required />
        <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="passReset.email.$valid" aria-hidden="true"></span>
        <span class="glyphicon glyphicon-remove form-control-feedback" ng-show="passReset.email.$dirty && passReset.email.$invalid" aria-hidden="true"></span>
       </div>
       <div class="form-group col-sm-12 col-xs-12">
        <button type="submit" class="btn btn-success btn-lg btn-block" value="SendPassResetEmail" ng-class="{'disabled':!canSubmit}" ng-click="sendPassResetEmail()">
         <i class="glyphicon glyphicon-play"></i> Reset <i ng-show="sendingPassResetEmail" class="glyphicon glyphicon-refresh glyphicon-spin"></i>
        </button>
       </div>
      </div>
     </form>
     <div ng-show="hasResetPassEmailBeenSent === true">
      <div class="alert alert-info">
       <b>An email has been sent to {{cryptopian.email}} containing instructions on how to reset your password.</b>
      </div>
      <p>
       If you have not received the email within 10 minutes, please check your emails SPAM / junk folders.
       If you continue to have problems, please email us at <a href="mailto:info@cryptocompare.com?subject=Password rest not working" target="_blank">info@cryptocompare.com</a>.
      </p>
     </div>`,controller:['$scope','$http','toastNotifications','userManager',function($scope,$http,toastNotifications,userManager){$scope.canSubmit=true;$scope.emailToSend=userManager.getEmailAddress();$scope.alerts=[];$scope.sendPassResetEmail=function(){$scope.sendingPassResetEmail=true;$scope.canSubmit=false;return $http.post(CCC.authApiUrl+"cryptopian/pass/reset/request",{"email":$scope.emailToSend}).then(function(response){response=response.data;$scope.sendingPassResetEmail=false;$scope.canSubmit=true;$scope.passReset.email.$valid=true;$scope.passReset.email.$invalid=false;$scope.passResetAlerts=[];if(response["Type"]===100){$scope.hasResetPassEmailBeenSent=true;}},function(errResponse){errResponse=errResponse.data;$scope.sendingPassResetEmail=false;$scope.canSubmit=true;$scope.passReset.email.$invalid=true;$scope.passResetAlerts=[];if(errResponse["Type"]<100){$scope.alerts.push({type:"danger",msg:errResponse["Message"]});}
if(errResponse["Type"]===2||errResponse["Type"]===1){$scope.passReset.email.$valid=false;$scope.passReset.email.$invalid=true;}});};}]}});angular.module('ccc-app').directive('activateCryptopian',function(){return{restrict:'E',templateUrl:'general/activate-cryptopian.html',controller:['$scope','$http','toastNotifications',function($scope,$http,toastNotifications){$scope.sentDataToApi=false;$scope.userNeedsToResetPassword=false;$scope.userHasAlreadyActivated=false;$scope.userActivationErr=false;$scope.hitApiToActivateUser=function(){var paramsToSendToUrl={'h':$scope.h,'user_id':$scope.id};$http.post(CCC.authApiUrl+'cryptopian/activate',paramsToSendToUrl,{"withCredentials":true}).then(function(activateUserResponse){activateUserResponse=activateUserResponse.data;$scope.userNeedsToResetPassword=activateUserResponse.Data.NeedsPasswordReset;$scope.sentDataToApi=true;},function(errActivateUser){$scope.sentDataToApi=true;if(errActivateUser.data===undefined){$scope.userActivationErr=true;toastNotifications.addNotification("error","Error activating account. Try again later.");}else if(errActivateUser.data.Type===64){$scope.userHasAlreadyActivated=true;toastNotifications.addNotification("error",errActivateUser.data.Message);}else{$scope.userActivationErr=true;toastNotifications.addNotification("error",errActivateUser.data.Message);}});};$scope.hitApiToActivateUser();}],scope:{h:'@',id:'@'}};});angular.module('ccc-app').directive('restoreCryptopian',function(){return{restrict:'E',templateUrl:'general/restore-cryptopian.html',controller:['$scope','$http','toastNotifications','cModalService',function($scope,$http,toastNotifications,cModalService){$scope.sentDataToApi=false;$scope.invalidKey=false;var paramsToSendToUrl={'restore_key':$scope.restore,'email':$scope.email,'username':$scope.username};$scope.submit=function(user){$scope.usernameIsTaken=false;$scope.emailIsTaken=false;$scope.error=false;if(user&&user.username){paramsToSendToUrl.username=user.username;}if(user&&user.email){paramsToSendToUrl.email=user.email;}
$http.post(CCC.authApiUrl+'cryptopian/restore/user',paramsToSendToUrl,{"withCredentials":true}).then(function(response){$scope.sentDataToApi=true;$scope.success=true;cModalService.showLoginModal("Account restored successfully, please login","Profile Update");},function(error){$scope.error=true;$scope.sentDataToApi=true;if(!error.data){toastNotifications.addNotification("error","Error restoring account. Try again later.");}else if(error.data.Type===52){$scope.emailIsTaken=true;toastNotifications.addNotification("error",error.data.Message);}else if(error.data.Type===36){$scope.usernameIsTaken=true;toastNotifications.addNotification("error",error.data.Message);}else{toastNotifications.addNotification("error",error.data.Message);}});}
$scope.submit();}],scope:{restore:'@',email:'@',username:'@'}};});angular.module('ccc-app').directive('ngMetaUpdateContent',function(){return{restrict:'A',link:function(scope,element,attrs){scope.$watch(attrs.ngMetaUpdateContent,function(value){attrs.$set('content',value);});}};});angular.module('ccc-app').directive('includeExtrenalScriptInTemplate',['$compile',function($compile){return{restrict:'E',link:function(scope,element,attr){if(attr.externalScriptUrl){var domElem='<script src="'+attr.externalScriptUrl+'" async defer></script>';$(element).append($compile(domElem)(scope));}}};}]);angular.module('ccc-app').directive('ngClassForLights',['$rootScope','cccLightsService',function($rootScope,cccLightsService){return{restrict:'A',link:function(scope,elem,attrs){if(cccLightsService.isOn()){angular.element(elem).addClass('lights-on').removeClass('lights-off');}else{angular.element(elem).addClass('lights-off').removeClass('lights-on');}
$rootScope.$on("LightsChange",function(){if(cccLightsService.isOn()){angular.element(elem).addClass('lights-on').removeClass('lights-off');}else{angular.element(elem).addClass('lights-off').removeClass('lights-on');}});}};}]);angular.module('ccc-app').directive('ngMetaBaseCanUrl',function(){return{restrict:'A',link:function(scope,element,attrs){scope.$watch(attrs.ngMetaBaseCanUrl,function(value){if(value!=""){attrs.$set('rel','canonical');attrs.$set('href',value);}else{attrs.$set('rel','');attrs.$set('href','');}});}};});angular.module('ccc-app').directive('ngMetaBaseAmpUrl',function(){return{restrict:'A',link:function(scope,element,attrs){scope.$watch(attrs.ngMetaBaseAmpUrl,function(value){if(value!=""){attrs.$set('rel','amphtml');attrs.$set('href',value);}else{attrs.$set('rel','');attrs.$set('href','');}});}};});angular.module('ccc-app').directive('notificationAction',[function(){return{restrict:'E',templateUrl:'general/notification-user-action.html',controller:['$scope','dateParsing',function($scope,dateParsing){$scope.DateParsing=dateParsing;$scope.markAsRead=function(){$scope.notification.isRead=true;};$scope.markAsNotNew=function(){$scope.notification.isNew=false;};$scope.getActionText=function(){switch($scope.notification.Type){case"Agree":return' agrees with ';break;case'Disagree':return' disagrees with ';break;case'Comment':return' commented on ';break;case'Favorit':return' favorited ';break;default:return' something ';break;}}}],scope:{notification:"="},link:function(scope,element,attrs){}};}]);angular.module('ccc-app').directive('topAlerts',['$compile','pageAlerts',function($compile,pageAlerts){return{restrict:'E',templateUrl:'general/top-alerts.html',controller:function($scope){},scope:{},link:function(scope,element,attrs){scope.pageAlerts=pageAlerts;}};}]);angular.module('ccc-app').directive('usernameOptions',[function(){return{restrict:'E',templateUrl:'general/username-options.html',controller:'UsernameOptionsCtrl',scope:{cryptopian:"=",icon:"=",avatar:"="},link:function(scope,element,attrs){}};}]);angular.module('ccc-app').directive('followableItemOptions',[function(){return{restrict:'E',templateUrl:'general/followable-item-options.html',controller:'FollowableItemOptionsCtrl',scope:{item:"=",icon:"=",avatar:"=",bubbleAlign:"@?bubbleAlign"},link:function(scope,element,attrs){}};}]);angular.module('ccc-app').directive('followPageItemOptions',[function(){return{restrict:'E',templateUrl:'general/follow-page-item-options.html',controller:'FollowPageItemOptionsCtrl',scope:{item:"=",icon:"=",avatar:"="},link:function(scope,element,attrs){}};}]);angular.module('ccc-app').directive('showTotal',['$compile','totals',function($compile,totals){return{restrict:'E',template:'<meta itemprop="interactionCount" content="UserComments:{{totals.get(totalName)}}"/>'+'<span class="total-value" ng-class="totalName" ng-title="{{totals.getFullNumber(totalName)}}">{{totals.get(totalName)}} {{totals.getText(totalName,text)}}</span>',controller:function($scope){},scope:{},link:function(scope,element,attrs){scope.totals=totals;scope.totalName=attrs["name"];scope.text=attrs["text"];}};}]);angular.module('ccc-app').directive('showTotalPageViews',['$compile','totals',function($compile,totals){return{restrict:'E',template:'<span class="total-value" ng-class="totalName" title="{{totals.getFullNumber(totalName)}} {{totals.getText(totalName,text)}}">{{totals.get(totalName)}}</span>',controller:function($scope){},scope:{},link:function(scope,element,attrs){scope.totals=totals;scope.totalName=attrs["name"];scope.text=attrs["text"];}};}]);angular.module('ccc-app').directive('toastNotifications',['$compile','toastNotifications',function($compile,toastNotifications){return{restrict:'E',templateUrl:'general/toast-notifications.html',controller:function($scope){},scope:{},link:function(scope,element,attrs){scope.toastNotifications=toastNotifications;}};}]);angular.module('ccc-app').directive('cookieNotificationPopup',[function(){return{restrict:'E',templateUrl:'general/cookie-notification-popup.html',controller:'CookieNotificationPopupCtrl',scope:{},link:function(scope,element,attrs){}};}]);angular.module('ccc-app').directive('adDesktopSidebar',[function(){return{restrict:'E',template:`<div class="{{classForPanel}}" ng-if="isActive">
       <div class="panel-heading">Sponsored</div>
       <div class="panel-body">
        <a rel="nofollow" ng-href="{{link}}" ng-if="!isServerByAdServer" class="sponsored-image">
         <img ng-src="{{imageUrl}}">
        </a>
        <div ng-if="isServerByAdServer" id="{{adServerDivId}}" style="overflow:hidden; margin-left:-20px">
       </div>
        </div>
   `,controller:function($scope,pageInfo){$scope.isActive=pageInfo.getSideBarSlot().isActive;$scope.link=pageInfo.getSideBarSlot().link;$scope.imageUrl=pageInfo.getSideBarSlot().imageUrl;$scope.isServerByAdServer=pageInfo.getSideBarSlot().isServerByAdServer;$scope.adServerDivId=pageInfo.getSideBarSlot().adServerDivId;},scope:{classForPanel:"@"},link:function(scope,element,attrs){}};}]);angular.module('ccc-app').directive('adDesktopAndMobileProfileViewPage',[function(){return{restrict:'E',template:`<div class="sponsored-by-top" ng-if="isActive && shouldShowImage()">
       <div class="sponsored-container">
        <a rel="nofollow" ng-href="{{link}}" class="sponsored-image">
         <span ng-if="textTop!=''">{{textTop}}<br/></span>
         <img ng-src="{{imageUrl}}"/>
        </a>
       </div>
        </div>
   `,controller:function($scope,pageInfo){$scope.isActive=pageInfo.hasSponsor();$scope.link=pageInfo.getSponsorLink();$scope.textTop=pageInfo.getSponsorTextTop();$scope.imageUrl=pageInfo.getSponsorImageUrl();$scope.shouldShowImage=function(){if(pageInfo.getImageSponsorExcludedCountries()===""){return true;}
var exculdedCountriesArray=pageInfo.getImageSponsorExcludedCountries().split(",");if(exculdedCountriesArray.indexOf(pageInfo.getUserCountryCode())!==-1){return false;}
return true;};},scope:{},link:function(scope,element,attrs){}};}]);angular.module('ccc-app').directive('adMobileSidebar',[function(){return{restrict:'E',template:`<div class="panel panel-block panel-sponsored mobile" ng-if="isActive">
       <div class="panel-heading">Sponsored</div>
       <div class="panel-body">
        <a rel="nofollow" ng-href="{{link}}" class="sponsored-image">
         <img ng-src="{{imageUrl}}">
        </a>
       </div>
        </div>
   `,controller:function($scope,pageInfo){$scope.isActive=pageInfo.getSideBarSlot().isActive;$scope.link=pageInfo.getSideBarSlot().link;$scope.imageUrl=pageInfo.getSideBarSlot().imageUrl;},scope:{},link:function(scope,element,attrs){}};}]);angular.module('ccc-app').directive('infiniteScroll',['$rootScope','$window','$timeout',function($rootScope,$window,$timeout){return{restrict:'A',scope:{scrollControllerObject:'='},link:function(scope,elem,attrs){$window=angular.element($window);handler=function(){var windowBottom,elementBottom,remaining,loadMore;windowBottom=$window.height()+$window.scrollTop();elementBottom=elem.offset().top+elem.height();remaining=elementBottom-windowBottom;loadMore=remaining<=$window.height();if(loadMore){$timeout(function(){scope.scrollControllerObject.loadMoreOnScroll();},0,true);}};$window.on('scroll',handler);var isScrolling=true;scope.$on('$destroy',function(){if(isScrolling){isScrolling=false;return $window.off('scroll',handler);}});scope.newView=$rootScope.$on('$stateChangeSuccess',function(event){if(!isScrolling){$window.on('scroll',handler);}});scope.changeView=$rootScope.$on('ChangeView',function(event,viewChangeParams){isScrolling=false;$window.off('scroll',handler);scope.changeView();scope.newView();});}};}]);;;;angular.module('ccc-app').factory('socketWrapper',['$rootScope','$interval',function socketWrapperFactory($rootScope,$interval){$interval(function(){$rootScope.$apply();},200,0,false);return io.connect('https://streamer.cryptocompare.com/',{secure:true});}]);angular.module('ccc-app').factory('streamerUtilities',['$rootScope','$filter','socketWrapper','subscriptionManager','orderBook',function streamerUtilitiesFactory($rootScope,$filter,socketWrapper,subscriptionManager,orderBook){var displaySettings=CCC.CURRENT.DISPLAY.FIELDS;var displayFlagsLinked=CCC.CURRENT.DISPLAY.FLAGSLINK;var tradeDisplaySettings=CCC.TRADE.DISPLAY.FIELDS;var displayCurrency=CCC.STATIC.CURRENCY;var utilStatic=CCC.STATIC.UTIL;var isStreaming=true;var isConnected=false;var alreadyStopped=false;var durationOfAnimation=900;var globalPageSubs={};var globalAuthKey="";var streamerUtilitiesInstance={};var cachedMessages={};var aggPreLoaded=false;var monitorPreLoaded=false;socketWrapper.on('connect',function(data){isConnected=true;$rootScope.$emit("SocketConnected",true);});socketWrapper.on('reconnect',function(){if(!isConnected){isConnected=true;$rootScope.$emit("SocketConnected",true);}else{}});socketWrapper.on('reconnecting',function(){if(isConnected){globalPageSubs={};isConnected=false;}});socketWrapper.on('m',function(message){var messageType=message.substring(0,message.indexOf("~"));switch(messageType){case CCC.STATIC.TYPE.TRADE:streamerUtilitiesInstance.emitCurrentTrade('TradeMessage',message);break;case CCC.STATIC.TYPE.CURRENT:streamerUtilitiesInstance.emitCurrentMessage('CurrentMessage',message);break;case CCC.STATIC.TYPE.CURRENTAGG:streamerUtilitiesInstance.emitCurrentMessage('CurrentAggMessage',message);break;case CCC.STATIC.TYPE.ORDERBOOK:streamerUtilitiesInstance.emitOrderBookMessage('OrderBookMessage',message);break;case CCC.STATIC.TYPE.FULLORDERBOOK:streamerUtilitiesInstance.emitFullOrderBookMessage('FullOrderBookMessage',message);break;case CCC.STATIC.TYPE.FULLVOLUME:streamerUtilitiesInstance.emitFullVolumeMessage('FullVolumeMessage',message);break;case CCC.STATIC.TYPE.ACTIVATION:streamerUtilitiesInstance.emitActivationMessage('ActivationMessage',message);break;case CCC.STATIC.TYPE.LOADCOMPLATE:if(!isStreaming&&!alreadyStopped){streamerUtilitiesInstance.stopStreaming();alreadyStopped=true;}
break;case CCC.STATIC.TYPE.UNAUTHORIZED:console.log(message);break;}});streamerUtilitiesInstance.setGlobalAuthKey=function(authKey){globalAuthKey=authKey;};streamerUtilitiesInstance.getStreamingStatus=function(){return isStreaming;};streamerUtilitiesInstance.stopStreaming=function(){var subsToSend=[];for(var sub in globalPageSubs){if(globalPageSubs.hasOwnProperty(sub)){subsToSend.push(sub);}}
if(subsToSend.length>0){socketWrapper.emit('SubRemove',{subs:subsToSend});isStreaming=false;return true;}
return false;};streamerUtilitiesInstance.startStreaming=function(){var subsToSend=[];if(isStreaming){return false;}
for(var sub in globalPageSubs){if(globalPageSubs.hasOwnProperty(sub)){subsToSend.push(sub);}}
if(subsToSend.length>0){socketWrapper.emit('SubAdd',{subs:subsToSend,auth:globalAuthKey});isStreaming=true;return true;}
return false;};streamerUtilitiesInstance.addGlobalPageSubs=function(subs,callback){var subsToSend=[];for(var i=0;i<subs.length;i++){var currentSub=subs[i];if(globalPageSubs.hasOwnProperty(currentSub)){globalPageSubs[currentSub]=globalPageSubs[currentSub]+1;if(cachedMessages.hasOwnProperty(currentSub)){callback(cachedMessages[currentSub]);}}else{globalPageSubs[currentSub]=1;subsToSend.push(currentSub);if(cachedMessages.hasOwnProperty(currentSub)){callback(cachedMessages[currentSub]);}}}
if(subsToSend.length>0){socketWrapper.emit('SubAdd',{subs:subsToSend,auth:globalAuthKey});}
alreadyStopped=false;};streamerUtilitiesInstance.removeGlobalPageSubs=function(subs){var subsToRemove=[];for(var i=0;i<subs.length;i++){if(globalPageSubs.hasOwnProperty(subs[i])){globalPageSubs[subs[i]]=globalPageSubs[subs[i]]-1;if(globalPageSubs[subs[i]]==0){subsToRemove.push(subs[i]);delete globalPageSubs[subs[i]];}}}
if(subsToRemove.length>0){socketWrapper.emit('SubRemove',{subs:subsToRemove});}};streamerUtilitiesInstance.initConnection=function(){return{connected:isConnected,loadingData:true,aggPreLoaded:aggPreLoaded,monitorPreLoaded:monitorPreLoaded,subs:[],data:[],orderbook:orderBook,keyToPosition:{},subsInvolvedIn:{},totalvolume24hour:0};};streamerUtilitiesInstance.initProgressBar=function(){if(isConnected){return{current:2,message:'Loading data...',max:3};}else{return{current:1,message:'Connecting...',max:3};}};streamerUtilitiesInstance.initOrdering=function(){return{isAscending:false,sortingField:''};};streamerUtilitiesInstance.emitFullVolumeMessage=function(messageType,messageRaw){var messageToEmit={};var displayObj={};var fullVolume;messageToEmit.Raw=messageRaw;messageToEmit.Data=CCC.FULLVOLUME.unpack(messageRaw);var symbol=displayCurrency.getSymbol(messageToEmit.Data['SYMBOL']);messageToEmit.SubKey=CCC.FULLVOLUME.getKey(messageToEmit.Data);displayObj.FROMSYMBOL=symbol;displayObj.FULLVOLUME=utilStatic.convertValueToDisplay(symbol,messageToEmit.Data['FULLVOLUME'],$filter('number'),'short');messageToEmit.Display=displayObj;$rootScope.$emit(messageType,messageToEmit);};streamerUtilitiesInstance.emitOrderBookMessage=function(messageType,messageRaw){var messageToEmit={};var currentOBMessage=CCC.ORDER.unpack(messageRaw);var subKey=CCC.ORDER.getKey(currentOBMessage);var orderBookKey=CCC.ORDER.getOrderBookKey(currentOBMessage);orderBook.decorateDisplayProperties(currentOBMessage);messageToEmit.Raw=messageRaw;messageToEmit.SubKey=subKey;messageToEmit.OrderBookKey=orderBookKey;messageToEmit.Obj=currentOBMessage;$rootScope.$emit(messageType,messageToEmit);};streamerUtilitiesInstance.emitFullOrderBookMessage=function(messageType,messageRaw){var messageToEmit={};var orderBookKey=orderBook.getKeyFromPacked(messageRaw);var subKey=CCC.STATIC.TYPE.ORDERBOOK+'~'+orderBookKey;messageToEmit.Raw=messageRaw;messageToEmit.SubKey=subKey;messageToEmit.OrderBookKey=orderBookKey;$rootScope.$emit(messageType,messageToEmit);};streamerUtilitiesInstance.emitActivationMessage=function(messageType,messageRaw){var messageToEmit={};var subKey=CCC.STATIC.TYPE.ACTIVATION+'~ACTIVATION';var currentParts=messageRaw.split('~');var currentActivationMessage={};currentActivationMessage.T=CCC.STATIC.TYPE.ACTIVATION;currentActivationMessage.COUNTRY=currentParts[2]||'N/A';messageToEmit.Raw=messageRaw;messageToEmit.SubKey=subKey;messageToEmit.Obj=currentActivationMessage;$rootScope.$emit(messageType,messageToEmit);};streamerUtilitiesInstance.emitCurrentTrade=function(messageType,messageRaw){var currentTrade=CCC.TRADE.unpack(messageRaw);var subKey=CCC.TRADE.getKey(currentTrade);var currentDisplay={};for(var property in currentTrade){if(tradeDisplaySettings[property].Show){switch(tradeDisplaySettings[property].Filter){case'Date':currentDisplay[property]=$filter('date')(currentTrade[property]*1000,tradeDisplaySettings[property].Format);break;case'Number':var symbolType=tradeDisplaySettings[property].Symbol;currentDisplay[property]=utilStatic.convertValueToDisplay(currentDisplay[symbolType],currentTrade[property],$filter('number'));break;case'Text':currentDisplay[property]=currentTrade[property];break;case'CurrencySymbol':currentDisplay[property]=displayCurrency.getSymbol(currentTrade[property]);break;case'Market':currentDisplay[property]=subscriptionManager.getNameForExchange(currentTrade[property]);break
case'TradeFlag':if(parseInt(currentTrade[property],16)&CCC.TRADE.FLAGS.SELL){currentDisplay[property]='Sell';}else if(parseInt(currentTrade[property],16)&CCC.TRADE.FLAGS.BUY){currentDisplay[property]='Buy';}else{currentDisplay[property]='Unknown';}
break;}}}
currentTrade['ARRIVEDON']=new Date();currentTrade['highlight']=true;currentTrade['DISPLAY']=currentDisplay;var messageToEmit={};messageToEmit.Raw=messageRaw;messageToEmit.SubKey=subKey;messageToEmit.Obj=currentTrade;$rootScope.$emit(messageType,messageToEmit);};streamerUtilitiesInstance.mergeObjects=function(obj1,obj2){for(var attrname in obj2){obj1[attrname]=obj2[attrname];}
return obj1;}
streamerUtilitiesInstance.copyObject=function(obj1){var obj2={};for(var attrname in obj1){obj2[attrname]=obj1[attrname];}
return obj2;}
streamerUtilitiesInstance.decorateCurrent=function(prevMessage,newMessage){prevMessage=prevMessage||{};prevMessage['SUBKEY']=prevMessage['SUBKEY']||newMessage.SubKey;prevMessage['DATA']=newMessage.Obj;prevMessage['DISPLAY']=newMessage.Display;if(prevMessage['VISUAL']){prevMessage['VISUAL']=streamerUtilitiesInstance.mergeObjects(prevMessage['VISUAL'],newMessage.Visual);}else{prevMessage['VISUAL']=newMessage.Visual;}
return prevMessage;};streamerUtilitiesInstance.populatePortfolioPrice=function(price,secondPrice,conversionType){var calculatedPrice=0;switch(conversionType){case"multiply":calculatedPrice=price*secondPrice;break;case"divide":case"invert_divide":calculatedPrice=price/secondPrice;break;case"invert_muliply":calculatedPrice=1/(price*secondPrice);break;}
return calculatedPrice;};streamerUtilitiesInstance.populateConvertedVisual=function(coin,subs,subIndex){var isFirstObject=subIndex==0;var newMessage=subs[subIndex];var subKey=newMessage.SubKey;var setOppositeDirection=function(visualObject){coin.VISUAL={};coin.VISUAL["PRICEUP"]=visualObject["PRICEDOWN"];coin.VISUAL["PRICEDOWN"]=visualObject["PRICEUP"];coin.VISUAL["PRICEUNCHANGED"]=visualObject["PRICEUNCHANGED"];};switch(coin.Coin.Conversion){case"direct":case"multiply":streamerUtilitiesInstance.mergeObjects(coin.VISUAL,newMessage.Visual);break;case"divide":case"invert_divide":if(isFirstObject){streamerUtilitiesInstance.mergeObjects(coin.VISUAL,newMessage.Visual);}else{setOppositeDirection(newMessage.Visual);}
break;case"invert":case"invert_muliply":if(isFirstObject){setOppositeDirection(newMessage.Visual);}else{streamerUtilitiesInstance.mergeObjects(coin.VISUAL,newMessage.Visual);}
break;}};streamerUtilitiesInstance.populateVisualBasedOnPrice=function(previousPriceValue,previousPriceDisplay,currentPriceValue,currentPriceDisplay){var newVisual={};if(previousPriceDisplay!=currentPriceDisplay){var dateNow=new Date();var animationExpires=dateNow.setMilliseconds(dateNow.getMilliseconds()+durationOfAnimation);if(previousPriceValue>currentPriceValue){newVisual["PRICEDOWN"]=animationExpires;}else{newVisual["PRICEUP"]=animationExpires;}}
return newVisual;};streamerUtilitiesInstance.decorateICOUpcomingOngoingMember=function(coin,subsNeeded,subIndex){var conversion=coin.Coin.Conversion;var currentMessage=coin.DATA;var currentDisplay=coin.DISPLAY;if(isNaN(coin.CommonData.ICOStartPrice)||coin.CommonData.ICOStartPrice==0){currentMessage.ICOSTARTPRICE=0;currentDisplay.ICOSTARTPRICE="-";return coin;}
var previousPriceValue=currentMessage.ICOSTARTPRICE||0;var previousPriceDisplay=currentDisplay.ICOSTARTPRICE||"0";if(conversion=='direct'){currentMessage.ICOSTARTPRICE=subsNeeded[0].Obj.PRICE*coin.CommonData.ICOStartPrice;currentMessage.OPEN24HOUR=subsNeeded[0].Obj.OPEN24HOUR*coin.CommonData.ICOStartPrice;}else if(conversion=='invert'){currentMessage.ICOSTARTPRICE=coin.CommonData.ICOStartPrice/coin.subsNeeded[0].Obj.PRICE;currentMessage.OPEN24HOUR=coin.CommonData.ICOStartPrice/coin.subsNeeded[0].Obj.OPEN24HOUR;}else{currentMessage.ICOSTARTPRICE=streamerUtilitiesInstance.populatePortfolioPrice(coin.subsNeeded[0].Obj.PRICE,coin.subsNeeded[1].Obj.PRICE,conversion)*coin.CommonData.ICOStartPrice;currentMessage.OPEN24HOUR=streamerUtilitiesInstance.populatePortfolioPrice(coin.subsNeeded[0].Obj.OPEN24HOUR,coin.subsNeeded[1].Obj.OPEN24HOUR,conversion)*coin.CommonData.ICOStartPrice;}
if(currentMessage.ICOSTARTPRICE>0&&currentMessage.OPEN24HOUR>0){currentMessage.CHANGE24HOUR=currentMessage.ICOSTARTPRICE-currentMessage.OPEN24HOUR;}
currentDisplay.ICOSTARTPRICE=utilStatic.convertValueToDisplay("$",currentMessage.ICOSTARTPRICE,$filter('number'));var newVisual=streamerUtilitiesInstance.populateVisualBasedOnPrice(previousPriceValue,previousPriceDisplay,currentMessage.ICOSTARTPRICE,currentDisplay.ICOSTARTPRICE);streamerUtilitiesInstance.mergeObjects(coin.VISUAL,newVisual);return coin;};streamerUtilitiesInstance.decorateICOPastMember=function(coin,subsNeeded,subIndex){var conversion=coin.Coin.Conversion;var currentMessage=coin.DATA;var currentDisplay=coin.DISPLAY;var previousPriceValue=currentMessage.PRICE;var previousPriceDisplay=currentDisplay.PRICE;if(conversion=='direct'){currentMessage.PRICE=subsNeeded[0].Obj.PRICE;currentMessage.OPEN24HOUR=subsNeeded[0].Obj.OPEN24HOUR;}else if(conversion=='invert'){currentMessage.PRICE=1/subsNeeded[0].Obj.PRICE;currentMessage.OPEN24HOUR=1/subsNeeded[0].Obj.OPEN24HOUR;}else{currentMessage.PRICE=streamerUtilitiesInstance.populatePortfolioPrice(subsNeeded[0].Obj.PRICE,subsNeeded[1].Obj.PRICE,conversion);currentMessage.OPEN24HOUR=streamerUtilitiesInstance.populatePortfolioPrice(subsNeeded[0].Obj.OPEN24HOUR,subsNeeded[1].Obj.OPEN24HOUR,conversion);}
currentDisplay.PRICE=utilStatic.convertValueToDisplay("$",currentMessage.PRICE,$filter('number'));currentDisplay.OPEN24HOUR=utilStatic.convertValueToDisplay("$",currentMessage.OPEN24HOUR,$filter('number'));var newCHANGE24HOUR=currentMessage.PRICE-currentMessage.OPEN24HOUR;currentMessage.CHANGE24HOUR=newCHANGE24HOUR;currentMessage.CHANGEPCT24HOUR=currentMessage.CHANGE24HOUR/currentMessage.OPEN24HOUR*100;if(Math.abs(currentMessage.CHANGE24HOUR)>10000){currentDisplay.CHANGE24HOUR='$ '+$filter('number')(currentMessage.CHANGE24HOUR,0);}else if(Math.abs(currentMessage.CHANGE24HOUR)>1){currentDisplay.CHANGE24HOUR='$ '+$filter('number')(currentMessage.CHANGE24HOUR,2);}else{currentDisplay.CHANGE24HOUR='$ '+currentMessage.CHANGE24HOUR.toPrecision(2);}
currentDisplay.CHANGEPCT24HOUR=$filter('number')(currentMessage.CHANGEPCT24HOUR,2)+"%";if(isNaN(coin.CommonData.TotalCoinsMined)||coin.CommonData.TotalCoinsMined==0){currentMessage.MKTCAP=0;currentDisplay.MKTCAP="-";}else{currentMessage.MKTCAP=currentMessage.PRICE*coin.CommonData.TotalCoinsMined;currentDisplay.MKTCAP=utilStatic.convertValueToDisplay("$",currentMessage.MKTCAP,$filter('number'),'short');}
if(currentMessage.ICOPRICE){currentMessage.ROI=(currentMessage.PRICE/coin.DATA.ICOPRICE-1)*100;currentDisplay.ROI=utilStatic.convertValueToDisplay("",currentMessage.ROI,$filter('number'),'short')+"%";}else{currentMessage.ROI=0;currentDisplay.ROI="-";}
var newVisual=streamerUtilitiesInstance.populateVisualBasedOnPrice(previousPriceValue,previousPriceDisplay,currentMessage.PRICE,currentDisplay.PRICE);streamerUtilitiesInstance.mergeObjects(coin.VISUAL,newVisual);return coin;};streamerUtilitiesInstance.decorateCurrentPorfolioMember=function(prevMessage,newMessage,type,portfolioCurrency,conversionType){var dateNow=new Date();var animationExpires=dateNow.setMilliseconds(dateNow.getMilliseconds()+durationOfAnimation);prevMessage.PriceInfo[type].RAW=newMessage.Obj;prevMessage.PriceInfo[type].DISPLAY=newMessage.Display;var currentPrice=newMessage.Obj.PRICE;var currentOpen=newMessage.Obj.OPEN24HOUR;var lastUpdate=newMessage.Obj.LASTUPDATE;var displaySymbol=displayCurrency.getSymbol(portfolioCurrency);var isRealatedToConversion=false;prevMessage.PriceInfo.PortfolioValues.RAW.LastUpdate=lastUpdate;switch(type){case'Current':prevMessage.PriceInfo.PortfolioValues.RAW.PrevPrice=prevMessage.PriceInfo.PortfolioValues.RAW.Price;if(conversionType=='invert'){prevMessage.PriceInfo.PortfolioValues.RAW.Price=1/currentPrice;prevMessage.PriceInfo.PortfolioValues.RAW.Open24Hour=1/currentOpen;}else{prevMessage.PriceInfo.PortfolioValues.RAW.Price=currentPrice;prevMessage.PriceInfo.PortfolioValues.RAW.Open24Hour=currentOpen;}
break;case'Conversion':if(prevMessage.PriceInfo.SubOne.RAW.hasOwnProperty('PRICE')){prevMessage.PriceInfo.PortfolioValues.RAW.PrevPrice=prevMessage.PriceInfo.PortfolioValues.RAW.Price;prevMessage.PriceInfo.PortfolioValues.RAW.Price=streamerUtilitiesInstance.populatePortfolioPrice(prevMessage.PriceInfo.SubOne.RAW.PRICE,currentPrice,conversionType);}
if(prevMessage.PriceInfo.SubOne.RAW.hasOwnProperty('OPEN24HOUR')){prevMessage.PriceInfo.PortfolioValues.RAW.Open24Hour=streamerUtilitiesInstance.populatePortfolioPrice(prevMessage.PriceInfo.SubOne.RAW.OPEN24HOUR,currentOpen,conversionType);}
break;case'SubOne':if(prevMessage.PriceInfo.Conversion.RAW.hasOwnProperty('PRICE')){prevMessage.PriceInfo.PortfolioValues.RAW.PrevPrice=prevMessage.PriceInfo.PortfolioValues.RAW.Price;prevMessage.PriceInfo.PortfolioValues.RAW.Price=streamerUtilitiesInstance.populatePortfolioPrice(currentPrice,prevMessage.PriceInfo.Conversion.RAW.PRICE,conversionType);}
if(prevMessage.PriceInfo.Conversion.RAW.hasOwnProperty('OPEN24HOUR')){prevMessage.PriceInfo.PortfolioValues.RAW.Open24Hour=streamerUtilitiesInstance.populatePortfolioPrice(currentOpen,prevMessage.PriceInfo.Conversion.RAW.OPEN24HOUR,conversionType);}
break;case'CurrentBuy':if(conversionType=='invert'){prevMessage.PriceInfo.PortfolioValues.RAW.BuyConversionPrice=1/currentPrice;prevMessage.PriceInfo.PortfolioValues.RAW.BuyConversionOpen24Hour=1/currentOpen;}else{prevMessage.PriceInfo.PortfolioValues.RAW.BuyConversionPrice=currentPrice;prevMessage.PriceInfo.PortfolioValues.RAW.BuyConversionOpen24Hour=currentOpen;}
isRealatedToConversion=true;break;case'ConversionBuy':if(prevMessage.PriceInfo.ConversionBuySubOne.RAW.hasOwnProperty('PRICE')){prevMessage.PriceInfo.PortfolioValues.RAW.BuyConversionPrice=streamerUtilitiesInstance.populatePortfolioPrice(prevMessage.PriceInfo.ConversionBuySubOne.RAW.PRICE,currentPrice,conversionType);isRealatedToConversion=true;}
if(prevMessage.PriceInfo.ConversionBuySubOne.RAW.hasOwnProperty('OPEN24HOUR')){prevMessage.PriceInfo.PortfolioValues.RAW.BuyConversionOpen24Hour=streamerUtilitiesInstance.populatePortfolioPrice(prevMessage.PriceInfo.ConversionBuySubOne.RAW.OPEN24HOUR,currentOpen,conversionType);isRealatedToConversion=true;}
break;case'ConversionBuySubOne':if(prevMessage.PriceInfo.ConversionBuy.RAW.hasOwnProperty('PRICE')){prevMessage.PriceInfo.PortfolioValues.RAW.BuyConversionPrice=streamerUtilitiesInstance.populatePortfolioPrice(currentPrice,prevMessage.PriceInfo.ConversionBuy.RAW.PRICE,conversionType);isRealatedToConversion=true;}
if(prevMessage.PriceInfo.ConversionBuy.RAW.hasOwnProperty('OPEN24HOUR')){prevMessage.PriceInfo.PortfolioValues.RAW.BuyConversionOpen24Hour=streamerUtilitiesInstance.populatePortfolioPrice(currentOpen,prevMessage.PriceInfo.ConversionBuy.RAW.OPEN24HOUR,conversionType);isRealatedToConversion=true;}
break;}
if(isRealatedToConversion==true){prevMessage.PriceInfo.Visual.CONVERSIONBUY=animationExpires;}
return prevMessage;};streamerUtilitiesInstance.decorateCoinDataWithNewObj=function(prevMessage,newMessage,priceData){var priceDataDisplay=priceData||'';var toSymbol=displayCurrency.getSymbol(prevMessage['SubInfo']['CurrencyTo']);var fromSymbol=displayCurrency.getSymbol(prevMessage['SubInfo']['CurrencyFrom']);var totalCoinsMined=prevMessage['SubInfo']['Supply'];var oldDisplayArray=streamerUtilitiesInstance.copyObject(prevMessage.DISPLAY);var oldDataArray=streamerUtilitiesInstance.copyObject(prevMessage.DATA);var fullVolume=prevMessage['DATA']['FULLVOLUME'];var conversionType=prevMessage['SubInfo']['Conversion'];switch(conversionType){case"direct":var subKey=prevMessage['SubInfo']['SubsNeeded'][0];prevMessage.DATA=cachedMessages[subKey]['Obj'];break;case"multiply":var subNeeded1=prevMessage['SubInfo']['SubsNeeded'][0];var subNeeded2=prevMessage['SubInfo']['SubsNeeded'][1];prevMessage['DATA']=CCC.CURRENT.multiply(cachedMessages[subNeeded1]['Obj'],cachedMessages[subNeeded2]['Obj'],prevMessage.DATA.VOLUME24HOUR);break;case"divide":var subNeeded1=prevMessage['SubInfo']['SubsNeeded'][0];var subNeeded2=prevMessage['SubInfo']['SubsNeeded'][1];prevMessage['DATA']=CCC.CURRENT.divide(cachedMessages[subNeeded1]['Obj'],cachedMessages[subNeeded2]['Obj']);break;case"invert":var subKey=prevMessage['SubInfo']['SubsNeeded'][0];prevMessage.DATA=CCC.CURRENT.invert(cachedMessages[subKey]['Obj']);break;case"invert_divide":var subNeeded1=prevMessage['SubInfo']['SubsNeeded'][0];var subNeeded2=prevMessage['SubInfo']['SubsNeeded'][1];prevMessage['DATA']=CCC.CURRENT.divide(CCC.CURRENT.invert(cachedMessages[subNeeded2]['Obj']),CCC.CURRENT.invert(cachedMessages[subNeeded1]['Obj']));}
prevMessage.DATA.FULLVOLUME=fullVolume;prevMessage.DATA.FULLVOLUMETO=fullVolume*prevMessage['DATA']['PRICE'];prevMessage.DISPLAY.FULLVOLUME=utilStatic.convertValueToDisplay(fromSymbol,fullVolume,$filter('number'),'short');prevMessage.DISPLAY.FULLVOLUMETO=utilStatic.convertValueToDisplay(toSymbol,prevMessage.DATA.PRICE*fullVolume,$filter('number'),'short');prevMessage.DATA.CHANGE24HOUR=prevMessage.DATA.PRICE-prevMessage.DATA.OPEN24HOUR;prevMessage.DATA.CHANGEPCT24HOUR=prevMessage.DATA.CHANGE24HOUR/prevMessage.DATA.OPEN24HOUR*100;prevMessage.DISPLAY.CHANGEPCT24HOUR=$filter('number')(prevMessage.DATA.CHANGEPCT24HOUR,2);prevMessage.DISPLAY.PRICE=utilStatic.convertValueToDisplay(toSymbol,prevMessage.DATA.PRICE,$filter('number'),priceDataDisplay);prevMessage.DISPLAY.OPEN24HOUR=utilStatic.convertValueToDisplay(toSymbol,prevMessage.DATA.OPEN24HOUR,$filter('number'),priceDataDisplay);prevMessage.DISPLAY.VOLUME24HOUR=utilStatic.convertValueToDisplay(toSymbol,prevMessage.DATA.VOLUME24HOUR,$filter('number'),'short');if(conversionType==='direct'||prevMessage.DATA.VOLUME24HOUR>0){prevMessage.DISPLAY.VOLUME24HOURTO=utilStatic.convertValueToDisplay(toSymbol,prevMessage.DATA.VOLUME24HOURTO,$filter('number'),'short');}else{prevMessage.DISPLAY.VOLUME24HOURTO='-';}
if(totalCoinsMined>0){prevMessage.DATA.MKTCAP=prevMessage.DATA.PRICE*totalCoinsMined;prevMessage.DISPLAY.MKTCAP=utilStatic.convertValueToDisplay(toSymbol,prevMessage.DATA.MKTCAP,$filter('number'),'short');}else{prevMessage.DATA.MKTCAP=0;prevMessage.DISPLAY.MKTCAP="-";}
if(oldDisplayArray.PRICE!==prevMessage.DISPLAY.PRICE){prevMessage['VISUAL']=prevMessage['VISUAL']?streamerUtilitiesInstance.mergeObjects(prevMessage['VISUAL'],newMessage.Visual):newMessage.Visual;if(oldDisplayArray.MKTCAP!==prevMessage.DISPLAY.MKTCAP){if(prevMessage.VISUAL.PRICEUP){prevMessage.VISUAL.MKTCAPUP=prevMessage.VISUAL.PRICEUP;}else if(prevMessage.VISUAL.PRICEDOWN){prevMessage.VISUAL.MKTCAPDOWN=prevMessage.VISUAL.PRICEDOWN;}}}
return prevMessage;};streamerUtilitiesInstance.decorateNotNeededSubTypeArray=function(coinArrayToDecorate){var symbol=displayCurrency.getSymbol(coinArrayToDecorate.SubInfo.CurrencyTo);var fullVolume=coinArrayToDecorate.DATA.FULLVOLUME;coinArrayToDecorate.DATA={"PRICE":1,"VOLUME24HOURTO":0,"MKTCAP":coinArrayToDecorate.SubInfo.Supply,"FULLVOLUME":fullVolume,"FULLVOLUMETO":fullVolume,"CHANGEPCT24HOUR":0}
coinArrayToDecorate.DISPLAY={"PRICE":utilStatic.convertValueToDisplay(symbol,coinArrayToDecorate.DATA.PRICE,$filter('number')),"VOLUME24HOURTO":"-","MKTCAP":utilStatic.convertValueToDisplay(symbol,coinArrayToDecorate.DATA.MKTCAP,$filter('number'),'short'),"FULLVOLUMETO":utilStatic.convertValueToDisplay(symbol,coinArrayToDecorate.DATA.FULLVOLUME,$filter('number'),'short'),"CHANGEPCT24HOUR":$filter('number')(coinArrayToDecorate.DATA.CHANGEPCT24HOUR,2)}
return coinArrayToDecorate;};streamerUtilitiesInstance.decorateCurrentWithMktCap=function(prevMessage,newMessage,totalCoinsMined){prevMessage=prevMessage||{};prevMessage['SUBKEY']=prevMessage['SUBKEY']||newMessage.SubKey;prevMessage['DATA']=newMessage.Obj;prevMessage['DISPLAY']=newMessage.Display;prevMessage.DATA.MKTCAP=0;prevMessage.DISPLAY.MKTCAP="-";if(totalCoinsMined!=0){prevMessage.DATA.MKTCAP=prevMessage['DATA'].PRICE*totalCoinsMined;prevMessage.DISPLAY.MKTCAP=utilStatic.convertValueToDisplay(prevMessage.DISPLAY.TOSYMBOL,prevMessage.DATA.MKTCAP,$filter('number'),'short');}
if(prevMessage['VISUAL']){prevMessage['VISUAL']=streamerUtilitiesInstance.mergeObjects(prevMessage['VISUAL'],newMessage.Visual);}else{prevMessage['VISUAL']=newMessage.Visual;}
return prevMessage;};streamerUtilitiesInstance.decorateMktCap=function(messageInfo,totalCoinsMined){var messageToReturn={};messageToReturn.DATA={};messageToReturn.DISPLAY={};var currentPrice=messageInfo.Obj.PRICE;var displaySymbol=messageInfo.Display.TOSYMBOL;messageToReturn.DATA.PRICE=currentPrice;messageToReturn.DATA.MKTCAP=0;messageToReturn.DISPLAY.PRICE=utilStatic.convertValueToDisplay(displaySymbol,currentPrice,$filter('number'));messageToReturn.DISPLAY.MKTCAP="Not Available";if(totalCoinsMined!=0){messageToReturn.DATA.MKTCAP=currentPrice*totalCoinsMined;messageToReturn.DISPLAY.MKTCAP=utilStatic.convertValueToDisplay(displaySymbol,messageToReturn.DATA.MKTCAP,$filter('number'),'short');}
return messageToReturn;};streamerUtilitiesInstance.decorateCurrenyMktShare=function(messageInfo,totalVolume){var messageToReturn={};messageToReturn.DATA={};messageToReturn.DISPLAY={};var volumeForm=messageInfo.Obj.VOLUME24HOUR;var volumeTo=messageInfo.Obj.VOLUME24HOURTO;var displayToSymbol=messageInfo.Display.TOSYMBOL;var displayFromSymbol=messageInfo.Display.FROMSYMBOL;messageToReturn.DATA.VOLUME24HOUR=volumeForm;messageToReturn.DATA.VOLUME24HOURTO=volumeTo;messageToReturn.DISPLAY.VOLUME24HOUR=utilStatic.convertValueToDisplay(displayFromSymbol,volumeForm,$filter('number'));messageToReturn.DISPLAY.VOLUME24HOURTO=utilStatic.convertValueToDisplay(displayToSymbol,volumeTo,$filter('number'));messageToReturn.DISPLAY.TOSYMBOL=displayToSymbol;messageToReturn.DISPLAY.FROMSYMBOL=displayFromSymbol;return messageToReturn;};streamerUtilitiesInstance.initMonitorFromServer=function(rawDataArray){for(var i=0,length=rawDataArray.length;i<length;i++){streamerUtilitiesInstance.emitCurrentMessage('CurrentMessage',rawDataArray[i]);}
monitorPreLoaded=true;};streamerUtilitiesInstance.initAggFromServer=function(rawDataArray){for(var i=0,length=rawDataArray.length;i<length;i++){streamerUtilitiesInstance.emitCurrentMessage('CurrentAggMessage',rawDataArray[i]);}
aggPreLoaded=true;};streamerUtilitiesInstance.generateCurrentMessage=function(messageRaw){var lastestMessage=CCC.CURRENT.unpack(messageRaw);var subKey=CCC.CURRENT.getKey(lastestMessage);var dateNow=new Date();var animationExpires=dateNow.setMilliseconds(dateNow.getMilliseconds()+durationOfAnimation);var currentMessageFull=cachedMessages[subKey]||{};var currentMessage=currentMessageFull['Obj']||{};var currentDisplay=currentMessageFull['Display']||{};var currentVisual={};currentDisplay.FROMSYMBOL=displayCurrency.getSymbol(lastestMessage.FROMSYMBOL);currentDisplay.TOSYMBOL=displayCurrency.getSymbol(lastestMessage.TOSYMBOL);for(var flag in CCC.CURRENT.FLAGS){if(parseInt(lastestMessage['FLAGS'],16)&CCC.CURRENT.FLAGS[flag]){currentVisual[flag]=animationExpires;for(var i=0;i<displayFlagsLinked[flag].length;i++){currentVisual[displayFlagsLinked[flag][i]]=false;}}}
for(var property in lastestMessage){currentMessage[property]=lastestMessage[property];if(displaySettings[property].Show){currentVisual[property]=animationExpires;switch(displaySettings[property].Filter){case'Date':currentDisplay[property]=$filter('date')(lastestMessage[property]*1000,displaySettings[property].Format);break;case'Number':var symbolType=displaySettings[property].Symbol;currentDisplay[property]=utilStatic.convertValueToDisplay(currentDisplay[symbolType],lastestMessage[property],$filter('number'));if(displaySettings[property].SortNumberAsWell===true){currentDisplay[property+'_SHORT']=utilStatic.convertValueToDisplay(currentDisplay[symbolType],lastestMessage[property],$filter('number'),'short');}
break;case'String':currentDisplay[property]=lastestMessage[property];break;case'Market':currentDisplay[property]=subscriptionManager.getNameForExchange(lastestMessage[property]);break}}}
var newCHANGE24HOUR=currentMessage.PRICE-currentMessage.OPEN24HOUR;currentVisual.CHANGE24HOUR=animationExpires;currentMessage.CHANGE24HOUR=newCHANGE24HOUR;currentMessage.CHANGEPCT24HOUR=currentMessage.CHANGE24HOUR/currentMessage.OPEN24HOUR*100;if(Math.abs(currentMessage.CHANGE24HOUR)>10000){currentDisplay.CHANGE24HOUR=currentDisplay.TOSYMBOL+' '+$filter('number')(currentMessage.CHANGE24HOUR,0);}else if(Math.abs(currentMessage.CHANGE24HOUR)>1){currentDisplay.CHANGE24HOUR=currentDisplay.TOSYMBOL+' '+$filter('number')(currentMessage.CHANGE24HOUR,2);}else{currentDisplay.CHANGE24HOUR=currentDisplay.TOSYMBOL+' '+currentMessage.CHANGE24HOUR.toPrecision(2);}
currentDisplay.CHANGEPCT24HOUR=$filter('number')(currentMessage.CHANGEPCT24HOUR,2);if(currentMessage.CHANGE24HOUR>0){currentDisplay.CHANGE24HOURUP=animationExpires;currentDisplay.CHANGE24HOURUNCHANGED=false;currentDisplay.CHANGE24HOURDOWN=false;}else if(currentMessage.CHANGE24HOUR<0){currentDisplay.CHANGE24HOURDOWN=animationExpires;currentDisplay.CHANGE24HOURUNCHANGED=false;currentDisplay.CHANGE24HOURUP=false;}else{currentDisplay.CHANGE24HOURUNCHANGED=animationExpires;currentDisplay.CHANGE24HOURDOWN=false;currentDisplay.CHANGE24HOURUP=false;}
var messageToEmit={};messageToEmit.Raw=messageRaw;messageToEmit.SubKey=subKey;messageToEmit.Obj=currentMessage;messageToEmit.Visual=currentVisual;messageToEmit.Display=currentDisplay;cachedMessages[subKey]=messageToEmit;return messageToEmit;};streamerUtilitiesInstance.emitCurrentMessage=function(messageType,messageRaw){$rootScope.$emit(messageType,streamerUtilitiesInstance.generateCurrentMessage(messageRaw));};streamerUtilitiesInstance.decorateFullVolume=function(prevMessage,newMessage){var currentPrice=prevMessage['DATA']['PRICE'];var fullVol=newMessage['Data']['FULLVOLUME'];var coinSymbol=displayCurrency.getSymbol(prevMessage['SubInfo']['CurrencyTo']);prevMessage['DATA']['FULLVOLUME']=fullVol;prevMessage['DATA']['FULLVOLUMETO']=fullVol*currentPrice;prevMessage['DISPLAY']['FULLVOLUMETO']=utilStatic.convertValueToDisplay(coinSymbol,prevMessage['DATA']['FULLVOLUMETO'],$filter('number'),'short');return prevMessage;};return streamerUtilitiesInstance;}]);angular.module('ccc-app').factory('orderBook',['$rootScope','$filter','$interval',function orderBookFactory($rootScope,$filter,$interval){var displayCurrency=CCC.STATIC.CURRENCY;var utilStatic=CCC.STATIC.UTIL;var orderDisplaySettings=CCC.ORDER.DISPLAY.FIELDS;var orderBookInstance={};var DATA={};var KEYS={};var ORDERSARRAY={};var AGGREGATING=false;orderBookInstance.reset=function(){KEYS={};DATA={};ORDERSARRAY={};};orderBookInstance.initOrderBookKey=function(orderBookKey,seq){if(!seq){seq=0;}
KEYS[orderBookKey]={};KEYS[orderBookKey][CCC.ORDER.SIDE.BID]=[];KEYS[orderBookKey][CCC.ORDER.SIDE.ASK]=[];KEYS[orderBookKey]['SEQUENCE']=parseFloat(seq);KEYS[orderBookKey]['LOADING']=true;if(!KEYS[orderBookKey].hasOwnProperty('QUEUE')){KEYS[orderBookKey]['QUEUE']=[];}
DATA[orderBookKey]={};ORDERSARRAY[orderBookKey]={};ORDERSARRAY[orderBookKey][CCC.ORDER.SIDE.BID]=[];ORDERSARRAY[orderBookKey][CCC.ORDER.SIDE.ASK]=[];};orderBookInstance.resetOrderBookKeepQueue=function(orderBookKey,seq){if(!KEYS.hasOwnProperty(orderBookKey)){KEYS[orderBookKey]={};KEYS[orderBookKey]['QUEUE']=[];}
KEYS[orderBookKey][CCC.ORDER.SIDE.BID]=[];KEYS[orderBookKey][CCC.ORDER.SIDE.ASK]=[];KEYS[orderBookKey]['SEQUENCE']=parseFloat(seq);DATA[orderBookKey]={};ORDERSARRAY[orderBookKey]={};ORDERSARRAY[orderBookKey][CCC.ORDER.SIDE.BID]=[];ORDERSARRAY[orderBookKey][CCC.ORDER.SIDE.ASK]=[];};orderBookInstance.hasOrderBookKey=function(orderBookKey){if(KEYS.hasOwnProperty(orderBookKey)){return true;}
return false;};orderBookInstance.isLoading=function(orderBookKey){return KEYS[orderBookKey]['LOADING'];};orderBookInstance.getTopOrderKeysByLimit=function(orderBookKey,side,max){return KEYS[orderBookKey][side].slice(0,max);};orderBookInstance.getTotalSizeQuantity=function(orderBookKey,side){if(KEYS[orderBookKey]['LOADING']){return"Loading...";}
var currentObArray=ORDERSARRAY[orderBookKey][side];var lastOrderKey=currentObArray.length-1;return currentObArray[lastOrderKey]['DISPLAY']['TOTAL'];};orderBookInstance.getTotalSizeValue=function(orderBookKey,side){if(KEYS[orderBookKey]['LOADING']){return"Loading...";}
var currentObArray=ORDERSARRAY[orderBookKey][side];var lastOrderKey=currentObArray.length-1;return currentObArray[lastOrderKey]['DISPLAY']['QTOTAL'];};orderBookInstance.getTopOrders=function(orderBookKey,side){return ORDERSARRAY[orderBookKey][side];};orderBookInstance.startAggregating=function(){if(AGGREGATING==false){AGGREGATING=true;$interval(function(){for(var orderBookKey in KEYS){orderBookInstance.decorateAggregatedProperties(orderBookKey,CCC.ORDER.SIDE.BID);orderBookInstance.decorateAggregatedProperties(orderBookKey,CCC.ORDER.SIDE.ASK);}},250,0,false);}};orderBookInstance.finishedLoading=function(orderBookKey){KEYS[orderBookKey]['LOADING']=false;orderBookInstance.startAggregating();};orderBookInstance.getSequenceNumber=function(orderBookKey){return KEYS[orderBookKey]['SEQUENCE'];};orderBookInstance.decorateAggregatedProperties=function(orderBookKey,side){var currentOb=KEYS[orderBookKey][side];var obSideLength=currentOb.length;var qtotal=0,total=0;var timestampToCheckAgainst=new Date().getTime()-600;ORDERSARRAY[orderBookKey][side]=[];for(var i=0,len=obSideLength;i<len;i++){var currentItem=DATA[orderBookKey][currentOb[i]];qtotal+=currentItem['QuantityTotal'];total+=currentItem['Q'];currentItem['TOTAL']=total;currentItem['QTOTAL']=qtotal;currentItem['DISPLAY']['TOTAL']=utilStatic.convertValueToDisplay(currentItem['DISPLAY']['FSYM'],total,$filter('number'),'short');currentItem['DISPLAY']['QTOTAL']=utilStatic.convertValueToDisplay(currentItem['DISPLAY']['TSYM'],qtotal,$filter('number'),'short');if(currentItem['HIGHLIGHT']==true&&timestampToCheckAgainst>currentItem['ARRIVEDONTS']){currentItem['HIGHLIGHT']=false;}
ORDERSARRAY[orderBookKey][side].push(currentItem);}};orderBookInstance.decorateDisplayProperties=function(currentOBMessage){var currentDisplay={};for(var property in currentOBMessage){if(orderDisplaySettings[property].Show){switch(orderDisplaySettings[property].Filter){case'Number':if(orderDisplaySettings[property].Symbol=="NONE"){currentDisplay[property]=utilStatic.convertValueToDisplay('',currentOBMessage[property],$filter('number'),'8decimals');}else{var symbolType=orderDisplaySettings[property].Symbol;currentDisplay[property]=utilStatic.convertValueToDisplay(currentDisplay[symbolType],currentOBMessage[property],$filter('number'),'8decimals');}
break;case'Text':currentDisplay[property]=currentOBMessage[property];break;case'CurrencySymbol':currentDisplay[property]=displayCurrency.getSymbol(currentOBMessage[property]);break;case'Market':currentDisplay[property]=utilStatic.getNameForExchange(currentOBMessage[property]);break;}}}
currentOBMessage['QuantityTotal']=currentOBMessage['P']*currentOBMessage['Q'];if(parseInt(currentOBMessage['S'],16)&CCC.ORDER.SIDE.BID){currentDisplay['S']='BID';}else if(parseInt(currentOBMessage['S'],16)&CCC.ORDER.SIDE.ASK){currentDisplay['S']='ASK';}
if(parseInt(currentOBMessage['F'],16)&CCC.ORDER.FLAGS.CHANGE){currentDisplay['F']='CHANGE';currentDisplay['QT']=utilStatic.convertValueToDisplay(currentDisplay['TSYM'],currentOBMessage['QuantityTotal'],$filter('number'),'8decimals');}else if(parseInt(currentOBMessage['F'],16)&CCC.ORDER.FLAGS.REMOVE){currentDisplay['F']='REMOVE';}else if(parseInt(currentOBMessage['F'],16)&CCC.ORDER.FLAGS.ADD){currentDisplay['F']='ADD';currentDisplay['QT']=utilStatic.convertValueToDisplay(currentDisplay['TSYM'],currentOBMessage['QuantityTotal'],$filter('number'),'8decimals');}
currentOBMessage['ARRIVEDONTS']=new Date().getTime();currentOBMessage['HIGHLIGHT']=true;currentOBMessage['DISPLAY']=currentDisplay;}
orderBookInstance.getAllOrderBookKeysWithQueue=function(){var keysWithQueue=[];for(var orderBookKey in KEYS){if(KEYS[orderBookKey]['QUEUE'].length>0){keysWithQueue.push(orderBookKey);}}
return keysWithQueue;};orderBookInstance.getQueueSequanceMissmatchLength=function(orderBookKey){return KEYS[orderBookKey]['QUEUE'].length;};orderBookInstance.queueOrderSequenceMissmatch=function(orderBookKey,orderObject){KEYS[orderBookKey]['QUEUE'].push(orderObject);};orderBookInstance.getQueueItemSequenceMissmatch=function(orderBookKey){if(KEYS[orderBookKey]['QUEUE'].length>0){return KEYS[orderBookKey]['QUEUE'].pop();}
return null;};orderBookInstance.unpack=function(orderBookPacked){var splitPosition=orderBookPacked.indexOf(':');var orderBookKeyAndSeq=orderBookPacked.substring((CCC.STATIC.TYPE.FULLORDERBOOK.length+1),splitPosition);var obkPosition=orderBookKeyAndSeq.indexOf('|');var orderBookKey=orderBookKeyAndSeq.substring(0,obkPosition);var obSequance=orderBookKeyAndSeq.substring(obkPosition+1);var orderBookBothOrderTypes=orderBookPacked.substring(splitPosition+1);var secSplitPosition=orderBookBothOrderTypes.indexOf(':');var bidOrdersArray=orderBookBothOrderTypes.substring(0,secSplitPosition).split(',');var askOrdersArray=orderBookBothOrderTypes.substring(secSplitPosition+1).split(',');orderBookInstance.resetOrderBookKeepQueue(orderBookKey,obSequance);for(var indexOB=0,lengthOB=bidOrdersArray.length;indexOB<lengthOB;indexOB++){var orderObjectBid=CCC.ORDER.unpack(CCC.STATIC.TYPE.ORDERBOOK+'~'+orderBookKey+'~'+CCC.ORDER.SIDE.BID+'~'+CCC.ORDER.FLAGS.ADD+'~'+obSequance+'~'+bidOrdersArray[indexOB]);var objectKeyBid=CCC.ORDER.getObjectKey(orderObjectBid);KEYS[orderBookKey][orderObjectBid.S].push(objectKeyBid);orderBookInstance.decorateDisplayProperties(orderObjectBid);DATA[orderBookKey][objectKeyBid]=orderObjectBid;}
orderBookInstance.decorateAggregatedProperties(orderBookKey,CCC.ORDER.SIDE.BID);for(var indexOA=0,lengthOA=askOrdersArray.length;indexOA<lengthOA;indexOA++){var orderObjectAsk=CCC.ORDER.unpack(CCC.STATIC.TYPE.ORDERBOOK+'~'+orderBookKey+'~'+CCC.ORDER.SIDE.ASK+'~'+CCC.ORDER.FLAGS.ADD+'~'+obSequance+'~'+askOrdersArray[indexOA]);var objectKeyAsk=CCC.ORDER.getObjectKey(orderObjectAsk);KEYS[orderBookKey][orderObjectAsk.S].push(objectKeyAsk);orderBookInstance.decorateDisplayProperties(orderObjectAsk);DATA[orderBookKey][objectKeyAsk]=orderObjectAsk;}
orderBookInstance.decorateAggregatedProperties(orderBookKey,CCC.ORDER.SIDE.ASK);orderBookInstance.finishedLoading(orderBookKey);};orderBookInstance.getKeyFromPacked=function(orderBookPacked){var splitPosition=orderBookPacked.indexOf(':');var orderBookKeyAndSeq=orderBookPacked.substring((CCC.STATIC.TYPE.FULLORDERBOOK.length+1),splitPosition);var obkPosition=orderBookKeyAndSeq.indexOf('|');return orderBookKeyAndSeq.substring(0,obkPosition);};orderBookInstance.handleOrder=function(orderObject){if(orderObject.T!=CCC.STATIC.TYPE.ORDERBOOK){return false;}
var orderBookKey=CCC.ORDER.getOrderBookKey(orderObject);var objectKey=CCC.ORDER.getObjectKey(orderObject);var inserted=false,removed=false,changed=false;if(KEYS[orderBookKey].SEQUENCE>orderObject.SEQ){orderObject.F=CCC.ORDER.FLAGS.NOACTION;return false;}
KEYS[orderBookKey].SEQUENCE=orderObject.SEQ;if(orderObject.F==CCC.ORDER.FLAGS.NOACTION){return false;}
switch(orderObject.F){case CCC.ORDER.FLAGS.ADD:var sideLength=KEYS[orderBookKey][orderObject.S].length;DATA[orderBookKey][objectKey]=orderObject;if(sideLength==0){KEYS[orderBookKey][orderObject.S].push(objectKey);inserted=true;}else{var currentItemKey;var insertPositionBid=0,insertPositionAsk=0;if(orderObject.S==CCC.ORDER.SIDE.BID){while(insertPositionBid<sideLength&&!inserted){currentItemKey=KEYS[orderBookKey][orderObject.S][insertPositionBid];if(orderObject.P>DATA[orderBookKey][currentItemKey].P){KEYS[orderBookKey][orderObject.S].splice(insertPositionBid,0,objectKey);inserted=true;}
insertPositionBid++;}}else{while(insertPositionAsk<sideLength&&!inserted){currentItemKey=KEYS[orderBookKey][orderObject.S][insertPositionAsk];if(orderObject.P<DATA[orderBookKey][currentItemKey].P){KEYS[orderBookKey][orderObject.S].splice(insertPositionAsk,0,objectKey);inserted=true;}
insertPositionAsk++;}}
if(!inserted){KEYS[orderBookKey][orderObject.S].push(objectKey);}}
break;case CCC.ORDER.FLAGS.REMOVE:var sidePosition=KEYS[orderBookKey][orderObject.S].indexOf(objectKey);if(sidePosition>-1){KEYS[orderBookKey][orderObject.S].splice(sidePosition,1);delete DATA[orderBookKey][objectKey];removed=true;}
break;case CCC.ORDER.FLAGS.CHANGE:var orderExists=KEYS[orderBookKey][orderObject.S].indexOf(objectKey);if(orderExists>-1){DATA[orderBookKey][objectKey]=orderObject;changed=true;}
break;}
var action=inserted||removed||changed;return action;};return orderBookInstance;}]);;;;angular.module('ccc-app').controller('StreamingOrderBookCtrl',['$rootScope','$scope','$timeout','$stateParams','$filter','$interval','subscriptionManager','streamerUtilities','pageInfo','dateParsing','chartUtil',function($rootScope,$scope,$timeout,$stateParams,$filter,$interval,subscriptionManager,streamerUtilities,pageInfo,dateParsing,chartUtil){$scope.dateParsing=dateParsing;$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();$scope.markets=[];$scope.marketDepthStats={RAW:{bid:0,ask:0,worstBid:0,worstAsk:0,mid:0,spread:0},DISPLAY:{bid:0,ask:0,worstBid:0,worstAsk:0,mid:0,spread:0}};$scope.chartIsLoading=true;$scope.startIndex=0;$scope.endIndex=0;$scope.lastIndex=0;$scope.currentObKey="";$scope.toSymbol=subscriptionManager.getCurrentToSymbol();$scope.toSymbolDisplay=CCC.STATIC.CURRENCY.getSymbol($scope.toSymbol);$scope.fromSymbol=pageInfo.getSymbol()||pageInfo.getH1Text();$scope.fromSymbolDisplay=CCC.STATIC.CURRENCY.getSymbol($scope.fromSymbol);$scope.generateMarketsFromSubs=function(subs){$scope.markets=[];$scope.exchangeAlreadyExists={};for(var i=0,length=subs.length;i<length;i++){var currentSubDetails=CCC.ORDER.unpack(subs[i]);var subToPush={'Market':subscriptionManager.getNameForExchange(currentSubDetails.M),'IsStreaming':true,'SubKey':subs[i]};var obKey=CCC.ORDER.getOrderBookKey(currentSubDetails);$scope.connection.orderbook.initOrderBookKey(obKey,-1);$scope.currentObKey=obKey;if(!$scope.exchangeAlreadyExists.hasOwnProperty(currentSubDetails.M)){$scope.markets.push(subToPush);$scope.exchangeAlreadyExists[currentSubDetails.M]=true;}}};$scope.reconnectAll=function(symbol){$scope.connection.subs=subscriptionManager.getComputedOrderBookSubsBySymbol(symbol);$scope.exchanges=$scope.generateMarketsFromSubs($scope.connection.subs);streamerUtilities.addGlobalPageSubs($scope.connection.subs);};if($stateParams.hasOwnProperty("Symbol")&&subscriptionManager.getComputedOrderBookSubsObj().hasOwnProperty($stateParams.Symbol.toUpperCase())){if($scope.connection.connected){$scope.reconnectAll($stateParams.Symbol.toUpperCase());}else{$scope.connection.subs=subscriptionManager.getComputedOrderBookSubsBySymbol($stateParams.Symbol.toUpperCase());$scope.exchanges=$scope.generateMarketsFromSubs($scope.connection.subs);}}else{$scope.connection.subs=subscriptionManager.getComputedOrderBookSubs();$scope.exchanges=$scope.generateMarketsFromSubs($scope.connection.subs);if($scope.connection.connected){streamerUtilities.addGlobalPageSubs($scope.connection.subs);}}
$scope.disconnectAll=function(changingView){streamerUtilities.removeGlobalPageSubs($scope.connection.subs);$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();if(changingView){$scope.changeCurrency();$scope.changeView();$scope.socketConnected();$scope.orderBookMessage();$scope.fullBookMessage();}};$scope.selectAllStreamingMarkets=function(){var someExchangesNotStreaming=false;var tempSubs=[];for(var i=0,length=$scope.markets.length;i<length;i++){if(!$scope.markets[i].IsStreaming){$scope.markets[i].IsStreaming=true;someExchangesNotStreaming=true;}
tempSubs.push($scope.markets[i].SubKey);};if(someExchangesNotStreaming){$scope.connection.subs=tempSubs;streamerUtilities.addGlobalPageSubs($scope.connection.subs);}};$scope.deselectAllStreamingMarkets=function(){var someExchangesStreaming=false;for(var i=0,length=$scope.markets.length;i<length;i++){if($scope.markets[i].IsStreaming){$scope.markets[i].IsStreaming=false;someExchangesStreaming=true;}};if(someExchangesStreaming){streamerUtilities.removeGlobalPageSubs($scope.connection.subs);$scope.connection.orderBookData={};$scope.connection.subs=[];}};$scope.changeMarketStreamingStatus=function(id){$scope.markets[id].IsStreaming=!$scope.markets[id].IsStreaming;streamerUtilities.removeGlobalPageSubs($scope.connection.subs);var tempSubs=[];for(var i=0,length=$scope.markets.length;i<length;i++){if($scope.markets[i].IsStreaming){tempSubs.push($scope.markets[i].SubKey);}};if(!$scope.markets[id].IsStreaming){$scope.connection.orderBookData={};}
$scope.connection.subs=tempSubs;streamerUtilities.addGlobalPageSubs($scope.connection.subs);};$scope.changeCurrency=$rootScope.$on('ChangeCurrency',function(event,symbol){$scope.disconnectAll(false);$scope.reconnectAll(symbol);$scope.toSymbol=symbol;$scope.toSymbolDisplay=CCC.STATIC.CURRENCY.getSymbol($scope.toSymbol);});$scope.changeView=$rootScope.$on('ChangeView',function(event,viewChangeParams){$scope.disconnectAll(true);});$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;$scope.progressBar.current++;$scope.progressBar.message='Loading data...';streamerUtilities.addGlobalPageSubs($scope.connection.subs);});$scope.parseMessage=function(messageInfo){if($scope.connection.subs.indexOf(messageInfo.SubKey)>-1){if(messageInfo.SubKey!=messageInfo.Raw){var orderBookKey=messageInfo.OrderBookKey;if($scope.connection.orderbook.isLoading(orderBookKey)){$scope.connection.orderbook.queueOrderSequenceMissmatch(orderBookKey,messageInfo.Obj);}else{$scope.connection.orderbook.handleOrder(messageInfo.Obj);}}}};$scope.processQueueOfOrders=function(orderBookKey){var lengthOfQueue=$scope.connection.orderbook.getQueueSequanceMissmatchLength(orderBookKey);if(lengthOfQueue>0){for(var i=0;i<lengthOfQueue;i++){var currentQueueItem=$scope.connection.orderbook.getQueueItemSequenceMissmatch(orderBookKey);if(currentQueueItem!=null){$scope.connection.orderbook.handleOrder(currentQueueItem);}}}}
$scope.orderBookMessage=$rootScope.$on('OrderBookMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});$scope.fullBookMessage=$rootScope.$on('FullOrderBookMessage',function(event,messageInfo){if($scope.connection.subs.indexOf(messageInfo.SubKey)>-1){$scope.connection.loadingData=false;$scope.connection.orderbook.unpack(messageInfo.Raw);$scope.processQueueOfOrders(messageInfo.OrderBookKey);$scope.generateChart();$scope.calculatePrice();$scope.startIntervalGenerateChart();}});$scope.getTotalBidSizeQuantity=function(){if($scope.currentObKey==""){return"";}
return $scope.connection.orderbook.getTotalSizeQuantity($scope.currentObKey,CCC.ORDER.SIDE.BID);}
$scope.getTotalBidSizeValue=function(){if($scope.currentObKey==""){return"";}
return $scope.connection.orderbook.getTotalSizeValue($scope.currentObKey,CCC.ORDER.SIDE.BID);}
$scope.getTotalAskSizeQuantity=function(){if($scope.currentObKey==""){return"";}
return $scope.connection.orderbook.getTotalSizeQuantity($scope.currentObKey,CCC.ORDER.SIDE.ASK);}
$scope.getTotalAskSizeValue=function(){if($scope.currentObKey==""){return"";}
return $scope.connection.orderbook.getTotalSizeValue($scope.currentObKey,CCC.ORDER.SIDE.ASK);}
$scope.getTopBidOrders=function(){if($scope.currentObKey==""){return"";}
return $scope.connection.orderbook.getTopOrders($scope.currentObKey,CCC.ORDER.SIDE.BID);};$scope.getTopAskOrders=function(){if($scope.currentObKey==""){return"";}
return $scope.connection.orderbook.getTopOrders($scope.currentObKey,CCC.ORDER.SIDE.ASK);};$scope.generateChartDataProvider=function(){var bid=$scope.connection.orderbook.getTopOrders($scope.currentObKey,CCC.ORDER.SIDE.BID);var ask=$scope.connection.orderbook.getTopOrders($scope.currentObKey,CCC.ORDER.SIDE.ASK);var tempBidData=[];var sumBid=0;var sumTotalBid=0;var maxLength=500;var topBid=0;var topAsk=0;var worstBid=0;var worstAsk=0;var lengthBid=Math.min(maxLength,bid.length);if(lengthBid>0){topBid=bid[0].P;worstBid=bid[lengthBid-1].P;}
var lengthAsk=Math.min(maxLength,ask.length);if(lengthAsk>0){topAsk=ask[0].P;worstAsk=ask[lengthAsk-1].P;}
var mid=(topAsk-topBid)/2+topBid;var range=Math.min(mid-worstBid,worstAsk-mid);var stepFrequency=50;var step=(topBid-range)/stepFrequency;var lastIndex=0;var currentBucket={price:0,vol:0,currentvol:0,total:0};for(var i=0;i<stepFrequency;++i){currentBucket.price=topBid-i*step;currentBucket.currentvol=0;var start=lastIndex;for(var j=start;j<bid.length;++j){var currentBid=bid[j];var priceLimit=currentBucket.price-step;if(currentBid.P>priceLimit){currentBucket.vol+=currentBid.Q;currentBucket.currentvol+=currentBid.Q;currentBucket.total+=currentBid.Q*currentBid.P;}else{lastIndex=j;break;}}
tempBidData.push({price:chartUtil.convertValueForChart(currentBucket.price),bid:chartUtil.convertValueForChart(currentBucket.vol),currentbid:chartUtil.convertValueForChart(currentBucket.currentvol),avg:chartUtil.convertValueForChart(currentBucket.total/currentBucket.vol)});}
tempBidData.reverse();var dataProvider=[];for(var i=0;i<tempBidData.length;++i){dataProvider.push(tempBidData[i]);}
var step=(topAsk+range)/stepFrequency;var lastIndex=0;var currentBucket={price:0,vol:0,currentvol:0,total:0};for(var i=0;i<stepFrequency;++i){currentBucket.price=topAsk+i*step;currentBucket.currentvol=0;var start=lastIndex;for(var j=start;j<ask.length;++j){var currentAsk=ask[j];var priceLimit=currentBucket.price+step;if(currentAsk.P<priceLimit){currentBucket.vol+=currentAsk.Q;currentBucket.currentvol+=currentAsk.Q;currentBucket.total+=currentAsk.Q*currentAsk.P;}else{lastIndex=j;break;}}
dataProvider.push({price:chartUtil.convertValueForChart(currentBucket.price),ask:chartUtil.convertValueForChart(currentBucket.vol),currentask:chartUtil.convertValueForChart(currentBucket.currentvol),avg:chartUtil.convertValueForChart(currentBucket.total/currentBucket.vol)});}
$scope.marketDepthStats={RAW:{bid:0,ask:0,worstBid:0,worstAsk:0,mid:0,spread:0},DISPLAY:{bid:0,ask:0,worstBid:0,worstAsk:0,mid:0,spread:0}};$scope.marketDepthStats.RAW.bid=topBid;$scope.marketDepthStats.RAW.ask=topAsk;$scope.marketDepthStats.RAW.mid=(topAsk-topBid)/2+topBid;$scope.marketDepthStats.RAW.worstBid=worstBid;$scope.marketDepthStats.RAW.worstAsk=worstAsk;$scope.marketDepthStats.RAW.spread=topAsk-topBid;$scope.marketDepthStats.DISPLAY.bid=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,topBid);$scope.marketDepthStats.DISPLAY.ask=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,topAsk);$scope.marketDepthStats.DISPLAY.mid=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,(topAsk-topBid)/2+topBid);$scope.marketDepthStats.DISPLAY.worstBid=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,worstBid);$scope.marketDepthStats.DISPLAY.worstAsk=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,worstAsk);$scope.marketDepthStats.DISPLAY.spread=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,topAsk-topBid);$scope.lastIndex=dataProvider.length-1;var currentZoomLevel=$scope.chartZoomLevels[$scope.currentZoomIndex];$scope.startIndex=Math.floor(currentZoomLevel.startFactor*$scope.lastIndex);$scope.endIndex=Math.floor(currentZoomLevel.endFactor*$scope.lastIndex);return dataProvider;};$scope.calculatorCurrencies=[$scope.toSymbol,$scope.fromSymbol];$scope.orderTypes=[{name:"BUY",orderbookSide:"ask"},{name:"SELL",orderbookSide:"bid"}];$scope.priceCalculator={order:{name:"BUY",orderbookSide:"ask"},amount:10,currency:$scope.fromSymbol,exchange:"Poloniex",avgPrice:0,midPrice:0,impact:0,impactPercent:0,totalFrom:0,totalTo:0};$scope.calculatePrice=function(){var targetAmount=$scope.priceCalculator.amount;if(targetAmount<=0){$scope.priceCalculator.avgPrice=0;$scope.priceCalculator.totalFrom=0;$scope.priceCalculator.totalTo=0;$scope.priceCalculator.midPrice=0;$scope.priceCalculator.impact=0;$scope.priceCalculator.impactPercent=0;$scope.priceCalculator.avgPriceDisplay=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,$scope.priceCalculator.avgPrice);$scope.priceCalculator.totalFromDisplay=chartUtil.convertValueToDisplay($scope.fromSymbolDisplay,$scope.priceCalculator.totalFrom);$scope.priceCalculator.totalToDisplay=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,$scope.priceCalculator.totalTo);$scope.priceCalculator.midPriceDisplay=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,$scope.priceCalculator.midPrice);$scope.priceCalculator.impactDisplay=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,$scope.priceCalculator.impact);$scope.priceCalculator.impactPercentDisplay=chartUtil.convertValueToDisplay("",$scope.priceCalculator.impactPercent)+'%';return;}
var orders=[];if($scope.priceCalculator.order.orderbookSide==="ask"){orders=$scope.connection.orderbook.getTopOrders($scope.currentObKey,CCC.ORDER.SIDE.ASK);var bid=$scope.connection.orderbook.getTopOrders($scope.currentObKey,CCC.ORDER.SIDE.BID);if(orders.length<1){return;}
$scope.priceCalculator.midPrice=(orders[0].P-bid[0].P)/2+bid[0].P;}else if($scope.priceCalculator.order.orderbookSide==="bid"){orders=$scope.connection.orderbook.getTopOrders($scope.currentObKey,CCC.ORDER.SIDE.BID);var ask=$scope.connection.orderbook.getTopOrders($scope.currentObKey,CCC.ORDER.SIDE.ASK);$scope.priceCalculator.midPrice=(ask[0].P-orders[0].P)/2+ask[0].P;if(orders.length<1){return;}}else{return;}
var isToSymbol=($scope.priceCalculator.currency===$scope.toSymbol)?true:false;var sum={toVolume:0,fromVolume:0};for(var i=0;i<orders.length;++i){var currentOrder=orders[i];var volToCompare=isToSymbol?(currentOrder.Q*currentOrder.P):currentOrder.Q;var currentVol=isToSymbol?sum.toVolume:sum.fromVolume;if((currentVol+volToCompare)>targetAmount){var diff=targetAmount-currentVol;sum.fromVolume+=isToSymbol?(diff/currentOrder.P):diff;sum.toVolume+=isToSymbol?diff:diff*currentOrder.P;$scope.priceCalculator.impact=currentOrder.P-$scope.priceCalculator.midPrice;$scope.priceCalculator.impactPercent=(currentOrder.P-$scope.priceCalculator.midPrice)/$scope.priceCalculator.midPrice*100;break;}else{sum.fromVolume+=currentOrder.Q;sum.toVolume+=currentOrder.Q*currentOrder.P;}}
$scope.priceCalculator.avgPrice=sum.toVolume/sum.fromVolume;$scope.priceCalculator.totalFrom=sum.fromVolume;$scope.priceCalculator.totalTo=$scope.toSymbolDisplay,sum.toVolume;$scope.priceCalculator.avgPriceDisplay=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,sum.toVolume/sum.fromVolume);$scope.priceCalculator.totalFromDisplay=chartUtil.convertValueToDisplay($scope.fromSymbolDisplay,sum.fromVolume);$scope.priceCalculator.totalToDisplay=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,sum.toVolume);$scope.priceCalculator.midPriceDisplay=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,$scope.priceCalculator.midPrice);$scope.priceCalculator.impactDisplay=chartUtil.convertValueToDisplay($scope.toSymbolDisplay,$scope.priceCalculator.impact);$scope.priceCalculator.impactPercentDisplay=chartUtil.convertValueToDisplay("",$scope.priceCalculator.impactPercent)+'%';};$scope.generateChart=function(){var green=CCC.STATIC.UTIL.chartColors.Green.Hex;var blue=CCC.STATIC.UTIL.chartColors.DarkBlue.Hex;var red=CCC.STATIC.UTIL.chartColors.LighRed.Hex;$scope.chartMarketDepth={};$scope.chartIsLoading=true;var dataProvider=$scope.generateChartDataProvider();endIndex=dataProvider.length-1;$scope.chartMarketDepth=AmCharts.makeChart("market-depth-chart",{type:"serial",marginTop:40,marginBottom:50,pathToImages:"/images/",dataProvider:dataProvider,categoryField:"price",zoomOutText:"",balloon:{adjustBorderColor:false,horizontalPadding:10,verticalPadding:8,color:"#ffffff",borderThickness:2,enabled:true},title:"Order book",percentHeight:70,valueAxes:[{id:"y1",axisAlpha:0,position:"left",gridAlpha:0},{id:"y2",axisAlpha:0,position:"right",gridAlpha:0}],graphs:[{id:"g1",valueAxis:"y1",balloonText:"Bid: "+$scope.toSymbolDisplay+"[[category]]<br>Volume ("+$scope.fromSymbol+"): [[currentbid]]<br>Total Volume ("+$scope.fromSymbol+"): [[value]]<br><b><span style='font-size:14px;'>Average Price: "+$scope.toSymbolDisplay+"[[avg]]</span></b>",lineColor:green,lineThickness:2,valueField:"bid",fillAlphas:0.1,type:"step"},{id:"g2",valueAxis:"y1",balloonText:"Ask: "+$scope.toSymbolDisplay+"[[category]]<br>Volume ("+$scope.fromSymbol+"): [[currentask]]<br>Total Volume ("+$scope.fromSymbol+"): [[value]]<br><b><span style='font-size:14px;'>Average Price: "+$scope.toSymbolDisplay+"[[avg]]</span></b>",lineColor:red,lineThickness:2,valueField:"ask",fillAlphas:0.1,type:"step"},{id:"g3",valueAxis:"y2",showBalloon:false,color:"#d1d3dc",lineColor:"#d1d3dc",columnWidth:1,columnSpacing:0,valueField:"currentbid",fillAlphas:0.5,lineAlpha:0.5,type:"column"},{id:"g4",valueAxis:"y2",showBalloon:false,color:"#d1d3dc",lineColor:"#d1d3dc",columnWidth:1,columnSpacing:0,valueField:"currentask",fillAlphas:0.5,lineAlpha:0.5,type:"column"}],categoryAxis:{axisAlpha:1,gridAlpha:0,autoGridCount:false,gridCount:5},export:{enabled:false},chartCursor:{balloonPointerOrientation:"top",cursorAlpha:1,valueLineAlpha:1,categoryBalloonEnabled:true,zoomable:false,},listeners:[{event:"rendered",method:function(e){$scope.chartIsLoading=false;}},{event:"dataUpdated",method:function(e){if($scope.chartMarketDepth.hasOwnProperty('dataProvider')){if($scope.chartMarketDepth.dataProvider.length>0){$scope.chartMarketDepth.zoomToIndexes($scope.startIndex,$scope.endIndex);}}}}]});};$scope.updateChart=function(){if(Object.keys($scope.chartMarketDepth).length==0){generateChart();}else{var dataProvider=$scope.generateChartDataProvider();var length=dataProvider.length;if(length<1){return;}
$scope.chartMarketDepth.dataProvider=dataProvider;$scope.chartMarketDepth.validateData();}
$scope.calculatePrice();};$scope.promise;$scope.startIntervalGenerateChart=function(){$scope.stopIntervalGenerateChart();$scope.promise=$interval($scope.updateChart,5000);};$scope.stopIntervalGenerateChart=function(){$interval.cancel($scope.promise);};$scope.switchCurrency=function(){if($scope.priceCalculator.currency===$scope.toSymbol){$scope.priceCalculator.currency=$scope.fromSymbol;}else{$scope.priceCalculator.currency=$scope.toSymbol}};$scope.chooseOrderType=function(type){if(type==="BUY"){$scope.priceCalculator.order={name:"BUY",orderbookSide:"ask"};}else if(type==="SELL"){$scope.priceCalculator.order={name:"SELL",orderbookSide:"bid"};}else{return;}};$scope.chartZoomLevels=[{startFactor:0,endFactor:1},{startFactor:0.25,endFactor:0.75},{startFactor:0.35,endFactor:0.65},{startFactor:0.45,endFactor:0.55}];$scope.currentZoomIndex=0;$scope.zoomIn=function(){$scope.currentZoomIndex=Math.min($scope.chartZoomLevels.length-1,$scope.currentZoomIndex+1);$scope.zoomToCurrentLevel();}
$scope.zoomOut=function(){$scope.currentZoomIndex=Math.max(0,$scope.currentZoomIndex-1);$scope.zoomToCurrentLevel();}
$scope.zoomToCurrentLevel=function(){var currentZoomLevel=$scope.chartZoomLevels[$scope.currentZoomIndex];$scope.startIndex=Math.floor(currentZoomLevel.startFactor*$scope.lastIndex);$scope.endIndex=Math.floor(currentZoomLevel.endFactor*$scope.lastIndex);$scope.chartMarketDepth.zoomToIndexes($scope.startIndex,$scope.endIndex);}}]);angular.module('ccc-app').controller('StreamingCurrentSubsCtrl',['$rootScope','$scope','$timeout','$stateParams','$filter','subscriptionManager','streamerUtilities','dateParsing','pageInfo',function($rootScope,$scope,$timeout,$stateParams,$filter,subscriptionManager,streamerUtilities,dateParsing,pageInfo){$scope.dateParsing=dateParsing;$scope.hasValidData=false;$scope.showOldData=false;$scope.secondsForInvlidData=7*24*60*60;$scope.pageInfo=pageInfo;$scope.toCurrency="";$scope.currentLimit=$scope.limit||0;$scope.leftToShow=0;$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();$scope.ordering=streamerUtilities.initOrdering();$scope.isStreaming=streamerUtilities.getStreamingStatus();$scope.showAllCurrencies=function(){$scope.currentLimit=0;$scope.recalculateLimit();}
$scope.recalculateLimit=function(){if($scope.currentLimit>0&&$scope.connection.subs.length>$scope.currentLimit){$scope.leftToShow=$scope.connection.subs.length-$scope.currentLimit-1;}else{$scope.leftToShow=0;}}
$scope.parseMessage=function(messageInfo){var subKey=messageInfo.SubKey;if($scope.connection.subs.indexOf(subKey)>-1){if(subKey==messageInfo.Raw){$scope.progressBar.current++;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;if(!$scope.hasValidData){$scope.showOldData=true;}}}else{var messageObject=messageInfo.Obj;var arrayKey=0;if(!$scope.hasValidData&&messageObject.LASTUPDATE>dateParsing.unixTimestamp($scope.secondsForInvlidData)){$scope.hasValidData=true;}
if($scope.connection.keyToPosition[subKey]!=0){arrayKey=$scope.connection.keyToPosition[subKey]||$scope.connection.data.length;}
$scope.connection.data[arrayKey]=streamerUtilities.decorateCurrent($scope.connection.data[arrayKey],messageInfo);$scope.connection.totalvolume24hour=$scope.connection.data.reduce(function(a,b){return{DATA:{VOLUME24HOUR:a.DATA.VOLUME24HOUR+b.DATA.VOLUME24HOUR}};}).DATA.VOLUME24HOUR;$scope.connection.totalvolume24hourdisplay=CCC.STATIC.UTIL.convertValueToDisplay($scope.connection.data[arrayKey].DISPLAY.FROMSYMBOL,$scope.connection.totalvolume24hour,$filter('number'));$scope.connection.totalvolume24hourto=$scope.connection.data.reduce(function(a,b){return{DATA:{VOLUME24HOURTO:a.DATA.VOLUME24HOURTO+b.DATA.VOLUME24HOURTO}};}).DATA.VOLUME24HOURTO;$scope.connection.totalvolume24hourtodisplay=CCC.STATIC.UTIL.convertValueToDisplay($scope.connection.data[arrayKey].DISPLAY.TOSYMBOL,$scope.connection.totalvolume24hourto,$filter('number'));if($scope.connection.loadingData){$scope.connection.keyToPosition[subKey]=arrayKey;$scope.connection.data[arrayKey]['VISUAL']={};$scope.progressBar.current++;$scope.progressBar.message=messageObject.MARKET+':'+messageObject.FROMSYMBOL+'/'+messageObject.TOSYMBOL;if($scope.progressBar.current>=$scope.progressBar.max){$scope.connection.loadingData=false;if(!$scope.hasValidData){$scope.showOldData=true;}
if($scope.connection.data.length>1){$scope.sortKeys("VOLUME24HOURTO");}}}else{$scope.connection.data[arrayKey].timeout=$timeout(function(){$scope.handleTimeout(subKey);},1500,false);if($scope.isSortRequired(arrayKey)){$scope.sortAndSaveOrder();}}}}};$scope.reconnectAll=function(symbol){$scope.connection.subs=subscriptionManager.getCurrentSubsByToSymbol(symbol);$scope.progressBar.max=$scope.connection.subs.length+2;$scope.recalculateLimit();streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});};$scope.toggleOldData=function(){if($scope.showOldData){$scope.showOldData=false;}else{$scope.showOldData=true;}};$scope.stopStratStreaming=function(){if(streamerUtilities.getStreamingStatus()){streamerUtilities.stopStreaming();}else{streamerUtilities.startStreaming();}
$scope.isStreaming=streamerUtilities.getStreamingStatus();};$scope.disconnectAll=function(changingView){streamerUtilities.removeGlobalPageSubs($scope.connection.subs);if(changingView){$scope.changeCurrency();$scope.changeView();$scope.socketConnected();$scope.currentMessage();}else{$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();$scope.ordering=streamerUtilities.initOrdering();}};$scope.changeCurrency=$rootScope.$on('ChangeCurrency',function(event,symbol){$scope.currentLimit=$scope.limit||0;$scope.disconnectAll(false);$scope.reconnectAll(symbol);$scope.toCurrency=symbol;});$scope.changeView=$rootScope.$on('ChangeView',function(event,viewChangeParams){$scope.disconnectAll(true);$scope.currentLimit=$scope.limit||0;});$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;if(!$scope.connection.monitorPreLoaded){$scope.progressBar.current++;$scope.progressBar.message='Loading data...';$scope.recalculateLimit();streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});}});$scope.currentMessage=$rootScope.$on('CurrentMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});$scope.subAdd=function(sub){if($scope.connection.subs.indexOf(sub)>-1)
return;$scope.connection.subs.unshift(sub);streamerUtilities.addGlobalPageSubs([sub],function(messageInfo){$scope.parseMessage(messageInfo);});};$scope.subRemove=function(sub){var index=$scope.connection.subs.indexOf(sub);if(index>-1){streamerUtilities.removeGlobalPageSubs([sub]);$scope.connection.subs.splice(index,1);$scope.connection.data.splice($scope.connection.keyToPosition[sub],1);delete $scope.connection.keyToPosition[sub];}};$scope.handleTimeout=function(subKey){var arrayKeyToTimeout=$scope.connection.keyToPosition[subKey];if(arrayKeyToTimeout||arrayKeyToTimeout==0){var visual=$scope.connection.data[arrayKeyToTimeout]['VISUAL'];var dateNow=new Date();for(var property in visual){if(visual[property]!=false&&dateNow>=visual[property])
{visual[property]=false;}}
$scope.connection.data[arrayKeyToTimeout]['VISUAL']=visual;}};$scope.isSortRequired=function(arrayKey){var arrayData=$scope.connection.data;var arrayDataLength=arrayData.length;var isAscendingLocal=$scope.ordering.isAscending;var sortingFieldLocal=$scope.ordering.sortingField;if(arrayKey!=0){if(isAscendingLocal){if(arrayData[arrayKey-1].DATA[sortingFieldLocal]>arrayData[arrayKey].DATA[sortingFieldLocal]){return true;}}else{if(arrayData[arrayKey-1].DATA[sortingFieldLocal]<arrayData[arrayKey].DATA[sortingFieldLocal]){return true;}}}
if(arrayKey!=arrayDataLength-1){if(isAscendingLocal){if(arrayData[arrayKey+1].DATA[sortingFieldLocal]<arrayData[arrayKey].DATA[sortingFieldLocal]){return true;}}else{if(arrayData[arrayKey+1].DATA[sortingFieldLocal]>arrayData[arrayKey].DATA[sortingFieldLocal]){return true;}}}
return false;};$scope.sortKeys=function(sortingField){if($scope.ordering.sortingField==sortingField){if($scope.ordering.isAscending){$scope.ordering.isAscending=false;}else{$scope.ordering.isAscending=true;}}else{$scope.ordering.sortingField=sortingField;}
$scope.sortAndSaveOrder();};$scope.sortAndSaveOrder=function(){var sortingFieldLocal=$scope.ordering.sortingField;var arrayData=$scope.connection.data;var arrayDataLength=arrayData.length;if(arrayDataLength<2){return false;}
if($scope.ordering.isAscending){arrayData.sort(function(a,b){if(a.DATA[sortingFieldLocal]>b.DATA[sortingFieldLocal]){return 1;}
if(a.DATA[sortingFieldLocal]<b.DATA[sortingFieldLocal]){return-1;}
if(a.DATA['LASTUPDATE']>b.DATA['LASTUPDATE']){return 1;}
if(a.DATA['LASTUPDATE']<b.DATA['LASTUPDATE']){return-1;}
return 0;});}else{arrayData.sort(function(a,b){if(a.DATA[sortingFieldLocal]>b.DATA[sortingFieldLocal]){return-1;}
if(a.DATA[sortingFieldLocal]<b.DATA[sortingFieldLocal]){return 1;}
if(a.DATA['LASTUPDATE']>b.DATA['LASTUPDATE']){return-1;}
if(a.DATA['LASTUPDATE']<b.DATA['LASTUPDATE']){return 1;}
return 0;});}
$scope.connection.keyToPosition={};for(var i=0;i<arrayData.length;i++){$scope.connection.keyToPosition[arrayData[i].SUBKEY]=i;};};if($stateParams.hasOwnProperty("Symbol")&&subscriptionManager.getCurrentSubsObj().hasOwnProperty($stateParams.Symbol.toUpperCase())){$scope.toCurrency=$stateParams.Symbol.toUpperCase();if($scope.connection.connected){$scope.reconnectAll($stateParams.Symbol.toUpperCase());}else{$scope.connection.subs=subscriptionManager.getCurrentSubsByToSymbol($stateParams.Symbol.toUpperCase());$scope.progressBar.max=$scope.connection.subs.length+2;if($scope.connection.monitorPreLoaded){$scope.progressBar.current++;streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});$scope.recalculateLimit();}}}else{$scope.connection.subs=subscriptionManager.getTopCurrentSubs();$scope.toCurrency=subscriptionManager.getCurrentToSymbol();$scope.progressBar.max=$scope.connection.subs.length+2;if($scope.connection.connected||$scope.connection.monitorPreLoaded){$scope.progressBar.current++;streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});$scope.recalculateLimit();}}}]);angular.module('ccc-app').controller('StreamingAGGSubsCtrl',['$rootScope','$scope','$timeout','$stateParams','$filter','pageInfo','subscriptionManager','streamerUtilities',function($rootScope,$scope,$timeout,$stateParams,$filter,pageInfo,subscriptionManager,streamerUtilities){$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();$scope.ordering=streamerUtilities.initOrdering();$scope.isStreaming=streamerUtilities.getStreamingStatus();$scope.currentAGGSubsObj=subscriptionManager.getCurrentAGGSubsObj();$scope.toSymbol=subscriptionManager.getCurrentToSymbol();$scope.fromSymbol=pageInfo.getSymbol();$scope.fullPageTitle=pageInfo.getH1Text();$scope.tempSubs=[];for(var i in $scope.currentAGGSubsObj){$scope.tempSubs.push($scope.currentAGGSubsObj[i]);};$scope.parseMessage=function(messageInfo){var subKey=messageInfo.SubKey;if($scope.connection.subs.indexOf(subKey)>-1){if(subKey==messageInfo.Raw){$scope.progressBar.current++;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;}}else{var messageObject=messageInfo.Obj;var arrayKey=0;if($scope.connection.keyToPosition[subKey]!=0){arrayKey=$scope.connection.keyToPosition[subKey]||$scope.connection.data.length;}
$scope.connection.data[arrayKey]=streamerUtilities.decorateCurrent($scope.connection.data[arrayKey],messageInfo);$scope.connection.totalvolume24hour=$scope.connection.data.reduce(function(a,b){return{DATA:{VOLUME24HOUR:a.DATA.VOLUME24HOUR+b.DATA.VOLUME24HOUR}};}).DATA.VOLUME24HOUR;$scope.connection.totalvolume24hourdisplay=CCC.STATIC.UTIL.convertValueToDisplay($scope.connection.data[arrayKey].DISPLAY.FROMSYMBOL,$scope.connection.totalvolume24hour,$filter('number'));if($scope.connection.loadingData){$scope.connection.keyToPosition[subKey]=arrayKey;$scope.connection.data[arrayKey]['VISUAL']={};$scope.progressBar.current++;$scope.progressBar.message=messageObject.MARKET+':'+messageObject.FROMSYMBOL+'/'+messageObject.TOSYMBOL;if($scope.progressBar.current>=$scope.progressBar.max){$scope.connection.loadingData=false;if($scope.connection.data.length>1){$scope.sortKeys("VOLUME24HOUR");}}}else{$scope.connection.data[arrayKey].timeout=$timeout(function(){$scope.handleTimeout(subKey);},1500,false);if($scope.isSortRequired(arrayKey)){$scope.sortAndSaveOrder();}}}}};$scope.connectAll=function(){$scope.connection=streamerUtilities.initConnection();$scope.connection.subs=$scope.tempSubs;$scope.progressBar.max=$scope.connection.subs.length+2;streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});};$scope.disconnectAll=function(){streamerUtilities.removeGlobalPageSubs($scope.connection.subs);$scope.socketConnected();$scope.currentAggMessage();$scope.changeCurrency();$scope.changeView();};$scope.changeCurrency=$rootScope.$on('ChangeCurrency',function(event,symbol){if($scope.toSymbol==symbol){return;}
$scope.toSymbol=symbol;});$scope.changeView=$rootScope.$on('ChangeView',function(event,viewChangeParams){$scope.disconnectAll();});$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){if(!$scope.connection.aggPreLoaded){$scope.progressBar.current++;$scope.connectAll();}});$scope.currentAggMessage=$rootScope.$on('CurrentAggMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});$scope.handleTimeout=function(subKey){var arrayKeyToTimeout=$scope.connection.keyToPosition[subKey];if(arrayKeyToTimeout||arrayKeyToTimeout==0){var visual=$scope.connection.data[arrayKeyToTimeout]['VISUAL'];var dateNow=new Date();for(var property in visual){if(visual[property]!=false&&dateNow>=visual[property])
{visual[property]=false;}}
$scope.connection.data[arrayKeyToTimeout]['VISUAL']=visual;}};$scope.isSortRequired=function(arrayKey){var arrayData=$scope.connection.data;var arrayDataLength=arrayData.length;var isAscendingLocal=$scope.ordering.isAscending;var sortingFieldLocal=$scope.ordering.sortingField;if(arrayKey!=0){if(isAscendingLocal){if(arrayData[arrayKey-1].DATA[sortingFieldLocal]>arrayData[arrayKey].DATA[sortingFieldLocal]){return true;}}else{if(arrayData[arrayKey-1].DATA[sortingFieldLocal]<arrayData[arrayKey].DATA[sortingFieldLocal]){return true;}}}
if(arrayKey!=arrayDataLength-1){if(isAscendingLocal){if(arrayData[arrayKey+1].DATA[sortingFieldLocal]<arrayData[arrayKey].DATA[sortingFieldLocal]){return true;}}else{if(arrayData[arrayKey+1].DATA[sortingFieldLocal]>arrayData[arrayKey].DATA[sortingFieldLocal]){return true;}}}
return false;};$scope.sortKeys=function(sortingField){if($scope.ordering.sortingField==sortingField){if($scope.ordering.isAscending){$scope.ordering.isAscending=false;}else{$scope.ordering.isAscending=true;}}else{$scope.ordering.sortingField=sortingField;}
$scope.sortAndSaveOrder();};$scope.sortAndSaveOrder=function(){var sortingFieldLocal=$scope.ordering.sortingField;var arrayData=$scope.connection.data;var arrayDataLength=arrayData.length;if(arrayDataLength<2){return false;}
if($scope.ordering.isAscending){arrayData.sort(function(a,b){if(a.DATA[sortingFieldLocal]>b.DATA[sortingFieldLocal]){return 1;}
if(a.DATA[sortingFieldLocal]<b.DATA[sortingFieldLocal]){return-1;}
if(a.DATA['LASTUPDATE']>b.DATA['LASTUPDATE']){return 1;}
if(a.DATA['LASTUPDATE']<b.DATA['LASTUPDATE']){return-1;}
return 0;});}else{arrayData.sort(function(a,b){if(a.DATA[sortingFieldLocal]>b.DATA[sortingFieldLocal]){return-1;}
if(a.DATA[sortingFieldLocal]<b.DATA[sortingFieldLocal]){return 1;}
if(a.DATA['LASTUPDATE']>b.DATA['LASTUPDATE']){return-1;}
if(a.DATA['LASTUPDATE']<b.DATA['LASTUPDATE']){return 1;}
return 0;});}
$scope.connection.keyToPosition={};for(var i=0;i<arrayData.length;i++){$scope.connection.keyToPosition[arrayData[i].SUBKEY]=i;};};if($scope.connection.connected||$scope.connection.aggPreLoaded){$scope.progressBar.current++;$scope.connectAll();}}]);angular.module('ccc-app').controller('CurrentAggPriceWidget',['$rootScope','$scope','$timeout','$stateParams','subscriptionManager','streamerUtilities','dateParsing','pageInfo',function($rootScope,$scope,$timeout,$stateParams,subscriptionManager,streamerUtilities,dateParsing,pageInfo){$scope.dateParsing=dateParsing;$scope.fromSymbolDisplay=pageInfo.getH1Text();$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();$scope.parseMessage=function(messageInfo){var subKey=messageInfo.SubKey;if($scope.connection.subs.indexOf(subKey)>-1){if(subKey==messageInfo.Raw){$scope.progressBar.current++;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;}}else{var messageObject=messageInfo.Obj;var arrayKey=0;if($scope.connection.keyToPosition[subKey]!=0){arrayKey=$scope.connection.keyToPosition[subKey]||$scope.connection.data.length;}
$scope.connection.data[arrayKey]=streamerUtilities.decorateCurrentWithMktCap($scope.connection.data[arrayKey],messageInfo,pageInfo.getCoinsMined());if($scope.connection.loadingData){$scope.connection.keyToPosition[subKey]=arrayKey;$scope.connection.data[arrayKey]['VISUAL']={};$scope.progressBar.current++;$scope.progressBar.message=messageObject.MARKET+':'+messageObject.FROMSYMBOL+'/'+messageObject.TOSYMBOL;if($scope.progressBar.current>=$scope.progressBar.max){$scope.connection.loadingData=false;}}else{$scope.connection.data[arrayKey].timeout=$timeout(function(){$scope.handleTimeout(subKey);},1500,false);}}}}
$scope.reconnectAll=function(symbol){$scope.connection.subs=subscriptionManager.getCurrentAGGSubByToSymbol(symbol);$scope.progressBar.max=$scope.connection.subs.length+2;streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});};$scope.disconnectAll=function(changingView){streamerUtilities.removeGlobalPageSubs($scope.connection.subs);if(changingView){$scope.changeCurrency();$scope.changeView();$scope.socketConnected();$scope.currentAggMessage();}else{$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();}};$scope.changeCurrency=$rootScope.$on('ChangeCurrency',function(event,symbol){$scope.disconnectAll(false);$scope.reconnectAll(symbol);});$scope.changeView=$rootScope.$on('ChangeView',function(event,viewChangeParams){$scope.disconnectAll(true);});$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;if(!$scope.connection.aggPreLoaded){$scope.progressBar.current++;$scope.progressBar.message='Loading data...';streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});}});$scope.currentAggMessage=$rootScope.$on('CurrentAggMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});$scope.handleTimeout=function(subKey){var arrayKeyToTimeout=$scope.connection.keyToPosition[subKey];if(arrayKeyToTimeout||arrayKeyToTimeout==0){var visual=$scope.connection.data[arrayKeyToTimeout]['VISUAL'];var dateNow=new Date();for(var property in visual){if(visual[property]!=false&&dateNow>=visual[property]){visual[property]=false;}}
$scope.connection.data[arrayKeyToTimeout]['VISUAL']=visual;}};if($stateParams.hasOwnProperty("Symbol")&&subscriptionManager.getCurrentAGGSubsObj().hasOwnProperty($stateParams.Symbol.toUpperCase())){if($scope.connection.connected){$scope.reconnectAll($stateParams.Symbol.toUpperCase());}else{$scope.connection.subs=subscriptionManager.getCurrentAGGSubByToSymbol($stateParams.Symbol.toUpperCase());$scope.progressBar.max=$scope.connection.subs.length+2;if($scope.connection.aggPreLoaded){$scope.progressBar.current++;streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});}}}else{$scope.connection.subs=subscriptionManager.getCurrentAGGSub();$scope.progressBar.max=$scope.connection.subs.length+2;if($scope.connection.connected||$scope.connection.aggPreLoaded){$scope.progressBar.current++;streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});}}}]);angular.module('ccc-app').controller('CoinProfileLookTop',['$rootScope','$scope','cModalService','pageInfo','subscriptionManager','$state','$stateParams','$timeout','streamerUtilities','userManager','portfolioSummary','portfolioManager','portfolioModalService','toastNotifications','socialStats','dateParsing',function($rootScope,$scope,cModalService,pageInfo,subscriptionManager,$state,$stateParams,$timeout,streamerUtilities,userManager,portfolioSummary,portfolioManager,portfolioModalService,toastNotifications,socialStats,dateParsing){$scope.pageInfo=pageInfo;$scope.totalCoinsForConversion=1;$scope.dateParsing=dateParsing;$scope.userManager=userManager;$scope.portfolioSummary=portfolioSummary;$scope.changingFollowStatus=false;$scope.followingHover=false;$scope.fromSymbol=pageInfo.getSymbol()||pageInfo.getH1Text();$scope.shouldShowButton=function(){if(pageInfo.getIndividualSponsorExcludedCountries()===""){return true;}
var exculdedCountriesArray=pageInfo.getIndividualSponsorExcludedCountries().split(",");if(exculdedCountriesArray.indexOf(pageInfo.getUserCountryCode())!==-1){return false;}
return true;};$scope.showLoginScreen=function(timeoutMS){if(!userManager.isLoggedIn()){$timeout(function(){if(!userManager.isLoggedIn()&&!userManager.isShowingLogin()){cModalService.showLoginModal('If you are enjoying our free '+pageInfo.getH1Text()+' streaming service please login or signup.','Coin Profile Top Show Login After Timeout');}},timeoutMS);}};$scope.showLoginScreen(300000);$scope.initialVisibleCurrencyNumber=5;$scope.currencyDisplay=[];$scope.currencySecondaryDisplay=[];$scope.currencyIsInSecondary=false;$scope.firstViewLoad=true;$scope.connection=streamerUtilities.initConnection();var currentAGGSubsObj=subscriptionManager.getCurrentAGGSubsObj();var currentSubsClasification=subscriptionManager.getCurrentSubsClassification();var tempKeyToPos={};var tempSubs=[];for(var i=0;i<currentSubsClasification.length;i++){tempKeyToPos[currentAGGSubsObj[currentSubsClasification[i]]]=i;tempSubs[i]=currentAGGSubsObj[currentSubsClasification[i]];if(i<$scope.initialVisibleCurrencyNumber){$scope.currencyDisplay.push({Symbol:currentSubsClasification[i],Sub:currentAGGSubsObj[currentSubsClasification[i]],DISPLAY:{CHANGEPCT24HOUR:0.00,PRICE:"Loading..."},DATA:{PRICE:0}});}else{$scope.currencySecondaryDisplay.push({Symbol:currentSubsClasification[i],Sub:currentAGGSubsObj[currentSubsClasification[i]],DISPLAY:{CHANGEPCT24HOUR:0.00,PRICE:"Loading..."},DATA:{PRICE:0}});}}
if($scope.currencyDisplay.length==0){$scope.currencyDisplay.push({Symbol:"BTC",Sub:[],DISPLAY:{CHANGEPCT24HOUR:"0.00",PRICE:"N/A"},DATA:{CHANGE24HOUR:0,CHANGEPCT24HOUR:0,PRICE:0}});}
$scope.selectedCurrency=$scope.currencyDisplay[0];$scope.connection.keyToPosition=tempKeyToPos;$scope.connection.subs=tempSubs;$scope.state=$state;$scope.secondLevelNav=pageInfo.getSecondLevelNav();$scope.totalSubs=0;$scope.totalSecondarySubs=0;$scope.generateClassForDropdown=function(){$scope.totalSubs=currentSubsClasification.length;$scope.totalSecondarySubs=$scope.currencySecondaryDisplay.length;};$scope.getTotalCurrentHoldingsValue=function(){return portfolioSummary.getTotalCurrentHoldingsValue($scope.selectedCurrency);};$scope.generateClassForDropdown();$rootScope.$on('$stateChangeSuccess',function(event){if($state.includes("post")){if($stateParams.hasOwnProperty("PostId")&&$stateParams.PostId.substring(0,2)=="p_"){pageInfo.setCurrentPostId($stateParams.PostId.replace("p_",""));}else{$scope.changeView('forum');return;}}
if($stateParams.hasOwnProperty("Symbol")){var currentPageSymbol=$stateParams.Symbol.toUpperCase();var foundSymbol=false;angular.forEach($scope.currencyDisplay,function(value,key){if(value.Symbol==currentPageSymbol){foundSymbol=true;$scope.selectedCurrency=value;}});if(!foundSymbol){angular.forEach($scope.currencySecondaryDisplay,function(value,key){if(value.Symbol==currentPageSymbol){$scope.selectedCurrency=value;$scope.currencyIsInSecondary=true;foundSymbol=true;}});}
if($scope.firstViewLoad){$scope.firstViewLoad=false;if(!foundSymbol){$scope.changeCurrency(0,true);}else{subscriptionManager.changeCurrency($scope.selectedCurrency.Symbol);}}}else{$scope.selectedCurrency=$scope.currencyDisplay[0];}
var viewToTrack=$state.current.name.replace('.currency','');var currentSection=$state.current.name.split('.')[0];if($state.current.hasOwnProperty("seoTitle")&&$state.current["seoTitle"]!=""){if($state.current["seoTitle"]=="InitialTitle"){pageInfo.setInitialSEOTitle();}else{pageInfo.setBaseSEOTitle($state.current["seoTitle"]);}}
if($state.current.hasOwnProperty("seoDescription")&&$state.current["seoDescription"]!=""){if($state.current["seoDescription"]=="InitialDescription"){pageInfo.setInitialSEODescription();}else{pageInfo.setBaseSEODescription($state.current["seoDescription"]);}}
pageInfo.setToSymbol($scope.selectedCurrency.Symbol);pageInfo.addToSymbolToSEOTitle();pageInfo.addToSymbolToSEODescription();pageInfo.setCurrentPageSection(currentSection);pageInfo.trackPage(pageInfo.getPageId(),"Coin_"+viewToTrack);});$scope.changeCurrency=function(id,isMain){if(isMain){$scope.selectedCurrency=$scope.currencyDisplay[id];$scope.currencyIsInSecondary=false;}else{$scope.currencyIsInSecondary=true;$scope.selectedCurrency=$scope.currencySecondaryDisplay[id];}
var newState=$state.current.name;subscriptionManager.changeCurrency($scope.selectedCurrency.Symbol);if(newState!=""){var objectToSend={Symbol:$scope.selectedCurrency.Symbol};if(!$state.includes("*.currency")&&!$state.includes("*.*.currency")){newState+=".currency";}
$state.go(newState,objectToSend);}};$scope.isActive=function(viewName){if(viewName=="forum"&&$state.includes("post")){return true;}
return $state.includes(viewName);};$scope.getActiveName=function(){if($state.includes("post")){return"Forum";}
for(var i=0;i<$scope.secondLevelNav.length;i++){if($state.includes($scope.secondLevelNav[i].ViewName))
return $scope.secondLevelNav[i].DisplayName;}};$rootScope.$on('ChangeToForumView',function(event){$scope.changeView('forum');});$rootScope.$on('ChangeToChartsView',function(event){$scope.changeView('charts');});$scope.changeView=function(viewName){if($state.includes(viewName))
return;var viewChangeParams={};viewChangeParams.ViewName=viewName;if($scope.selectedCurrency){viewChangeParams.Symbol=$scope.selectedCurrency.Symbol;}
subscriptionManager.changeView(viewChangeParams);var newState=viewName+".currency";if($scope.selectedCurrency){$state.go(newState,{Symbol:viewChangeParams.Symbol});}else{$state.go(viewName);}};$scope.addCoinToPortfolio=function(){if(!userManager.isLoggedIn()){cModalService.showLoginModal("Please login or signup and you'll be able to add "+pageInfo.getH1Text()+" to your portfolio.","Coin Profile Top Add Coin To Portfolio");return;}
var objToSend={};var coinInfo={};coinInfo.Id=pageInfo.getPageId();coinInfo.Symbol=pageInfo.getSymbol();coinInfo.ImageUrl=pageInfo.getLogo();coinInfo.Name=pageInfo.getH1Text();coinInfo.BaseUrl=pageInfo.getBaseUrl();objToSend.NeedsPortfolioSelection=true;objToSend.PortfolioOptions=portfolioSummary.getDisplayData();objToSend.PortfolioId=-1;if(portfolioSummary.hasData()){objToSend.PortfolioId=objToSend.PortfolioOptions[0].Id;}
objToSend.Coin=coinInfo;objToSend.BuyCurrency=$scope.selectedCurrency.DATA.TOSYMBOL||"BTC";objToSend.BuyPrice=$scope.selectedCurrency.DATA.PRICE||0;objToSend.BuyPriceType="per_unit";objToSend.ShowAdvanced=false;objToSend.WalletName="";objToSend.ExchangeName="";objToSend.BoughtOn=new Date();objToSend.BoughtOn.setHours(0,0,0,0);objToSend.SoldOn=objToSend.BoughtOn;objToSend.Sold=false;objToSend.Action='Add';objToSend.ShowBasicInfo=true;portfolioModalService.showCoinDialog(objToSend);};$scope.changeFollowingStatus=function(){if($scope.changingFollowStatus){return;}
$scope.changingFollowStatus=true;var followingType=userManager.FOLLOWING.COIN;userManager.changeFollowingStatus(pageInfo.getPageId(),followingType).then(function successCallback(response){var data=response.data;if(data["Response"]=="Success"){if(data.Type==100){toastNotifications.addNotification('success','Following '+pageInfo.getH1Text()+'!');userManager.setFollowing(true);socialStats.addFollower(userManager.getCryptopianAsFollower());}
if(data.Type==200){toastNotifications.addNotification('success','Unfollowed '+pageInfo.getH1Text()+'!');userManager.setFollowing(false);socialStats.removeFollower(userManager.getCryptopianAsFollower());}}else{if(data.Type==1){cModalService.showLoginModal("Please login or signup and you'll be able to follow "+pageInfo.getH1Text()+".","Coin Profile Top Change Following");}
if(data.Type==5){cModalService.showActivationReminderModal();};}
$scope.changingFollowStatus=false;},function errorCallback(response){var data=response.data;$scope.changingFollowStatus=false;toastNotifications.addNotification('error',data["Message"]);});};$scope.parseMessage=function(messageInfo){var subKey=messageInfo.SubKey;if($scope.connection.subs.indexOf(subKey)>-1){$scope.connection.loadingData=false;if(subKey==messageInfo.Raw){return;}
if(!messageInfo.Obj.hasOwnProperty("CHANGE24HOUR")){return;}
var arrayKey=0;arrayKey=$scope.connection.keyToPosition[subKey];if(arrayKey<$scope.initialVisibleCurrencyNumber){$scope.currencyDisplay[arrayKey]=streamerUtilities.decorateCurrentWithMktCap($scope.currencyDisplay[arrayKey],messageInfo,pageInfo.getCoinsMined());$scope.currencyDisplay[arrayKey].timeout=$timeout(function(){$scope.handleTimeout(subKey);},1500,false);}else{$scope.currencySecondaryDisplay[arrayKey-$scope.initialVisibleCurrencyNumber]=streamerUtilities.decorateCurrentWithMktCap($scope.currencySecondaryDisplay[arrayKey-$scope.initialVisibleCurrencyNumber],messageInfo,pageInfo.getCoinsMined());$scope.currencySecondaryDisplay[arrayKey-$scope.initialVisibleCurrencyNumber].timeout=$timeout(function(){$scope.handleTimeout(subKey);},1500,false);}
$scope.connection.loadingData=false;}}
$scope.handleTimeout=function(subKey){var arrayKeyToTimeout=$scope.connection.keyToPosition[subKey];if(arrayKeyToTimeout||arrayKeyToTimeout==0){var visual;if(arrayKeyToTimeout<$scope.initialVisibleCurrencyNumber){visual=$scope.currencyDisplay[arrayKeyToTimeout]['VISUAL'];}else{visual=$scope.currencySecondaryDisplay[arrayKeyToTimeout-$scope.initialVisibleCurrencyNumber]['VISUAL'];}
var dateNow=new Date();for(var property in visual){if(visual[property]!=false&&dateNow>=visual[property]){visual[property]=false;}}
if(arrayKeyToTimeout<$scope.initialVisibleCurrencyNumber){$scope.currencyDisplay[arrayKeyToTimeout]['VISUAL']=visual;}else{$scope.currencySecondaryDisplay[arrayKeyToTimeout-$scope.initialVisibleCurrencyNumber]['VISUAL']=visual;}}};$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});});$scope.currentAggMessage=$rootScope.$on('CurrentAggMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});}]);angular.module('ccc-app').controller('StreamingTradesCtrl',['$rootScope','$scope','$timeout','$stateParams','$filter','subscriptionManager','streamerUtilities','pageInfo','dateParsing',function($rootScope,$scope,$timeout,$stateParams,$filter,subscriptionManager,streamerUtilities,pageInfo,dateParsing){$scope.dateParsing=dateParsing;$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();$scope.markets=[];$scope.toSymbol=subscriptionManager.getCurrentToSymbol();$scope.toSymbolDisplay=CCC.STATIC.CURRENCY.getSymbol($scope.toSymbol);$scope.fromSymbol=pageInfo.getSymbol()||pageInfo.getH1Text();$scope.tradeSummary={'SellsV':0,'SellsVT':0,'SellsNr':0,'DisplaySellsVT':'','BuyV':0,'BuyVT':0,'BuyNr':0,'DisplayBuyVT':'','UnknownV':0,'UnknownVT':0,'UnknownNr':0,'DisplayUnknownVT':'','TotalV':0,'TotalVT':0,'DisplayTotalVT':'','PctSell':0,'PctUnknown':0,'PctBuy':0};$scope.generateMarketsFromSubs=function(subs){$scope.markets=[];$scope.exchangeAlreadyExists={};for(var i=0,length=subs.length;i<length;i++){var currentSubDetails=CCC.TRADE.unpack(subs[i]);var subToPush={'Market':subscriptionManager.getNameForExchange(currentSubDetails.M),'IsStreaming':true,'SubKey':subs[i]};if(!$scope.exchangeAlreadyExists.hasOwnProperty(currentSubDetails.M)){$scope.markets.push(subToPush);$scope.exchangeAlreadyExists[currentSubDetails.M]=true;}}};$scope.reconnectAll=function(symbol){$scope.connection.subs=subscriptionManager.getComputedTradeSubsBySymbol(symbol);$scope.exchanges=$scope.generateMarketsFromSubs($scope.connection.subs);streamerUtilities.addGlobalPageSubs($scope.connection.subs);};if($stateParams.hasOwnProperty("Symbol")&&subscriptionManager.getComputedTradeSubsObj().hasOwnProperty($stateParams.Symbol.toUpperCase())){if($scope.connection.connected){$scope.reconnectAll($stateParams.Symbol.toUpperCase());}else{$scope.connection.subs=subscriptionManager.getComputedTradeSubsBySymbol($stateParams.Symbol.toUpperCase());$scope.exchanges=$scope.generateMarketsFromSubs($scope.connection.subs);}}else{$scope.connection.subs=subscriptionManager.getComputedTradeSubs();$scope.exchanges=$scope.generateMarketsFromSubs($scope.connection.subs);if($scope.connection.connected){streamerUtilities.addGlobalPageSubs($scope.connection.subs);}}
$scope.disconnectAll=function(changingView){streamerUtilities.removeGlobalPageSubs($scope.connection.subs);$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();if(changingView){$scope.changeCurrency();$scope.changeView();$scope.socketConnected();$scope.tradeMessage();}};$scope.selectAllStreamingMarkets=function(){var someExchangesNotStreaming=false;var tempSubs=[];for(var i=0,length=$scope.markets.length;i<length;i++){if(!$scope.markets[i].IsStreaming){$scope.markets[i].IsStreaming=true;someExchangesNotStreaming=true;}
tempSubs.push($scope.markets[i].SubKey);};if(someExchangesNotStreaming){$scope.connection.subs=tempSubs;streamerUtilities.addGlobalPageSubs($scope.connection.subs);}};$scope.deselectAllStreamingMarkets=function(){var someExchangesStreaming=false;for(var i=0,length=$scope.markets.length;i<length;i++){if($scope.markets[i].IsStreaming){$scope.markets[i].IsStreaming=false;someExchangesStreaming=true;}};if(someExchangesStreaming){streamerUtilities.removeGlobalPageSubs($scope.connection.subs);$scope.connection.data=[]
$scope.connection.subs=[];}};$scope.changeMarketStreamingStatus=function(id){$scope.markets[id].IsStreaming=!$scope.markets[id].IsStreaming;streamerUtilities.removeGlobalPageSubs($scope.connection.subs);var tempSubs=[];for(var i=0,length=$scope.markets.length;i<length;i++){if($scope.markets[i].IsStreaming){tempSubs.push($scope.markets[i].SubKey);}};if(!$scope.markets[id].IsStreaming){$scope.connection.data=[];}
$scope.connection.subs=tempSubs;streamerUtilities.addGlobalPageSubs($scope.connection.subs);};$scope.changeCurrency=$rootScope.$on('ChangeCurrency',function(event,symbol){$scope.disconnectAll(false);$scope.reconnectAll(symbol);$scope.toSymbol=symbol;$scope.toSymbolDisplay=CCC.STATIC.CURRENCY.getSymbol($scope.toSymbol);});$scope.changeView=$rootScope.$on('ChangeView',function(event,viewChangeParams){$scope.disconnectAll(true);});$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;$scope.progressBar.current++;$scope.progressBar.message='Loading data...';streamerUtilities.addGlobalPageSubs($scope.connection.subs);});$scope.parseMessage=function(messageInfo){if($scope.connection.subs.indexOf(messageInfo.SubKey)>-1){$scope.connection.loadingData=false;if(messageInfo.SubKey!=messageInfo.Raw){var currentTrade=messageInfo.Obj;var allTrades=$scope.connection.data;var allTradesLength=allTrades.length;if(allTradesLength>19){if(allTrades[allTradesLength-1].TS>currentTrade.TS){return;}}
currentTrade.timeout=$timeout(function(){currentTrade['highlight']=false;},1500,false);allTrades.unshift(currentTrade);if(allTradesLength>19)
{var prevTrade=allTrades.pop();prevTrade=null;}
allTrades.sort(function(a,b){if(a.TS>b.TS){return-1;}
if(a.TS<b.TS){return 1;}
if(a.ARRIVEDON>b.ARRIVEDON){return-1;}
if(a.ARRIVEDON<b.ARRIVEDON){return 1;}
return 0;});var tempTradeSummary={'SellsV':0,'SellsVT':0,'SellsNr':0,'DisplaySellsVT':'','BuyV':0,'BuyVT':0,'BuyNr':0,'DisplayBuyVT':'','UnknownV':0,'UnknownVT':0,'UnknownNr':0,'DisplayUnknownVT':'','TotalV':0,'TotalVT':0,'DisplayTotalVT':'','PctSell':0,'PctUnknown':0,'PctBuy':0};for(var i=0;i<allTrades.length;i++){var quantity=parseFloat(allTrades[i].Q);var totalPrice=parseFloat(allTrades[i].TOTAL);switch(allTrades[i].DISPLAY.F){case'Buy':tempTradeSummary.BuyV=tempTradeSummary.BuyV+quantity;tempTradeSummary.BuyVT=tempTradeSummary.BuyVT+totalPrice;tempTradeSummary.BuyNr++;break;case'Sell':tempTradeSummary.SellsV=tempTradeSummary.SellsV+quantity;tempTradeSummary.SellsVT=tempTradeSummary.SellsVT+totalPrice;tempTradeSummary.SellsNr++;break;case'Unknown':tempTradeSummary.UnknownV=tempTradeSummary.UnknownV+quantity;tempTradeSummary.UnknownVT=tempTradeSummary.UnknownVT+totalPrice;tempTradeSummary.UnknownNr++;break;};tempTradeSummary.TotalV=tempTradeSummary.TotalV+quantity;tempTradeSummary.TotalVT=tempTradeSummary.TotalVT+totalPrice;}
$scope.tradeSummary=tempTradeSummary;$scope.tradeSummary.PctSell=Math.floor($scope.tradeSummary.SellsVT/$scope.tradeSummary.TotalVT*100);$scope.tradeSummary.PctUnknown=Math.floor($scope.tradeSummary.UnknownVT/$scope.tradeSummary.TotalVT*100);$scope.tradeSummary.PctBuy=100-$scope.tradeSummary.PctSell-$scope.tradeSummary.PctUnknown;$scope.tradeSummary.DisplaySellsVT=CCC.STATIC.UTIL.convertValueToDisplay($scope.toSymbolDisplay,$scope.tradeSummary.SellsVT,$filter('number'));$scope.tradeSummary.DisplayBuyVT=CCC.STATIC.UTIL.convertValueToDisplay($scope.toSymbolDisplay,$scope.tradeSummary.BuyVT,$filter('number'));$scope.tradeSummary.DisplayUnknownVT=CCC.STATIC.UTIL.convertValueToDisplay($scope.toSymbolDisplay,$scope.tradeSummary.UnknownVT,$filter('number'));$scope.tradeSummary.DisplayTotalVT=CCC.STATIC.UTIL.convertValueToDisplay($scope.toSymbolDisplay,$scope.tradeSummary.TotalVT,$filter('number'));}}};$scope.tradeMessage=$rootScope.$on('TradeMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});}]);;;;angular.module('ccc-app').directive('basicMonitor',function(){return{restrict:'E',templateUrl:'streamers/basic-monitor.html',controller:'StreamingCurrentSubsCtrl',scope:{pagetype:"@",limit:"@"},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('orderBook',['$interval','$timeout',function($interval,$timeout){return{restrict:'E',templateUrl:'streamers/order-book.html',controller:'StreamingOrderBookCtrl',scope:{},link:function(scope,element,attrs){}}}]);angular.module('ccc-app').directive('currentPriceWidget',function(){return{restrict:'E',templateUrl:'streamers/current-price-widget.html',controller:'CurrentAggPriceWidget',scope:{},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('chartWithTradeData',function(){return{restrict:'E',templateUrl:'streamers/chart-with-trade-data.html',controller:['$rootScope','$scope','$timeout','$stateParams','$filter','pageInfo','subscriptionManager','streamerUtilities','dateParsing','chartUtil',function($rootScope,$scope,$timeout,$stateParams,$filter,pageInfo,subscriptionManager,streamerUtilities,dateParsing,chartUtil){$scope.DateParsing=dateParsing;$scope.trendup=true;$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();$scope.shouldShowButton=function(){if($scope.excludedcountries===""){return true;}
var exculdedCountriesArray=$scope.excludedcountries.split(",");if(exculdedCountriesArray.indexOf(pageInfo.getUserCountryCode())!==-1){return false;}
return true;};$scope.parseMessage=function(messageInfo){var subKey=messageInfo.SubKey;if($scope.connection.subs.indexOf(subKey)>-1){if(subKey==messageInfo.Raw){$scope.progressBar.current++;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;}}else{var messageObject=messageInfo.Obj;var arrayKey=0;if($scope.connection.keyToPosition[subKey]!=0){arrayKey=$scope.connection.keyToPosition[subKey]||$scope.connection.data.length;}
$scope.connection.data[arrayKey]=streamerUtilities.decorateCurrent($scope.connection.data[arrayKey],messageInfo);if($scope.connection.data[arrayKey].DATA.CHANGE24HOUR>=0){$scope.trendup=true;}else{$scope.trendup=false;}
if($scope.connection.loadingData){$scope.connection.keyToPosition[subKey]=arrayKey;$scope.connection.data[arrayKey]['VISUAL']={};$scope.progressBar.current++;$scope.progressBar.message=messageObject.MARKET+':'+messageObject.FROMSYMBOL+'/'+messageObject.TOSYMBOL;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;}}else{$scope.connection.data[arrayKey].timeout=$timeout(function(){$scope.handleTimeout(subKey);},1500,false);}}}}
$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;$scope.progressBar.current++;$scope.progressBar.message='Loading data...';streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});});$scope.currentAggMessage=$rootScope.$on('CurrentAggMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});$scope.handleTimeout=function(subKey){var arrayKeyToTimeout=$scope.connection.keyToPosition[subKey];if(arrayKeyToTimeout||arrayKeyToTimeout==0){var visual=$scope.connection.data[arrayKeyToTimeout]['VISUAL'];var dateNow=new Date();for(var property in visual){if(visual[property]!=false&&dateNow>=visual[property])
{visual[property]=false;}}
$scope.connection.data[arrayKeyToTimeout]['VISUAL']=visual;}};$scope.buildChart=function(){$scope.chart=AmCharts.makeChart($scope.chartId,{type:"serial",theme:"none",dataProvider:[],panEventsEnabled:false,marginTop:0,marginRight:0,marginLeft:0,marginBottom:0,autoMargins:false,showBalloon:false,addClassNames:true,pathToImages:"/images/",categoryField:"time",valueAxes:[{gridAlpha:0,axisAlpha:0,startOnAxis:true,}],categoryAxis:{minPeriod:"hh",maxSeries:360,gridAlpha:0,axisAlpha:0,startOnAxis:true},chartScrollbarSettings:{},graphs:[{id:"g1",lineColor:'#1d8b3a',fillAlphas:0.4,valueField:"close",balloonText:"<div style='margin:0px; font-size:13px;font-weight:bold;'>[[formattedPrice]]</div><div style='margin:0px; font-size:11px;'>[[formattedTime]]</div>"}],chartScrollbarSettings:{graph:"g1",enabled:true},chartCursor:{valueBalloonsEnabled:true,categoryBalloonEnabled:true,zoomable:false},panelsSettings:{usePrefixes:false}});$scope.getHistoData();};$scope.getHistoData=function(){$scope.dataIsLoading=true;if(chartUtil.hasData('hour',$scope.exchange,$scope.fromsymbol,$scope.tosymbol,$scope.maxpoints)){$scope.dataIsLoading=false;var data=chartUtil.getHistoFromMemory('hour',$scope.exchange,$scope.fromsymbol,$scope.tosymbol,$scope.maxpoints);var currencySymbol=CCC.STATIC.CURRENCY.getSymbol($scope.tosymbol);var chartData=chartUtil.polyfillChartData(data,3600,0);chartData=chartData.data;chartData.map(function(obj){obj['formattedTime']=$filter('date')(obj['time'],'MMM d, HH:mm');obj['formattedPrice']=CCC.STATIC.UTIL.convertValueToDisplay(currencySymbol,obj['close'],$filter('number'));return obj;});$scope.chart.dataProvider=chartData;if($scope.chart.dataProvider[0]['open']>$scope.chart.dataProvider[$scope.chart.dataProvider.length-1]['close']){$scope.trendup=false;}
$scope.dataLoaded=true;try{$scope.chart.validateData();}
catch(err){}}else{chartUtil.getHistoFromMinApi('hour',$scope.exchange,$scope.fromsymbol,$scope.tosymbol,$scope.maxpoints,1).success(function(data){$scope.dataIsLoading=false;var currencySymbol=CCC.STATIC.CURRENCY.getSymbol($scope.tosymbol);var chartData=chartUtil.polyfillChartData(data,3600,0);chartData=chartData.data;chartData.map(function(obj){obj['formattedTime']=$filter('date')(obj['time'],'MMM d, HH:mm');obj['formattedPrice']=CCC.STATIC.UTIL.convertValueToDisplay(currencySymbol,obj['close'],$filter('number'));return obj;});$scope.chart.dataProvider=chartData;chartUtil.saveData('hour',$scope.exchange,$scope.fromsymbol,$scope.tosymbol,$scope.maxpoints,data)
$scope.dataLoaded=true;try{$scope.chart.validateData();}
catch(err){}});}};$scope.chartId=$scope.charttype+'-'+$scope.exchange+'-'+$scope.fromsymbol+'-'+$scope.tosymbol;$scope.connection.subs=[$scope.subtype+'~'+$scope.exchange+'~'+$scope.fromsymbol+'~'+$scope.tosymbol];$scope.progressBar.max=$scope.connection.subs.length+2;if($scope.connection.connected){streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});}
$scope.buildChart();}],scope:{charttype:'@',subtype:'@',exchange:'@',fromsymbol:'@',tosymbol:'@',maxpoints:'@',link:'@',linktext:'@',excludedcountries:'@'},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('streamingMktCap',function(){return{restrict:'E',templateUrl:'streamers/mkt-cap.html',controller:['$rootScope','$scope','$timeout','$state','pageInfo','subscriptionManager','streamerUtilities',function($rootScope,$scope,$timeout,$state,pageInfo,subscriptionManager,streamerUtilities){$scope.connection=streamerUtilities.initConnection();$scope.totalCoinsMined=pageInfo.getCoinsMined();$scope.connection.subs=subscriptionManager.getCurrentAGGSub();$scope.showMarketCap=false;$rootScope.$on('$stateChangeSuccess',function(event){$scope.showMarketCap=!$state.includes('overview');});$scope.parseMessage=function(messageInfo){var subKey=messageInfo.SubKey;if($scope.connection.subs.indexOf(subKey)>-1){if(subKey==messageInfo.Raw){$scope.connection.loadingData=false;}else{if($scope.connection.loadingData){$scope.connection.loadingData=false;}
if(!messageInfo.Obj['PRICE']){return;}
var arrayKey=0;if($scope.connection.keyToPosition[subKey]!=0){arrayKey=$scope.connection.keyToPosition[subKey]||$scope.connection.data.length;}
if(!$scope.connection.data[arrayKey]){$scope.connection.data[arrayKey]={};}
$scope.connection.keyToPosition[subKey]=arrayKey;$scope.connection.data[arrayKey]=streamerUtilities.decorateMktCap(messageInfo,$scope.totalCoinsMined);}}};$scope.reconnectAll=function(symbol){$scope.connection.subs=subscriptionManager.getCurrentAGGSubByToSymbol(symbol);streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});};$scope.disconnectAll=function(changingView){streamerUtilities.removeGlobalPageSubs($scope.connection.subs);$scope.connection=streamerUtilities.initConnection();};$scope.changeCurrency=$rootScope.$on('ChangeCurrency',function(event,symbol){$scope.disconnectAll(false);$scope.reconnectAll(symbol);});$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});});$scope.currentAggMessage=$rootScope.$on('CurrentAggMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});}],scope:{},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('coinProfileLookV2',function(){return{restrict:'E',templateUrl:'streamers/coin-profile-look-v2.html',controller:'CoinProfileLookTop',scope:{},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('coinProfileLookTop',function(){return{restrict:'E',templateUrl:'streamers/coin-profile-look-top.html',controller:'CoinProfileLookTop',scope:{},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('exchangeProfileLookTop',function(){return{restrict:'E',templateUrl:'streamers/exchange-profile-look-top.html',controller:['$rootScope','$scope','$state','$stateParams','$timeout','cModalService','subscriptionManager','pageInfo','userManager','portfolioSummary','portfolioManager','portfolioModalService','toastNotifications','socialStats',function($rootScope,$scope,$state,$stateParams,$timeout,cModalService,subscriptionManager,pageInfo,userManager,portfolioSummary,portfolioManager,portfolioModalService,toastNotifications,socialStats){$scope.userManager=userManager;$scope.changingFollowStatus=false;$scope.followingHover=false;$scope.showLoginScreen=function(timeoutMS){if(!userManager.isLoggedIn()){$timeout(function(){if(!userManager.isLoggedIn()&&!userManager.isShowingLogin()){cModalService.showLoginModal('If you are enjoying our free '+pageInfo.getH1Text()+' streaming service please login or signup.','Exchange Profile Show Login After Timeout');}},timeoutMS);}};$scope.showLoginScreen(300000);$scope.initialVisibleCurrencyNumber=7;$scope.currencyDisplay=[];$scope.currencySecondaryDisplay=[];$scope.currencyIsInSecondary=false;$scope.selectedCurrency={'Symbol':''};$scope.firstViewLoad=true;var currentSubsClasification=subscriptionManager.getCurrentSubsClassification();var tempKeyToPos={};var tempSubs=[];for(var i=0;i<currentSubsClasification.length;i++){if(i<$scope.initialVisibleCurrencyNumber){$scope.currencyDisplay.push({Symbol:currentSubsClasification[i],TotalCoins:subscriptionManager.getCurrentSubsByToSymbol(currentSubsClasification[i]).length});}else{$scope.currencySecondaryDisplay.push({Symbol:currentSubsClasification[i],TotalCoins:subscriptionManager.getCurrentSubsByToSymbol(currentSubsClasification[i]).length});}}
$scope.state=$state;$scope.pageInfo=pageInfo;$scope.secondLevelNav=pageInfo.getSecondLevelNav();$scope.totalSubs=0;$scope.totalSecondarySubs=0;$scope.generateClassForDropdown=function(){$scope.totalSubs=currentSubsClasification.length;$scope.totalSecondarySubs=$scope.currencySecondaryDisplay.length;};$scope.generateClassForDropdown();$scope.$root.$on('$stateChangeSuccess',function(event){if($state.includes("post")){if($stateParams.hasOwnProperty("PostId")&&$stateParams.PostId.substring(0,2)=="p_"){pageInfo.setCurrentPostId($stateParams.PostId.replace("p_",""));}else{$scope.changeView('forum');return;}}
if($state.includes("ireview")){if($stateParams.hasOwnProperty("ReviewId")&&$stateParams.ReviewId.substring(0,2)=="r_"){pageInfo.setCurrentReviewId($stateParams.ReviewId.replace("r_",""));}else{$scope.changeView('reviews');return;}}
if($stateParams.hasOwnProperty("Symbol")){var currentPageSymbol=$stateParams.Symbol.toUpperCase();var foundSymbol=false;angular.forEach($scope.currencyDisplay,function(value,key){if(value.Symbol==currentPageSymbol){foundSymbol=true;$scope.selectedCurrency=value;}});if(!foundSymbol){angular.forEach($scope.currencySecondaryDisplay,function(value,key){if(value.Symbol==currentPageSymbol){$scope.selectedCurrency=value;$scope.currencyIsInSecondary=true;foundSymbol=true;}});}
if($scope.firstViewLoad){if(!foundSymbol){$scope.changeCurrency(0,true);$scope.firstViewLoad=false;}else{subscriptionManager.changeCurrency($scope.selectedCurrency.Symbol);$scope.firstViewLoad=false;}}}else{if($scope.currencyDisplay.length>0){$scope.selectedCurrency=$scope.currencyDisplay[0];}}
var viewToTrack=$state.current.name.replace('.currency','');pageInfo.trackPage(pageInfo.getPageId(),"Exchange_"+viewToTrack);});$scope.changeCurrency=function(id,isMain){if(isMain){if($scope.currencyDisplay.length>0){$scope.selectedCurrency=$scope.currencyDisplay[id];}
$scope.currencyIsInSecondary=false;}else{$scope.currencyIsInSecondary=true;if($scope.currencySecondaryDisplay.length>0){$scope.selectedCurrency=$scope.currencySecondaryDisplay[id];}}
var newState=$state.current.name;subscriptionManager.changeCurrency($scope.selectedCurrency.Symbol);if(newState!=""){if(newState=="post"){newState="post.postid";}
if(!$state.includes("*.currency")&&!$state.includes("*.*.currency")){newState+=".currency";}
$state.go(newState,{Symbol:$scope.selectedCurrency.Symbol});}};$scope.isActive=function(viewName){if(viewName=="forum"&&$state.includes("post")){return true;}
if(viewName=="reviews"&&$state.includes("ireview")){return true;}
return $state.includes(viewName);};$scope.getActiveName=function(){if($state.includes("post")){return"Forum";}
if($state.includes("ireview")){return"Reviews";}
for(var i=0;i<$scope.secondLevelNav.length;i++){if($state.includes($scope.secondLevelNav[i].ViewName))
return $scope.secondLevelNav[i].DisplayName;}};$scope.changeView=function(viewName){if($state.includes(viewName))
return;var viewChangeParams={};viewChangeParams.ViewName=viewName;viewChangeParams.Symbol=$scope.selectedCurrency.Symbol;subscriptionManager.changeView(viewChangeParams);var newState=viewName+".currency";if($scope.selectedCurrency){$state.go(newState,{Symbol:viewChangeParams.Symbol});}else{$state.go(viewName);}};$scope.changeFollowingStatus=function(){if($scope.changingFollowStatus){return;}
$scope.changingFollowStatus=true;var followingType=userManager.FOLLOWING.EXCHANGE;userManager.changeFollowingStatus(pageInfo.getPageId(),followingType).then(function successCallback(response){var data=response.data;if(data["Response"]=="Success"){if(data.Type==100){toastNotifications.addNotification('success','Following '+pageInfo.getH1Text()+'!');userManager.setFollowing(true);socialStats.addFollower(userManager.getCryptopianAsFollower());}
if(data.Type==200){toastNotifications.addNotification('success','Unfollowed '+pageInfo.getH1Text()+'!');userManager.setFollowing(false);socialStats.removeFollower(userManager.getCryptopianAsFollower());}}else{if(data.Type==1){cModalService.showLoginModal("Please login or signup and you'll be able to follow "+pageInfo.getH1Text()+'.','Exchange Profile Top Change Following Status');}
if(data.Type==5){cModalService.showActivationReminderModal();};}
$scope.changingFollowStatus=false;},function errorCallback(response){var data=response.data;$scope.changingFollowStatus=false;toastNotifications.addNotification('error',data["Message"]);});};$rootScope.$on('ChangeToForumView',function(event){$scope.changeView('forum');});$rootScope.$on('ChangeToReviewsView',function(event){$scope.changeView('reviews');});}],scope:{},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('featuredCoins',function(){return{restrict:'E',templateUrl:'streamers/featured-coins.html',controller:['$rootScope','$scope','$state','$stateParams','$timeout','subscriptionManager','pageInfo','streamerUtilities',function($rootScope,$scope,$state,$stateParams,$timeout,subscriptionManager,pageInfo,streamerUtilities){$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();for(var i=0;i<$scope.subs.length;i++){$scope.connection.keyToPosition[$scope.subs[i]]=i;}
$scope.connection.subs=$scope.subs;$scope.progressBar.max=$scope.connection.subs.length+2;$scope.parseMessage=function(messageInfo){var subKey=messageInfo.SubKey;if($scope.connection.subs.indexOf(subKey)>-1){if(subKey==messageInfo.Raw){$scope.progressBar.current++;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;}}else{var messageObject=messageInfo.Obj;var arrayKey=0;if($scope.connection.keyToPosition[subKey]!=0){arrayKey=$scope.connection.keyToPosition[subKey]||$scope.connection.data.length;}
$scope.connection.data[arrayKey]=streamerUtilities.decorateCurrent($scope.connection.data[arrayKey],messageInfo);if($scope.connection.data[arrayKey].DATA.CHANGE24HOUR>=0){$scope.trendup=true;}else{$scope.trendup=false;}
if($scope.connection.loadingData){$scope.connection.keyToPosition[subKey]=arrayKey;$scope.connection.data[arrayKey]['VISUAL']={};$scope.progressBar.current++;$scope.progressBar.message=messageObject.MARKET+':'+messageObject.FROMSYMBOL+'/'+messageObject.TOSYMBOL;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;}}else{$scope.connection.data[arrayKey].timeout=$timeout(function(){$scope.handleTimeout(subKey);},1500,false);}}}}
$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;$scope.progressBar.current++;$scope.progressBar.message='Loading data...';streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});});$scope.currentAggMessage=$rootScope.$on('CurrentAggMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});$scope.handleTimeout=function(subKey){var arrayKeyToTimeout=$scope.connection.keyToPosition[subKey];if(arrayKeyToTimeout||arrayKeyToTimeout==0){var visual=$scope.connection.data[arrayKeyToTimeout]['VISUAL'];var dateNow=new Date();for(var property in visual){if(visual[property]!=false&&dateNow>=visual[property])
{visual[property]=false;}}
$scope.connection.data[arrayKeyToTimeout]['VISUAL']=visual;}};if($scope.connection.connected){streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});}}],scope:{subs:"=",names:"="},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('toplist',function(){return{restrict:'E',templateUrl:'streamers/toplist.html',controller:['$rootScope','$scope','$state','$stateParams','$timeout','subscriptionManager','pageInfo','streamerUtilities',function($rootScope,$scope,$state,$stateParams,$timeout,subscriptionManager,pageInfo,streamerUtilities){$scope.connection=streamerUtilities.initConnection();$scope.progressBar=streamerUtilities.initProgressBar();for(var i=0;i<$scope.items.length;i++){$scope.connection.keyToPosition[$scope.items[i].Element]=i;}
$scope.connection.subs=$scope.items.map(function(obj){return obj.Element;});$scope.progressBar.max=$scope.connection.subs.length+2;$scope.parseMessage=function(messageInfo){var subKey=messageInfo.SubKey;if($scope.connection.subs.indexOf(subKey)>-1){if(subKey==messageInfo.Raw){$scope.progressBar.current++;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;}}else{var messageObject=messageInfo.Obj;var arrayKey=0;if($scope.connection.keyToPosition[subKey]!=0){arrayKey=$scope.connection.keyToPosition[subKey]||$scope.connection.data.length;}
$scope.connection.data[arrayKey]=streamerUtilities.decorateCurrent($scope.connection.data[arrayKey],messageInfo);if($scope.connection.data[arrayKey].DATA.CHANGE24HOUR>=0){$scope.trendup=true;}else{$scope.trendup=false;}
if($scope.connection.loadingData){$scope.connection.keyToPosition[subKey]=arrayKey;$scope.connection.data[arrayKey]['VISUAL']={};$scope.progressBar.current++;$scope.progressBar.message=messageObject.MARKET+':'+messageObject.FROMSYMBOL+'/'+messageObject.TOSYMBOL;if($scope.progressBar.current==$scope.progressBar.max){$scope.connection.loadingData=false;}}else{$scope.connection.data[arrayKey].timeout=$timeout(function(){$scope.handleTimeout(subKey);},1500,false);}}}}
$scope.socketConnected=$rootScope.$on('SocketConnected',function(event,isConnected){$scope.connection.connected=true;$scope.progressBar.current++;$scope.progressBar.message='Loading data...';streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});});$scope.currentAggMessage=$rootScope.$on('CurrentAggMessage',function(event,messageInfo){$scope.parseMessage(messageInfo);});$scope.handleTimeout=function(subKey){var arrayKeyToTimeout=$scope.connection.keyToPosition[subKey];if(arrayKeyToTimeout||arrayKeyToTimeout==0){var visual=$scope.connection.data[arrayKeyToTimeout]['VISUAL'];var dateNow=new Date();for(var property in visual){if(visual[property]!=false&&dateNow>=visual[property])
{visual[property]=false;}}
$scope.connection.data[arrayKeyToTimeout]['VISUAL']=visual;}};if($scope.connection.connected){streamerUtilities.addGlobalPageSubs($scope.connection.subs,function(messageInfo){$scope.parseMessage(messageInfo);});}}],scope:{items:"=",tname:"@"},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('symbolExchangeShareTable',function(){return{restrict:'E',templateUrl:'streamers/symbol-exchange-share-table.html',controller:'StreamingCurrentSubsCtrl',scope:{},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('symbolTosymbolShareTable',function(){return{restrict:'E',templateUrl:'streamers/symbol-tosymbol-share-table.html',controller:'StreamingAGGSubsCtrl',scope:{},link:function(scope,element,attrs){}};});angular.module('ccc-app').directive('tradesLarge',function(){return{restrict:'E',templateUrl:'streamers/trades-large.html',controller:'StreamingTradesCtrl',scope:{pagetype:"@"},link:function(scope,element,attrs){}};});;;;